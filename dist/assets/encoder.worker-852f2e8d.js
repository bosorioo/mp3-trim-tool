(function(){"use strict";var oe={};function Xa(y){return new Int8Array(y)}function ke(y){return new Int16Array(y)}function Xe(y){return new Int32Array(y)}function Ye(y){return new Float32Array(y)}function Ya(y){return new Float64Array(y)}function qe(y){if(y.length==1)return Ye(y[0]);var M=y[0];y=y.slice(1);for(var V=[],P=0;P<M;P++)V.push(qe(y));return V}function De(y){if(y.length==1)return Xe(y[0]);var M=y[0];y=y.slice(1);for(var V=[],P=0;P<M;P++)V.push(De(y));return V}function Ge(y){if(y.length==1)return ke(y[0]);var M=y[0];y=y.slice(1);for(var V=[],P=0;P<M;P++)V.push(Ge(y));return V}function Pe(y){if(y.length==1)return new Array(y[0]);var M=y[0];y=y.slice(1);for(var V=[],P=0;P<M;P++)V.push(Pe(y));return V}var $e={};$e.fill=function(y,M,V,P){if(arguments.length==2)for(var n0=0;n0<y.length;n0++)y[n0]=arguments[1];else for(var n0=M;n0<V;n0++)y[n0]=P};var G1={};G1.arraycopy=function(y,M,V,P,n0){for(var W=M+n0;M<W;)V[P++]=y[M++]},G1.out={},G1.out.println=function(y){console.log(y)},G1.out.printf=function(){console.log.apply(console,arguments)};var J1={};J1.SQRT2=1.4142135623730951,J1.FAST_LOG10=function(y){return Math.log10(y)},J1.FAST_LOG10_X=function(y,M){return Math.log10(y)*M};function E1(y){this.ordinal=y}E1.short_block_allowed=new E1(0),E1.short_block_coupled=new E1(1),E1.short_block_dispensed=new E1(2),E1.short_block_forced=new E1(3);var Ze={};Ze.MAX_VALUE=34028235e31;function o1(y){this.ordinal=y}o1.vbr_off=new o1(0),o1.vbr_mt=new o1(1),o1.vbr_rh=new o1(2),o1.vbr_abr=new o1(3),o1.vbr_mtrh=new o1(4),o1.vbr_default=o1.vbr_mtrh;var qa=function(y){},Z0={System:G1,VbrMode:o1,Float:Ze,ShortBlock:E1,Util:J1,Arrays:$e,new_array_n:Pe,new_byte:Xa,new_double:Ya,new_float:Ye,new_float_n:qe,new_int:Xe,new_int_n:De,new_short:ke,new_short_n:Ge,assert:qa},ve,Ke;function Da(){if(Ke)return ve;Ke=1;var y=Z0,M=y.System,V=y.Util,P=y.Arrays,n0=y.new_float,W=t1();function j(){var Y=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*V.SQRT2*.5/2384e-9,.017876148*V.SQRT2*.5/2384e-9,.003134727*V.SQRT2*.5/2384e-9,.002457142*V.SQRT2*.5/2384e-9,971317e-9*V.SQRT2*.5/2384e-9,218868e-9*V.SQRT2*.5/2384e-9,101566e-9*V.SQRT2*.5/2384e-9,13828e-9*V.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],z=12,h0=36,x=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],f=x[W.SHORT_TYPE],O=x[W.SHORT_TYPE],s0=x[W.SHORT_TYPE],Z=x[W.SHORT_TYPE],J=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function K(u,S,e){for(var l=10,R=S+238-14-286,L=-15;L<0;L++){var H,T,p;H=Y[l+-10],T=u[R+-224]*H,p=u[S+224]*H,H=Y[l+-9],T+=u[R+-160]*H,p+=u[S+160]*H,H=Y[l+-8],T+=u[R+-96]*H,p+=u[S+96]*H,H=Y[l+-7],T+=u[R+-32]*H,p+=u[S+32]*H,H=Y[l+-6],T+=u[R+32]*H,p+=u[S+-32]*H,H=Y[l+-5],T+=u[R+96]*H,p+=u[S+-96]*H,H=Y[l+-4],T+=u[R+160]*H,p+=u[S+-160]*H,H=Y[l+-3],T+=u[R+224]*H,p+=u[S+-224]*H,H=Y[l+-2],T+=u[S+-256]*H,p-=u[R+256]*H,H=Y[l+-1],T+=u[S+-192]*H,p-=u[R+192]*H,H=Y[l+0],T+=u[S+-128]*H,p-=u[R+128]*H,H=Y[l+1],T+=u[S+-64]*H,p-=u[R+64]*H,H=Y[l+2],T+=u[S+0]*H,p-=u[R+0]*H,H=Y[l+3],T+=u[S+64]*H,p-=u[R+-64]*H,H=Y[l+4],T+=u[S+128]*H,p-=u[R+-128]*H,H=Y[l+5],T+=u[S+192]*H,p-=u[R+-192]*H,T*=Y[l+6],H=p-T,e[30+L*2]=p+T,e[31+L*2]=Y[l+7]*H,l+=18,S--,R++}{var T,p,l0,b;p=u[S+-16]*Y[l+-10],T=u[S+-32]*Y[l+-2],p+=(u[S+-48]-u[S+16])*Y[l+-9],T+=u[S+-96]*Y[l+-1],p+=(u[S+-80]+u[S+48])*Y[l+-8],T+=u[S+-160]*Y[l+0],p+=(u[S+-112]-u[S+80])*Y[l+-7],T+=u[S+-224]*Y[l+1],p+=(u[S+-144]+u[S+112])*Y[l+-6],T-=u[S+32]*Y[l+2],p+=(u[S+-176]-u[S+144])*Y[l+-5],T-=u[S+96]*Y[l+3],p+=(u[S+-208]+u[S+176])*Y[l+-4],T-=u[S+160]*Y[l+4],p+=(u[S+-240]-u[S+208])*Y[l+-3],T-=u[S+224],l0=T-p,b=T+p,p=e[14],T=e[15]-p,e[31]=b+p,e[30]=l0+T,e[15]=l0-T,e[14]=b-p}{var a;a=e[28]-e[0],e[0]+=e[28],e[28]=a*Y[l+-2*18+7],a=e[29]-e[1],e[1]+=e[29],e[29]=a*Y[l+-2*18+7],a=e[26]-e[2],e[2]+=e[26],e[26]=a*Y[l+-4*18+7],a=e[27]-e[3],e[3]+=e[27],e[27]=a*Y[l+-4*18+7],a=e[24]-e[4],e[4]+=e[24],e[24]=a*Y[l+-6*18+7],a=e[25]-e[5],e[5]+=e[25],e[25]=a*Y[l+-6*18+7],a=e[22]-e[6],e[6]+=e[22],e[22]=a*V.SQRT2,a=e[23]-e[7],e[7]+=e[23],e[23]=a*V.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],a=e[6],e[6]=e[31]-a,e[31]=e[31]+a,a=e[7],e[7]=e[30]-a,e[30]=e[30]+a,a=e[22],e[22]=e[15]-a,e[15]=e[15]+a,a=e[23],e[23]=e[14]-a,e[14]=e[14]+a,a=e[20]-e[8],e[8]+=e[20],e[20]=a*Y[l+-10*18+7],a=e[21]-e[9],e[9]+=e[21],e[21]=a*Y[l+-10*18+7],a=e[18]-e[10],e[10]+=e[18],e[18]=a*Y[l+-12*18+7],a=e[19]-e[11],e[11]+=e[19],e[19]=a*Y[l+-12*18+7],a=e[16]-e[12],e[12]+=e[16],e[16]=a*Y[l+-14*18+7],a=e[17]-e[13],e[13]+=e[17],e[17]=a*Y[l+-14*18+7],a=-e[20]+e[24],e[20]+=e[24],e[24]=a*Y[l+-12*18+7],a=-e[21]+e[25],e[21]+=e[25],e[25]=a*Y[l+-12*18+7],a=e[4]-e[8],e[4]+=e[8],e[8]=a*Y[l+-12*18+7],a=e[5]-e[9],e[5]+=e[9],e[9]=a*Y[l+-12*18+7],a=e[0]-e[12],e[0]+=e[12],e[12]=a*Y[l+-4*18+7],a=e[1]-e[13],e[1]+=e[13],e[13]=a*Y[l+-4*18+7],a=e[16]-e[28],e[16]+=e[28],e[28]=a*Y[l+-4*18+7],a=-e[17]+e[29],e[17]+=e[29],e[29]=a*Y[l+-4*18+7],a=V.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=a,a=V.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=a,a=V.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=a-e[18],a=V.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=a-e[19],a=e[2],e[19]-=e[3],e[3]-=a,e[2]=e[31]-a,e[31]+=a,a=e[3],e[11]-=e[19],e[18]-=a,e[3]=e[30]-a,e[30]+=a,a=e[18],e[27]-=e[11],e[19]-=a,e[18]=e[15]-a,e[15]+=a,a=e[19],e[10]-=a,e[19]=e[14]-a,e[14]+=a,a=e[10],e[11]-=a,e[10]=e[23]-a,e[23]+=a,a=e[11],e[26]-=a,e[11]=e[22]-a,e[22]+=a,a=e[26],e[27]-=a,e[26]=e[7]-a,e[7]+=a,a=e[27],e[27]=e[6]-a,e[6]+=a,a=V.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=a,a=V.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=a,a=V.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=a,a=V.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=a,a=-V.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=a-e[8],a=-V.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=a-e[9],a=-V.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=a-e[25],a=-V.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=a-e[24],a=e[24]-e[16],e[24]=a,a=e[20]-a,e[20]=a,a=e[28]-a,e[28]=a,a=e[25]-e[17],e[25]=a,a=e[21]-a,e[21]=a,a=e[29]-a,e[29]=a,a=e[17]-e[1],e[17]=a,a=e[9]-a,e[9]=a,a=e[25]-a,e[25]=a,a=e[5]-a,e[5]=a,a=e[21]-a,e[21]=a,a=e[13]-a,e[13]=a,a=e[29]-a,e[29]=a,a=e[1]-e[0],e[1]=a,a=e[16]-a,e[16]=a,a=e[17]-a,e[17]=a,a=e[8]-a,e[8]=a,a=e[9]-a,e[9]=a,a=e[24]-a,e[24]=a,a=e[25]-a,e[25]=a,a=e[4]-a,e[4]=a,a=e[5]-a,e[5]=a,a=e[20]-a,e[20]=a,a=e[21]-a,e[21]=a,a=e[12]-a,e[12]=a,a=e[13]-a,e[13]=a,a=e[28]-a,e[28]=a,a=e[29]-a,e[29]=a,a=e[0],e[0]+=e[31],e[31]-=a,a=e[1],e[1]+=e[30],e[30]-=a,a=e[16],e[16]+=e[15],e[15]-=a,a=e[17],e[17]+=e[14],e[14]-=a,a=e[8],e[8]+=e[23],e[23]-=a,a=e[9],e[9]+=e[22],e[22]-=a,a=e[24],e[24]+=e[7],e[7]-=a,a=e[25],e[25]+=e[6],e[6]-=a,a=e[4],e[4]+=e[27],e[27]-=a,a=e[5],e[5]+=e[26],e[26]-=a,a=e[20],e[20]+=e[11],e[11]-=a,a=e[21],e[21]+=e[10],e[10]-=a,a=e[12],e[12]+=e[19],e[19]-=a,a=e[13],e[13]+=e[18],e[18]-=a,a=e[28],e[28]+=e[3],e[3]-=a,a=e[29],e[29]+=e[2],e[2]-=a}}function c(u,S){for(var e=0;e<3;e++){var l,R,L,H,T,p;H=u[S+2*3]*x[W.SHORT_TYPE][0]-u[S+5*3],l=u[S+0*3]*x[W.SHORT_TYPE][2]-u[S+3*3],R=H+l,L=H-l,H=u[S+5*3]*x[W.SHORT_TYPE][0]+u[S+2*3],l=u[S+3*3]*x[W.SHORT_TYPE][2]+u[S+0*3],T=H+l,p=-H+l,l=(u[S+1*3]*x[W.SHORT_TYPE][1]-u[S+4*3])*2069978111953089e-26,H=(u[S+4*3]*x[W.SHORT_TYPE][1]+u[S+1*3])*2069978111953089e-26,u[S+3*0]=R*190752519173728e-25+l,u[S+3*5]=-T*190752519173728e-25+H,L=L*.8660254037844387*1907525191737281e-26,T=T*.5*1907525191737281e-26+H,u[S+3*1]=L-T,u[S+3*2]=L+T,R=R*.5*1907525191737281e-26-l,p=p*.8660254037844387*1907525191737281e-26,u[S+3*3]=R+p,u[S+3*4]=R-p,S++}}function o(u,S,e){var l,R;{var L,H,T,p,l0,b,a,A;L=e[17]-e[9],T=e[15]-e[11],p=e[14]-e[12],l0=e[0]+e[8],b=e[1]+e[7],a=e[2]+e[6],A=e[3]+e[5],u[S+17]=l0+a-A-(b-e[4]),R=(l0+a-A)*O[12+7]+(b-e[4]),l=(L-T-p)*O[12+6],u[S+5]=l+R,u[S+6]=l-R,H=(e[16]-e[10])*O[12+6],b=b*O[12+7]+e[4],l=L*O[12+0]+H+T*O[12+1]+p*O[12+2],R=-l0*O[12+4]+b-a*O[12+5]+A*O[12+3],u[S+1]=l+R,u[S+2]=l-R,l=L*O[12+1]-H-T*O[12+2]+p*O[12+0],R=-l0*O[12+5]+b-a*O[12+3]+A*O[12+4],u[S+9]=l+R,u[S+10]=l-R,l=L*O[12+2]-H+T*O[12+0]-p*O[12+1],R=l0*O[12+3]-b+a*O[12+4]-A*O[12+5],u[S+13]=l+R,u[S+14]=l-R}{var C,F,N,U,B,n,s,t;C=e[8]-e[0],N=e[6]-e[2],U=e[5]-e[3],B=e[17]+e[9],n=e[16]+e[10],s=e[15]+e[11],t=e[14]+e[12],u[S+0]=B+s+t+(n+e[13]),l=(B+s+t)*O[12+7]-(n+e[13]),R=(C-N+U)*O[12+6],u[S+11]=l+R,u[S+12]=l-R,F=(e[7]-e[1])*O[12+6],n=e[13]-n*O[12+7],l=B*O[12+3]-n+s*O[12+4]+t*O[12+5],R=C*O[12+2]+F+N*O[12+0]+U*O[12+1],u[S+3]=l+R,u[S+4]=l-R,l=-B*O[12+5]+n-s*O[12+3]-t*O[12+4],R=C*O[12+1]+F-N*O[12+2]-U*O[12+0],u[S+7]=l+R,u[S+8]=l-R,l=-B*O[12+4]+n-s*O[12+5]-t*O[12+3],R=C*O[12+0]-F+N*O[12+1]-U*O[12+2],u[S+15]=l+R,u[S+16]=l-R}}this.mdct_sub48=function(u,S,e){for(var l=S,R=286,L=0;L<u.channels_out;L++){for(var H=0;H<u.mode_gr;H++){for(var T,p=u.l3_side.tt[H][L],l0=p.xr,b=0,a=u.sb_sample[L][1-H],A=0,C=0;C<18/2;C++)for(K(l,R,a[A]),K(l,R+32,a[A+1]),A+=2,R+=64,T=1;T<32;T+=2)a[A-1][T]*=-1;for(T=0;T<32;T++,b+=18){var F=p.block_type,N=u.sb_sample[L][H],U=u.sb_sample[L][1-H];if(p.mixed_block_flag!=0&&T<2&&(F=0),u.amp_filter[T]<1e-12)P.fill(l0,b+0,b+18,0);else{if(u.amp_filter[T]<1)for(var C=0;C<18;C++)U[C][J[T]]*=u.amp_filter[T];if(F==W.SHORT_TYPE){for(var C=-z/4;C<0;C++){var B=x[W.SHORT_TYPE][C+3];l0[b+C*3+9]=N[9+C][J[T]]*B-N[8-C][J[T]],l0[b+C*3+18]=N[14-C][J[T]]*B+N[15+C][J[T]],l0[b+C*3+10]=N[15+C][J[T]]*B-N[14-C][J[T]],l0[b+C*3+19]=U[2-C][J[T]]*B+U[3+C][J[T]],l0[b+C*3+11]=U[3+C][J[T]]*B-U[2-C][J[T]],l0[b+C*3+20]=U[8-C][J[T]]*B+U[9+C][J[T]]}c(l0,b)}else{for(var n=n0(18),C=-h0/4;C<0;C++){var s,t;s=x[F][C+27]*U[C+9][J[T]]+x[F][C+36]*U[8-C][J[T]],t=x[F][C+9]*N[C+9][J[T]]-x[F][C+18]*N[8-C][J[T]],n[C+9]=s-t*f[3+C+9],n[C+18]=s*f[3+C+9]+t}o(l0,b,n)}}if(F!=W.SHORT_TYPE&&T!=0)for(var C=7;C>=0;--C){var i,m;i=l0[b+C]*s0[20+C]+l0[b+-1-C]*Z[28+C],m=l0[b+C]*Z[28+C]-l0[b+-1-C]*s0[20+C],l0[b+-1-C]=i,l0[b+C]=m}}}if(l=e,R=286,u.mode_gr==1)for(var D=0;D<18;D++)M.arraycopy(u.sb_sample[L][1][D],0,u.sb_sample[L][0][D],0,32)}}}return ve=j,ve}var he,Ue;function Qe(){if(Ue)return he;Ue=1;var y=t1(),M=Z0,V=M.System,P=M.new_float,n0=M.new_float_n;function W(){this.l=P(y.SBMAX_l),this.s=n0([y.SBMAX_s,3]);var j=this;this.assign=function(Y){V.arraycopy(Y.l,0,j.l,0,y.SBMAX_l);for(var z=0;z<y.SBMAX_s;z++)for(var h0=0;h0<3;h0++)j.s[z][h0]=Y.s[z][h0]}}return he=W,he}var ue,We;function Ga(){if(We)return ue;We=1;var y=Qe();function M(){this.thm=new y,this.en=new y}return ue=M,ue}function b1(y){var M=y;this.ordinal=function(){return M}}b1.STEREO=new b1(0),b1.JOINT_STEREO=new b1(1),b1.DUAL_CHANNEL=new b1(2),b1.MONO=new b1(3),b1.NOT_SET=new b1(4);var P1=b1,fe,je;function t1(){if(je)return fe;je=1;var y=Z0,M=y.System,V=y.VbrMode,P=y.new_array_n,n0=y.new_float,W=y.new_float_n,j=y.new_int,Y=y.assert;z.ENCDELAY=576,z.POSTDELAY=1152,z.MDCTDELAY=48,z.FFTOFFSET=224+z.MDCTDELAY,z.DECDELAY=528,z.SBLIMIT=32,z.CBANDS=64,z.SBPSY_l=21,z.SBPSY_s=12,z.SBMAX_l=22,z.SBMAX_s=13,z.PSFB21=6,z.PSFB12=6,z.BLKSIZE=1024,z.HBLKSIZE=z.BLKSIZE/2+1,z.BLKSIZE_s=256,z.HBLKSIZE_s=z.BLKSIZE_s/2+1,z.NORM_TYPE=0,z.START_TYPE=1,z.SHORT_TYPE=2,z.STOP_TYPE=3,z.MPG_MD_LR_LR=0,z.MPG_MD_LR_I=1,z.MPG_MD_MS_LR=2,z.MPG_MD_MS_I=3,z.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function z(){var h0=Da(),x=Ga(),f=P1,O=z.FFTOFFSET,s0=z.MPG_MD_MS_LR,Z=null;this.psy=null;var J=null,K=null,c=null;this.setModules=function(l,R,L,H){Z=l,this.psy=R,J=R,K=H,c=L};var o=new h0;function u(l){var R,L;if(l.ATH.useAdjust==0){l.ATH.adjust=1;return}if(L=l.loudness_sq[0][0],R=l.loudness_sq[1][0],l.channels_out==2?(L+=l.loudness_sq[0][1],R+=l.loudness_sq[1][1]):(L+=L,R+=R),l.mode_gr==2&&(L=Math.max(L,R)),L*=.5,L*=l.ATH.aaSensitivityP,L>.03125)l.ATH.adjust>=1?l.ATH.adjust=1:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=1;else{var H=31.98*L+625e-6;l.ATH.adjust>=H?(l.ATH.adjust*=H*.075+.925,l.ATH.adjust<H&&(l.ATH.adjust=H)):l.ATH.adjustLimit>=H?l.ATH.adjust=H:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=H}}function S(l){var R,L;for(Y(0<=l.bitrate_index&&l.bitrate_index<16),Y(0<=l.mode_ext&&l.mode_ext<4),l.bitrate_stereoMode_Hist[l.bitrate_index][4]++,l.bitrate_stereoMode_Hist[15][4]++,l.channels_out==2&&(l.bitrate_stereoMode_Hist[l.bitrate_index][l.mode_ext]++,l.bitrate_stereoMode_Hist[15][l.mode_ext]++),R=0;R<l.mode_gr;++R)for(L=0;L<l.channels_out;++L){var H=l.l3_side.tt[R][L].block_type|0;l.l3_side.tt[R][L].mixed_block_flag!=0&&(H=4),l.bitrate_blockType_Hist[l.bitrate_index][H]++,l.bitrate_blockType_Hist[l.bitrate_index][5]++,l.bitrate_blockType_Hist[15][H]++,l.bitrate_blockType_Hist[15][5]++}}function e(l,R){var L=l.internal_flags,H,T;if(L.lame_encode_frame_init==0){var p,l0,b=n0(2014),a=n0(286+1152+576);for(L.lame_encode_frame_init=1,p=0,l0=0;p<286+576*(1+L.mode_gr);++p)p<576*L.mode_gr?(b[p]=0,L.channels_out==2&&(a[p]=0)):(b[p]=R[0][l0],L.channels_out==2&&(a[p]=R[1][l0]),++l0);for(T=0;T<L.mode_gr;T++)for(H=0;H<L.channels_out;H++)L.l3_side.tt[T][H].block_type=z.SHORT_TYPE;o.mdct_sub48(L,b,a),Y(576>=z.FFTOFFSET),Y(L.mf_size>=z.BLKSIZE+l.framesize-z.FFTOFFSET),Y(L.mf_size>=512+l.framesize-32)}}this.lame_encode_mp3_frame=function(l,R,L,H,T,p){var l0,b=P([2,2]);b[0][0]=new x,b[0][1]=new x,b[1][0]=new x,b[1][1]=new x;var a=P([2,2]);a[0][0]=new x,a[0][1]=new x,a[1][0]=new x,a[1][1]=new x;var A,C=[null,null],F=l.internal_flags,N=W([2,4]),U=[.5,.5],B=[[0,0],[0,0]],n=[[0,0],[0,0]],s,t,i;if(C[0]=R,C[1]=L,F.lame_encode_frame_init==0&&e(l,C),F.padding=0,(F.slot_lag-=F.frac_SpF)<0&&(F.slot_lag+=l.out_samplerate,F.padding=1),F.psymodel!=0){var m,D=[null,null],e0=0,w=j(2);for(i=0;i<F.mode_gr;i++){for(t=0;t<F.channels_out;t++)D[t]=C[t],e0=576+i*576-z.FFTOFFSET;if(l.VBR==V.vbr_mtrh||l.VBR==V.vbr_mt?m=J.L3psycho_anal_vbr(l,D,e0,i,b,a,B[i],n[i],N[i],w):m=J.L3psycho_anal_ns(l,D,e0,i,b,a,B[i],n[i],N[i],w),m!=0)return-4;for(l.mode==f.JOINT_STEREO&&(U[i]=N[i][2]+N[i][3],U[i]>0&&(U[i]=N[i][3]/U[i])),t=0;t<F.channels_out;t++){var G=F.l3_side.tt[i][t];G.block_type=w[t],G.mixed_block_flag=0}}}else for(i=0;i<F.mode_gr;i++)for(t=0;t<F.channels_out;t++)F.l3_side.tt[i][t].block_type=z.NORM_TYPE,F.l3_side.tt[i][t].mixed_block_flag=0,n[i][t]=B[i][t]=700;if(u(F),o.mdct_sub48(F,C[0],C[1]),F.mode_ext=z.MPG_MD_LR_LR,l.force_ms)F.mode_ext=z.MPG_MD_MS_LR;else if(l.mode==f.JOINT_STEREO){var i0=0,f0=0;for(i=0;i<F.mode_gr;i++)for(t=0;t<F.channels_out;t++)i0+=n[i][t],f0+=B[i][t];if(i0<=1*f0){var S0=F.l3_side.tt[0],R0=F.l3_side.tt[F.mode_gr-1];S0[0].block_type==S0[1].block_type&&R0[0].block_type==R0[1].block_type&&(F.mode_ext=z.MPG_MD_MS_LR)}}if(F.mode_ext==s0?(A=a,s=n):(A=b,s=B),l.analysis&&F.pinfo!=null)for(i=0;i<F.mode_gr;i++)for(t=0;t<F.channels_out;t++)F.pinfo.ms_ratio[i]=F.ms_ratio[i],F.pinfo.ms_ener_ratio[i]=U[i],F.pinfo.blocktype[i][t]=F.l3_side.tt[i][t].block_type,F.pinfo.pe[i][t]=s[i][t],M.arraycopy(F.l3_side.tt[i][t].xr,0,F.pinfo.xr[i][t],0,576),F.mode_ext==s0&&(F.pinfo.ers[i][t]=F.pinfo.ers[i][t+2],M.arraycopy(F.pinfo.energy[i][t+2],0,F.pinfo.energy[i][t],0,F.pinfo.energy[i][t].length));if(l.VBR==V.vbr_off||l.VBR==V.vbr_abr){var A0,x0;for(A0=0;A0<18;A0++)F.nsPsy.pefirbuf[A0]=F.nsPsy.pefirbuf[A0+1];for(x0=0,i=0;i<F.mode_gr;i++)for(t=0;t<F.channels_out;t++)x0+=s[i][t];for(F.nsPsy.pefirbuf[18]=x0,x0=F.nsPsy.pefirbuf[9],A0=0;A0<9;A0++)x0+=(F.nsPsy.pefirbuf[A0]+F.nsPsy.pefirbuf[18-A0])*z.fircoef[A0];for(x0=670*5*F.mode_gr*F.channels_out/x0,i=0;i<F.mode_gr;i++)for(t=0;t<F.channels_out;t++)s[i][t]*=x0}if(F.iteration_loop.iteration_loop(l,s,U,A),Z.format_bitstream(l),l0=Z.copy_buffer(F,H,T,p,1),l.bWriteVbrTag&&K.addVbrFrame(l),l.analysis&&F.pinfo!=null){for(t=0;t<F.channels_out;t++){var w0;for(w0=0;w0<O;w0++)F.pinfo.pcmdata[t][w0]=F.pinfo.pcmdata[t][w0+l.framesize];for(w0=O;w0<1600;w0++)F.pinfo.pcmdata[t][w0]=C[t][w0-O]}c.set_frame_pinfo(l,A)}return S(F),l0}}return fe=z,fe}var ze=Z0,Je=ze.Util,ge=ze.new_float,z0=t1();function Pa(){var y=ge(z0.BLKSIZE),M=ge(z0.BLKSIZE_s/2),V=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function P(W,j,Y){var z=0,h0,x,f;Y<<=1;var O=j+Y;h0=4;do{var s0,Z,J,K,c,o,u;u=h0>>1,K=h0,c=h0<<1,o=c+K,h0=c<<1,x=j,f=x+u;do{var S,e,l,R;e=W[x+0]-W[x+K],S=W[x+0]+W[x+K],R=W[x+c]-W[x+o],l=W[x+c]+W[x+o],W[x+c]=S-l,W[x+0]=S+l,W[x+o]=e-R,W[x+K]=e+R,e=W[f+0]-W[f+K],S=W[f+0]+W[f+K],R=Je.SQRT2*W[f+o],l=Je.SQRT2*W[f+c],W[f+c]=S-l,W[f+0]=S+l,W[f+o]=e-R,W[f+K]=e+R,f+=h0,x+=h0}while(x<O);for(Z=V[z+0],s0=V[z+1],J=1;J<u;J++){var L,H;L=1-2*s0*s0,H=2*s0*Z,x=j+J,f=j+K-J;do{var T,p,l0,S,e,b,l,a,R,A;p=H*W[x+K]-L*W[f+K],T=L*W[x+K]+H*W[f+K],e=W[x+0]-T,S=W[x+0]+T,b=W[f+0]-p,l0=W[f+0]+p,p=H*W[x+o]-L*W[f+o],T=L*W[x+o]+H*W[f+o],R=W[x+c]-T,l=W[x+c]+T,A=W[f+c]-p,a=W[f+c]+p,p=s0*l-Z*A,T=Z*l+s0*A,W[x+c]=S-T,W[x+0]=S+T,W[f+o]=b-p,W[f+K]=b+p,p=Z*a-s0*R,T=s0*a+Z*R,W[f+c]=l0-T,W[f+0]=l0+T,W[x+o]=e-p,W[x+K]=e+p,f+=h0,x+=h0}while(x<O);L=Z,Z=L*V[z+0]-s0*V[z+1],s0=L*V[z+1]+s0*V[z+0]}z+=2}while(h0<Y)}var n0=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(W,j,Y,z,h0){for(var x=0;x<3;x++){var f=z0.BLKSIZE_s/2,O=65535&576/3*(x+1),s0=z0.BLKSIZE_s/8-1;do{var Z,J,K,c,o,u=n0[s0<<2]&255;Z=M[u]*z[Y][h0+u+O],o=M[127-u]*z[Y][h0+u+O+128],J=Z-o,Z=Z+o,K=M[u+64]*z[Y][h0+u+O+64],o=M[63-u]*z[Y][h0+u+O+192],c=K-o,K=K+o,f-=4,j[x][f+0]=Z+K,j[x][f+2]=Z-K,j[x][f+1]=J+c,j[x][f+3]=J-c,Z=M[u+1]*z[Y][h0+u+O+1],o=M[126-u]*z[Y][h0+u+O+129],J=Z-o,Z=Z+o,K=M[u+65]*z[Y][h0+u+O+65],o=M[62-u]*z[Y][h0+u+O+193],c=K-o,K=K+o,j[x][f+z0.BLKSIZE_s/2+0]=Z+K,j[x][f+z0.BLKSIZE_s/2+2]=Z-K,j[x][f+z0.BLKSIZE_s/2+1]=J+c,j[x][f+z0.BLKSIZE_s/2+3]=J-c}while(--s0>=0);P(j[x],f,z0.BLKSIZE_s/2)}},this.fft_long=function(W,j,Y,z,h0){var x=z0.BLKSIZE/8-1,f=z0.BLKSIZE/2;do{var O,s0,Z,J,K,c=n0[x]&255;O=y[c]*z[Y][h0+c],K=y[c+512]*z[Y][h0+c+512],s0=O-K,O=O+K,Z=y[c+256]*z[Y][h0+c+256],K=y[c+768]*z[Y][h0+c+768],J=Z-K,Z=Z+K,f-=4,j[f+0]=O+Z,j[f+2]=O-Z,j[f+1]=s0+J,j[f+3]=s0-J,O=y[c+1]*z[Y][h0+c+1],K=y[c+513]*z[Y][h0+c+513],s0=O-K,O=O+K,Z=y[c+257]*z[Y][h0+c+257],K=y[c+769]*z[Y][h0+c+769],J=Z-K,Z=Z+K,j[f+z0.BLKSIZE/2+0]=O+Z,j[f+z0.BLKSIZE/2+2]=O-Z,j[f+z0.BLKSIZE/2+1]=s0+J,j[f+z0.BLKSIZE/2+3]=s0-J}while(--x>=0);P(j,f,z0.BLKSIZE/2)},this.init_fft=function(W){for(var j=0;j<z0.BLKSIZE;j++)y[j]=.42-.5*Math.cos(2*Math.PI*(j+.5)/z0.BLKSIZE)+.08*Math.cos(4*Math.PI*(j+.5)/z0.BLKSIZE);for(var j=0;j<z0.BLKSIZE_s/2;j++)M[j]=.5*(1-Math.cos(2*Math.PI*(j+.5)/z0.BLKSIZE_s))}}var $a=Pa,B1=Z0,O1=B1.VbrMode,ea=B1.Float,H1=B1.ShortBlock,s1=B1.Util,Za=B1.Arrays,g0=B1.new_float,f1=B1.new_float_n,w1=B1.new_int,H0=B1.assert,Ka=$a,r0=t1();function Ua(){var y=P1,M=new Ka,V=2.302585092994046,P=2,n0=16,W=2,j=16,Y=.34,z=1/(14752*14752)/(r0.BLKSIZE/2),h0=.01,x=.8,f=.6,O=.3,s0=3.5,Z=21,J=.2302585093;function K(v){return v}function c(v,h){for(var E=0,I=0;I<r0.BLKSIZE/2;++I)E+=v[I]*h.ATH.eql_w[I];return E*=z,E}function o(v,h,E,I,q,d,k,$,X,a0,Q){var t0=v.internal_flags;if(X<2)M.fft_long(t0,I[q],X,a0,Q),M.fft_short(t0,d[k],X,a0,Q);else if(X==2){for(var m0=r0.BLKSIZE-1;m0>=0;--m0){var C0=I[q+0][m0],_0=I[q+1][m0];I[q+0][m0]=(C0+_0)*s1.SQRT2*.5,I[q+1][m0]=(C0-_0)*s1.SQRT2*.5}for(var p0=2;p0>=0;--p0)for(var m0=r0.BLKSIZE_s-1;m0>=0;--m0){var C0=d[k+0][p0][m0],_0=d[k+1][p0][m0];d[k+0][p0][m0]=(C0+_0)*s1.SQRT2*.5,d[k+1][p0][m0]=(C0-_0)*s1.SQRT2*.5}}h[0]=I[q+0][0],h[0]*=h[0];for(var m0=r0.BLKSIZE/2-1;m0>=0;--m0){var g=I[q+0][r0.BLKSIZE/2-m0],M0=I[q+0][r0.BLKSIZE/2+m0];h[r0.BLKSIZE/2-m0]=(g*g+M0*M0)*.5}for(var p0=2;p0>=0;--p0){E[p0][0]=d[k+0][p0][0],E[p0][0]*=E[p0][0];for(var m0=r0.BLKSIZE_s/2-1;m0>=0;--m0){var g=d[k+0][p0][r0.BLKSIZE_s/2-m0],M0=d[k+0][p0][r0.BLKSIZE_s/2+m0];E[p0][r0.BLKSIZE_s/2-m0]=(g*g+M0*M0)*.5}}{for(var k0=0,m0=11;m0<r0.HBLKSIZE;m0++)k0+=h[m0];t0.tot_ener[X]=k0}if(v.analysis){for(var m0=0;m0<r0.HBLKSIZE;m0++)t0.pinfo.energy[$][X][m0]=t0.pinfo.energy_save[X][m0],t0.pinfo.energy_save[X][m0]=h[m0];t0.pinfo.pe[$][X]=t0.pe[X]}v.athaa_loudapprox==2&&X<2&&(t0.loudness_sq[$][X]=t0.loudness_sq_save[X],t0.loudness_sq_save[X]=c(h,t0))}var u=8,S=23,e=15,l,R,L,H=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function T(){l=Math.pow(10,(u+1)/16),R=Math.pow(10,(S+1)/16),L=Math.pow(10,e/10)}var p=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],l0=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],b=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function a(v,h,E,I,q,d){var k;if(h>v)if(h<v*R)k=h/v;else return v+h;else{if(v>=h*R)return v+h;k=v/h}if(v+=h,I+3<=3+3){if(k>=l)return v;var $=0|s1.FAST_LOG10_X(k,16);return v*l0[$]}var $=0|s1.FAST_LOG10_X(k,16);if(d!=0?h=q.ATH.cb_s[E]*q.ATH.adjust:h=q.ATH.cb_l[E]*q.ATH.adjust,v<L*h){if(v>h){var X,a0;return X=1,$<=13&&(X=b[$]),a0=s1.FAST_LOG10_X(v/h,10/15),v*((p[$]-X)*a0+X)}return $>13?v:v*b[$]}return v*p[$]}var A=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function C(v,h,E){var I;if(v<0&&(v=0),h<0&&(h=0),v<=0)return h;if(h<=0)return v;if(h>v?I=h/v:I=v/h,-2<=E&&E<=2){if(I>=l)return v+h;var q=0|s1.FAST_LOG10_X(I,16);return(v+h)*A[q]}return I<R?v+h:(v<h&&(v=h),v)}function F(v,h){var E=v.internal_flags;if(E.channels_out>1){for(var I=0;I<r0.SBMAX_l;I++){var q=E.thm[0].l[I],d=E.thm[1].l[I];E.thm[0].l[I]+=d*h,E.thm[1].l[I]+=q*h}for(var I=0;I<r0.SBMAX_s;I++)for(var k=0;k<3;k++){var q=E.thm[0].s[I][k],d=E.thm[1].s[I][k];E.thm[0].s[I][k]+=d*h,E.thm[1].s[I][k]+=q*h}}}function N(v){for(var h=0;h<r0.SBMAX_l;h++)if(!(v.thm[0].l[h]>1.58*v.thm[1].l[h]||v.thm[1].l[h]>1.58*v.thm[0].l[h])){var E=v.mld_l[h]*v.en[3].l[h],I=Math.max(v.thm[2].l[h],Math.min(v.thm[3].l[h],E));E=v.mld_l[h]*v.en[2].l[h];var q=Math.max(v.thm[3].l[h],Math.min(v.thm[2].l[h],E));v.thm[2].l[h]=I,v.thm[3].l[h]=q}for(var h=0;h<r0.SBMAX_s;h++)for(var d=0;d<3;d++)if(!(v.thm[0].s[h][d]>1.58*v.thm[1].s[h][d]||v.thm[1].s[h][d]>1.58*v.thm[0].s[h][d])){var E=v.mld_s[h]*v.en[3].s[h][d],I=Math.max(v.thm[2].s[h][d],Math.min(v.thm[3].s[h][d],E));E=v.mld_s[h]*v.en[2].s[h][d];var q=Math.max(v.thm[3].s[h][d],Math.min(v.thm[2].s[h][d],E));v.thm[2].s[h][d]=I,v.thm[3].s[h][d]=q}}function U(v,h,E){var I=h,q=Math.pow(10,E);h*=2,I*=2;for(var d=0;d<r0.SBMAX_l;d++){var k,$,X,a0;if(a0=v.ATH.cb_l[v.bm_l[d]]*q,k=Math.min(Math.max(v.thm[0].l[d],a0),Math.max(v.thm[1].l[d],a0)),$=Math.max(v.thm[2].l[d],a0),X=Math.max(v.thm[3].l[d],a0),k*h<$+X){var Q=k*I/($+X);$*=Q,X*=Q}v.thm[2].l[d]=Math.min($,v.thm[2].l[d]),v.thm[3].l[d]=Math.min(X,v.thm[3].l[d])}q*=r0.BLKSIZE_s/r0.BLKSIZE;for(var d=0;d<r0.SBMAX_s;d++)for(var t0=0;t0<3;t0++){var k,$,X,a0;if(a0=v.ATH.cb_s[v.bm_s[d]]*q,k=Math.min(Math.max(v.thm[0].s[d][t0],a0),Math.max(v.thm[1].s[d][t0],a0)),$=Math.max(v.thm[2].s[d][t0],a0),X=Math.max(v.thm[3].s[d][t0],a0),k*h<$+X){var Q=k*h/($+X);$*=Q,X*=Q}v.thm[2].s[d][t0]=Math.min(v.thm[2].s[d][t0],$),v.thm[3].s[d][t0]=Math.min(v.thm[3].s[d][t0],X)}}function B(v,h,E,I,q){var d,k,$=0,X=0;for(d=k=0;d<r0.SBMAX_s;++k,++d){for(var a0=v.bo_s[d],Q=v.npart_s,t0=a0<Q?a0:Q;k<t0;)H0(h[k]>=0),H0(E[k]>=0),$+=h[k],X+=E[k],k++;if(v.en[I].s[d][q]=$,v.thm[I].s[d][q]=X,k>=Q){++d;break}H0(h[k]>=0),H0(E[k]>=0);{var m0=v.PSY.bo_s_weight[d],C0=1-m0;$=m0*h[k],X=m0*E[k],v.en[I].s[d][q]+=$,v.thm[I].s[d][q]+=X,$=C0*h[k],X=C0*E[k]}}for(;d<r0.SBMAX_s;++d)v.en[I].s[d][q]=0,v.thm[I].s[d][q]=0}function n(v,h,E,I){var q,d,k=0,$=0;for(q=d=0;q<r0.SBMAX_l;++d,++q){for(var X=v.bo_l[q],a0=v.npart_l,Q=X<a0?X:a0;d<Q;)H0(h[d]>=0),H0(E[d]>=0),k+=h[d],$+=E[d],d++;if(v.en[I].l[q]=k,v.thm[I].l[q]=$,d>=a0){++q;break}H0(h[d]>=0),H0(E[d]>=0);{var t0=v.PSY.bo_l_weight[q],m0=1-t0;k=t0*h[d],$=t0*E[d],v.en[I].l[q]+=k,v.thm[I].l[q]+=$,k=m0*h[d],$=m0*E[d]}}for(;q<r0.SBMAX_l;++q)v.en[I].l[q]=0,v.thm[I].l[q]=0}function s(v,h,E,I,q,d){var k=v.internal_flags,$,X;for(X=$=0;X<k.npart_s;++X){for(var a0=0,Q=k.numlines_s[X],t0=0;t0<Q;++t0,++$){var m0=h[d][$];a0+=m0}E[X]=a0}for(H0(X==k.npart_s),$=X=0;X<k.npart_s;X++){var C0=k.s3ind_s[X][0],_0=k.s3_ss[$++]*E[C0];for(++C0;C0<=k.s3ind_s[X][1];)_0+=k.s3_ss[$]*E[C0],++$,++C0;{var p0=W*k.nb_s1[q][X];I[X]=Math.min(_0,p0)}if(k.blocktype_old[q&1]==r0.SHORT_TYPE){var p0=j*k.nb_s2[q][X],g=I[X];I[X]=Math.min(p0,g)}k.nb_s2[q][X]=k.nb_s1[q][X],k.nb_s1[q][X]=_0,H0(I[X]>=0)}for(;X<=r0.CBANDS;++X)E[X]=0,I[X]=0}function t(v,h,E,I){var q=v.internal_flags;v.short_blocks==H1.short_block_coupled&&!(h[0]!=0&&h[1]!=0)&&(h[0]=h[1]=0);for(var d=0;d<q.channels_out;d++)I[d]=r0.NORM_TYPE,v.short_blocks==H1.short_block_dispensed&&(h[d]=1),v.short_blocks==H1.short_block_forced&&(h[d]=0),h[d]!=0?(H0(q.blocktype_old[d]!=r0.START_TYPE),q.blocktype_old[d]==r0.SHORT_TYPE&&(I[d]=r0.STOP_TYPE)):(I[d]=r0.SHORT_TYPE,q.blocktype_old[d]==r0.NORM_TYPE&&(q.blocktype_old[d]=r0.START_TYPE),q.blocktype_old[d]==r0.STOP_TYPE&&(q.blocktype_old[d]=r0.SHORT_TYPE)),E[d]=q.blocktype_old[d],q.blocktype_old[d]=I[d]}function i(v,h,E){return E>=1?v:E<=0?h:h>0?Math.pow(v/h,E)*h:0}var m=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function D(v,h){for(var E=309.07,I=0;I<r0.SBMAX_s-1;I++)for(var q=0;q<3;q++){var d=v.thm.s[I][q];if(d>0){var k=d*h,$=v.en.s[I][q];$>k&&($>k*1e10?E+=m[I]*(10*V):E+=m[I]*s1.FAST_LOG10($/k))}}return E}var e0=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function w(v,h){for(var E=281.0575,I=0;I<r0.SBMAX_l-1;I++){var q=v.thm.l[I];if(q>0){var d=q*h,k=v.en.l[I];k>d&&(k>d*1e10?E+=e0[I]*(10*V):E+=e0[I]*s1.FAST_LOG10(k/d))}}return E}function G(v,h,E,I,q){var d,k;for(d=k=0;d<v.npart_l;++d){var $=0,X=0,a0;for(a0=0;a0<v.numlines_l[d];++a0,++k){var Q=h[k];$+=Q,X<Q&&(X=Q)}E[d]=$,I[d]=X,q[d]=$*v.rnumlines_l[d],H0(v.rnumlines_l[d]>=0),H0(E[d]>=0),H0(I[d]>=0),H0(q[d]>=0)}}function i0(v,h,E,I){var q=H.length-1,d=0,k=E[d]+E[d+1];if(k>0){var $=h[d];$<h[d+1]&&($=h[d+1]),H0(v.numlines_l[d]+v.numlines_l[d+1]-1>0),k=20*($*2-k)/(k*(v.numlines_l[d]+v.numlines_l[d+1]-1));var X=0|k;X>q&&(X=q),I[d]=X}else I[d]=0;for(d=1;d<v.npart_l-1;d++)if(k=E[d-1]+E[d]+E[d+1],k>0){var $=h[d-1];$<h[d]&&($=h[d]),$<h[d+1]&&($=h[d+1]),H0(v.numlines_l[d-1]+v.numlines_l[d]+v.numlines_l[d+1]-1>0),k=20*($*3-k)/(k*(v.numlines_l[d-1]+v.numlines_l[d]+v.numlines_l[d+1]-1));var X=0|k;X>q&&(X=q),I[d]=X}else I[d]=0;if(H0(d==v.npart_l-1),k=E[d-1]+E[d],k>0){var $=h[d-1];$<h[d]&&($=h[d]),H0(v.numlines_l[d-1]+v.numlines_l[d]-1>0),k=20*($*2-k)/(k*(v.numlines_l[d-1]+v.numlines_l[d]-1));var X=0|k;X>q&&(X=q),I[d]=X}else I[d]=0;H0(d==v.npart_l-1)}var f0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(v,h,E,I,q,d,k,$,X,a0){var Q=v.internal_flags,t0=f1([2,r0.BLKSIZE]),m0=f1([2,3,r0.BLKSIZE_s]),C0=g0(r0.CBANDS+1),_0=g0(r0.CBANDS+1),p0=g0(r0.CBANDS+2),g=w1(2),M0=w1(2),k0,o0,B0,v0,L0,$0,b0,O0,X0=f1([2,576]),K0,v1=w1(r0.CBANDS+2),J0=w1(r0.CBANDS+2);for(Za.fill(J0,0),k0=Q.channels_out,v.mode==y.JOINT_STEREO&&(k0=4),v.VBR==O1.vbr_off?K0=Q.ResvMax==0?0:Q.ResvSize/Q.ResvMax*.5:v.VBR==O1.vbr_rh||v.VBR==O1.vbr_mtrh||v.VBR==O1.vbr_mt?K0=.6:K0=1,o0=0;o0<Q.channels_out;o0++){var U0=h[o0],l1=E+576-350-Z+192;for(v0=0;v0<576;v0++){var h1,u1;for(h1=U0[l1+v0+10],u1=0,L0=0;L0<(Z-1)/2-1;L0+=2)h1+=f0[L0]*(U0[l1+v0+L0]+U0[l1+v0+Z-L0]),u1+=f0[L0+1]*(U0[l1+v0+L0+1]+U0[l1+v0+Z-L0-1]);X0[o0][v0]=h1+u1}q[I][o0].en.assign(Q.en[o0]),q[I][o0].thm.assign(Q.thm[o0]),k0>2&&(d[I][o0].en.assign(Q.en[o0+2]),d[I][o0].thm.assign(Q.thm[o0+2]))}for(o0=0;o0<k0;o0++){var x1,A1,r1=g0(12),R1=[0,0,0,0],D1=g0(12),pe=1,Na,Va=g0(r0.CBANDS),Oa=g0(r0.CBANDS),Q0=[0,0,0,0],Ha=g0(r0.HBLKSIZE),Fa=f1([3,r0.HBLKSIZE_s]);for(H0(Q.npart_s<=r0.CBANDS),H0(Q.npart_l<=r0.CBANDS),v0=0;v0<3;v0++)r1[v0]=Q.nsPsy.last_en_subshort[o0][v0+6],H0(Q.nsPsy.last_en_subshort[o0][v0+4]>0),D1[v0]=r1[v0]/Q.nsPsy.last_en_subshort[o0][v0+4],R1[0]+=r1[v0];if(o0==2)for(v0=0;v0<576;v0++){var Ce,Le;Ce=X0[0][v0],Le=X0[1][v0],X0[0][v0]=Ce+Le,X0[1][v0]=Ce-Le}{var ka=X0[o0&1],Q1=0;for(v0=0;v0<9;v0++){for(var xr=Q1+64,a1=1;Q1<xr;Q1++)a1<Math.abs(ka[Q1])&&(a1=Math.abs(ka[Q1]));Q.nsPsy.last_en_subshort[o0][v0]=r1[v0+3]=a1,R1[1+v0/3]+=a1,a1>r1[v0+3-2]?(H0(r1[v0+3-2]>0),a1=a1/r1[v0+3-2]):r1[v0+3-2]>a1*10?a1=r1[v0+3-2]/(a1*10):a1=0,D1[v0+3]=a1}}if(v.analysis){var Ne=D1[0];for(v0=1;v0<12;v0++)Ne<D1[v0]&&(Ne=D1[v0]);Q.pinfo.ers[I][o0]=Q.pinfo.ers_save[o0],Q.pinfo.ers_save[o0]=Ne}for(Na=o0==3?Q.nsPsy.attackthre_s:Q.nsPsy.attackthre,v0=0;v0<12;v0++)Q0[v0/3]==0&&D1[v0]>Na&&(Q0[v0/3]=v0%3+1);for(v0=1;v0<4;v0++){var Ve;R1[v0-1]>R1[v0]?(H0(R1[v0]>0),Ve=R1[v0-1]/R1[v0]):(H0(R1[v0-1]>0),Ve=R1[v0]/R1[v0-1]),Ve<1.7&&(Q0[v0]=0,v0==1&&(Q0[0]=0))}for(Q0[0]!=0&&Q.nsPsy.lastAttacks[o0]!=0&&(Q0[0]=0),(Q.nsPsy.lastAttacks[o0]==3||Q0[0]+Q0[1]+Q0[2]+Q0[3]!=0)&&(pe=0,Q0[1]!=0&&Q0[0]!=0&&(Q0[1]=0),Q0[2]!=0&&Q0[1]!=0&&(Q0[2]=0),Q0[3]!=0&&Q0[2]!=0&&(Q0[3]=0)),o0<2?M0[o0]=pe:pe==0&&(M0[0]=M0[1]=0),X[o0]=Q.tot_ener[o0],A1=m0,x1=t0,o(v,Ha,Fa,x1,o0&1,A1,o0&1,I,o0,h,E),G(Q,Ha,C0,Va,Oa),i0(Q,Va,Oa,v1),O0=0;O0<3;O0++){var Oe,_1;for(s(v,Fa,_0,p0,o0,O0),B(Q,_0,p0,o0,O0),b0=0;b0<r0.SBMAX_s;b0++){if(_1=Q.thm[o0].s[b0][O0],_1*=x,Q0[O0]>=2||Q0[O0+1]==1){var W1=O0!=0?O0-1:2,a1=i(Q.thm[o0].s[b0][W1],_1,f*K0);_1=Math.min(_1,a1)}if(Q0[O0]==1){var W1=O0!=0?O0-1:2,a1=i(Q.thm[o0].s[b0][W1],_1,O*K0);_1=Math.min(_1,a1)}else if(O0!=0&&Q0[O0-1]==3||O0==0&&Q.nsPsy.lastAttacks[o0]==3){var W1=O0!=2?O0+1:0,a1=i(Q.thm[o0].s[b0][W1],_1,O*K0);_1=Math.min(_1,a1)}Oe=r1[O0*3+3]+r1[O0*3+4]+r1[O0*3+5],r1[O0*3+5]*6<Oe&&(_1*=.5,r1[O0*3+4]*6<Oe&&(_1*=.5)),Q.thm[o0].s[b0][O0]=_1}}for(Q.nsPsy.lastAttacks[o0]=Q0[2],$0=0,B0=0;B0<Q.npart_l;B0++){for(var N1=Q.s3ind[B0][0],He=C0[N1]*H[v1[N1]],V1=Q.s3_ll[$0++]*He;++N1<=Q.s3ind[B0][1];)He=C0[N1]*H[v1[N1]],V1=a(V1,Q.s3_ll[$0++]*He,N1,N1-B0,Q,0);V1*=.158489319246111,Q.blocktype_old[o0&1]==r0.SHORT_TYPE?p0[B0]=V1:p0[B0]=i(Math.min(V1,Math.min(P*Q.nb_1[o0][B0],n0*Q.nb_2[o0][B0])),V1,K0),Q.nb_2[o0][B0]=Q.nb_1[o0][B0],Q.nb_1[o0][B0]=V1}for(;B0<=r0.CBANDS;++B0)C0[B0]=0,p0[B0]=0;n(Q,C0,p0,o0)}if((v.mode==y.STEREO||v.mode==y.JOINT_STEREO)&&v.interChRatio>0&&F(v,v.interChRatio),v.mode==y.JOINT_STEREO){var Fe;N(Q),Fe=v.msfix,Math.abs(Fe)>0&&U(Q,Fe,v.ATHlower*Q.ATH.adjust)}for(t(v,M0,a0,g),o0=0;o0<k0;o0++){var j1,z1=0,le,_e;o0>1?(j1=$,z1=-2,le=r0.NORM_TYPE,(a0[0]==r0.SHORT_TYPE||a0[1]==r0.SHORT_TYPE)&&(le=r0.SHORT_TYPE),_e=d[I][o0-2]):(j1=k,z1=0,le=a0[o0],_e=q[I][o0]),le==r0.SHORT_TYPE?j1[z1+o0]=D(_e,Q.masking_lower):j1[z1+o0]=w(_e,Q.masking_lower),v.analysis&&(Q.pinfo.pe[I][o0]=j1[z1+o0])}return 0};function S0(v,h,E,I,q,d,k,$){var X=v.internal_flags;if(I<2)M.fft_long(X,k[$],I,h,E);else if(I==2)for(var a0=r0.BLKSIZE-1;a0>=0;--a0){var Q=k[$+0][a0],t0=k[$+1][a0];k[$+0][a0]=(Q+t0)*s1.SQRT2*.5,k[$+1][a0]=(Q-t0)*s1.SQRT2*.5}d[0]=k[$+0][0],d[0]*=d[0];for(var a0=r0.BLKSIZE/2-1;a0>=0;--a0){var m0=k[$+0][r0.BLKSIZE/2-a0],C0=k[$+0][r0.BLKSIZE/2+a0];d[r0.BLKSIZE/2-a0]=(m0*m0+C0*C0)*.5}{for(var _0=0,a0=11;a0<r0.HBLKSIZE;a0++)_0+=d[a0];X.tot_ener[I]=_0}if(v.analysis){for(var a0=0;a0<r0.HBLKSIZE;a0++)X.pinfo.energy[q][I][a0]=X.pinfo.energy_save[I][a0],X.pinfo.energy_save[I][a0]=d[a0];X.pinfo.pe[q][I]=X.pe[I]}}function R0(v,h,E,I,q,d,k,$){var X=v.internal_flags;if(q==0&&I<2&&M.fft_short(X,k[$],I,h,E),I==2)for(var a0=r0.BLKSIZE_s-1;a0>=0;--a0){var Q=k[$+0][q][a0],t0=k[$+1][q][a0];k[$+0][q][a0]=(Q+t0)*s1.SQRT2*.5,k[$+1][q][a0]=(Q-t0)*s1.SQRT2*.5}d[q][0]=k[$+0][q][0],d[q][0]*=d[q][0];for(var a0=r0.BLKSIZE_s/2-1;a0>=0;--a0){var m0=k[$+0][q][r0.BLKSIZE_s/2-a0],C0=k[$+0][q][r0.BLKSIZE_s/2+a0];d[q][r0.BLKSIZE_s/2-a0]=(m0*m0+C0*C0)*.5}}function A0(v,h,E,I){var q=v.internal_flags;v.athaa_loudapprox==2&&E<2&&(q.loudness_sq[h][E]=q.loudness_sq_save[E],q.loudness_sq_save[E]=c(I,q))}var x0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function w0(v,h,E,I,q,d,k,$,X,a0){for(var Q=f1([2,576]),t0=v.internal_flags,m0=t0.channels_out,C0=v.mode==y.JOINT_STEREO?4:m0,_0=0;_0<m0;_0++){firbuf=h[_0];for(var p0=E+576-350-Z+192,g=0;g<576;g++){var M0,k0;M0=firbuf[p0+g+10],k0=0;for(var o0=0;o0<(Z-1)/2-1;o0+=2)M0+=x0[o0]*(firbuf[p0+g+o0]+firbuf[p0+g+Z-o0]),k0+=x0[o0+1]*(firbuf[p0+g+o0+1]+firbuf[p0+g+Z-o0-1]);Q[_0][g]=M0+k0}q[I][_0].en.assign(t0.en[_0]),q[I][_0].thm.assign(t0.thm[_0]),C0>2&&(d[I][_0].en.assign(t0.en[_0+2]),d[I][_0].thm.assign(t0.thm[_0+2]))}for(var _0=0;_0<C0;_0++){var B0=g0(12),v0=g0(12),L0=[0,0,0,0],$0=Q[_0&1],b0=0,O0=_0==3?t0.nsPsy.attackthre_s:t0.nsPsy.attackthre,X0=1;if(_0==2)for(var g=0,o0=576;o0>0;++g,--o0){var K0=Q[0][g],v1=Q[1][g];Q[0][g]=K0+v1,Q[1][g]=K0-v1}for(var g=0;g<3;g++)v0[g]=t0.nsPsy.last_en_subshort[_0][g+6],H0(t0.nsPsy.last_en_subshort[_0][g+4]>0),B0[g]=v0[g]/t0.nsPsy.last_en_subshort[_0][g+4],L0[0]+=v0[g];for(var g=0;g<9;g++){for(var J0=b0+64,U0=1;b0<J0;b0++)U0<Math.abs($0[b0])&&(U0=Math.abs($0[b0]));t0.nsPsy.last_en_subshort[_0][g]=v0[g+3]=U0,L0[1+g/3]+=U0,U0>v0[g+3-2]?(H0(v0[g+3-2]>0),U0=U0/v0[g+3-2]):v0[g+3-2]>U0*10?U0=v0[g+3-2]/(U0*10):U0=0,B0[g+3]=U0}for(var g=0;g<3;++g){var l1=v0[g*3+3]+v0[g*3+4]+v0[g*3+5],h1=1;v0[g*3+5]*6<l1&&(h1*=.5,v0[g*3+4]*6<l1&&(h1*=.5)),$[_0][g]=h1}if(v.analysis){for(var u1=B0[0],g=1;g<12;g++)u1<B0[g]&&(u1=B0[g]);t0.pinfo.ers[I][_0]=t0.pinfo.ers_save[_0],t0.pinfo.ers_save[_0]=u1}for(var g=0;g<12;g++)X[_0][g/3]==0&&B0[g]>O0&&(X[_0][g/3]=g%3+1);for(var g=1;g<4;g++){var x1=L0[g-1],A1=L0[g],r1=Math.max(x1,A1);r1<4e4&&x1<1.7*A1&&A1<1.7*x1&&(g==1&&X[_0][0]<=X[_0][g]&&(X[_0][0]=0),X[_0][g]=0)}X[_0][0]<=t0.nsPsy.lastAttacks[_0]&&(X[_0][0]=0),(t0.nsPsy.lastAttacks[_0]==3||X[_0][0]+X[_0][1]+X[_0][2]+X[_0][3]!=0)&&(X0=0,X[_0][1]!=0&&X[_0][0]!=0&&(X[_0][1]=0),X[_0][2]!=0&&X[_0][1]!=0&&(X[_0][2]=0),X[_0][3]!=0&&X[_0][2]!=0&&(X[_0][3]=0)),_0<2?a0[_0]=X0:X0==0&&(a0[0]=a0[1]=0),k[_0]=t0.tot_ener[_0]}}function P0(v,h,E){if(E==0)for(var I=0;I<v.npart_s;I++)v.nb_s2[h][I]=v.nb_s1[h][I],v.nb_s1[h][I]=0}function c1(v,h){for(var E=0;E<v.npart_l;E++)v.nb_2[h][E]=v.nb_1[h][E],v.nb_1[h][E]=0}function r(v,h,E,I){var q=H.length-1,d=0,k=E[d]+E[d+1];if(k>0){var $=h[d];$<h[d+1]&&($=h[d+1]),H0(v.numlines_s[d]+v.numlines_s[d+1]-1>0),k=20*($*2-k)/(k*(v.numlines_s[d]+v.numlines_s[d+1]-1));var X=0|k;X>q&&(X=q),I[d]=X}else I[d]=0;for(d=1;d<v.npart_s-1;d++)if(k=E[d-1]+E[d]+E[d+1],H0(d+1<v.npart_s),k>0){var $=h[d-1];$<h[d]&&($=h[d]),$<h[d+1]&&($=h[d+1]),H0(v.numlines_s[d-1]+v.numlines_s[d]+v.numlines_s[d+1]-1>0),k=20*($*3-k)/(k*(v.numlines_s[d-1]+v.numlines_s[d]+v.numlines_s[d+1]-1));var X=0|k;X>q&&(X=q),I[d]=X}else I[d]=0;if(H0(d==v.npart_s-1),k=E[d-1]+E[d],k>0){var $=h[d-1];$<h[d]&&($=h[d]),H0(v.numlines_s[d-1]+v.numlines_s[d]-1>0),k=20*($*2-k)/(k*(v.numlines_s[d-1]+v.numlines_s[d]-1));var X=0|k;X>q&&(X=q),I[d]=X}else I[d]=0;H0(d==v.npart_s-1)}function _(v,h,E,I,q,d){var k=v.internal_flags,$=new float[r0.CBANDS],X=g0(r0.CBANDS),a0,Q,t0,m0=new int[r0.CBANDS];for(t0=Q=0;t0<k.npart_s;++t0){var C0=0,_0=0,p0=k.numlines_s[t0];for(a0=0;a0<p0;++a0,++Q){var g=h[d][Q];C0+=g,_0<g&&(_0=g)}E[t0]=C0,$[t0]=_0,X[t0]=C0/p0,H0(X[t0]>=0)}for(H0(t0==k.npart_s);t0<r0.CBANDS;++t0)$[t0]=0,X[t0]=0;for(r(k,$,X,m0),Q=t0=0;t0<k.npart_s;t0++){var M0=k.s3ind_s[t0][0],k0=k.s3ind_s[t0][1],o0,B0,v0,L0,$0;for(o0=m0[M0],B0=1,L0=k.s3_ss[Q]*E[M0]*H[m0[M0]],++Q,++M0;M0<=k0;)o0+=m0[M0],B0+=1,v0=k.s3_ss[Q]*E[M0]*H[m0[M0]],L0=C(L0,v0,M0-t0),++Q,++M0;o0=(1+2*o0)/(2*B0),$0=H[o0]*.5,L0*=$0,I[t0]=L0,k.nb_s2[q][t0]=k.nb_s1[q][t0],k.nb_s1[q][t0]=L0,v0=$[t0],v0*=k.minval_s[t0],v0*=$0,I[t0]>v0&&(I[t0]=v0),k.masking_lower>1&&(I[t0]*=k.masking_lower),I[t0]>E[t0]&&(I[t0]=E[t0]),k.masking_lower<1&&(I[t0]*=k.masking_lower),H0(I[t0]>=0)}for(;t0<r0.CBANDS;++t0)E[t0]=0,I[t0]=0}function d0(v,h,E,I,q){var d=g0(r0.CBANDS),k=g0(r0.CBANDS),$=w1(r0.CBANDS+2),X;G(v,h,E,d,k),i0(v,d,k,$);var a0=0;for(X=0;X<v.npart_l;X++){var Q,t0,m0,C0,_0=v.s3ind[X][0],p0=v.s3ind[X][1],g=0,M0=0;for(g=$[_0],M0+=1,t0=v.s3_ll[a0]*E[_0]*H[$[_0]],++a0,++_0;_0<=p0;)g+=$[_0],M0+=1,Q=v.s3_ll[a0]*E[_0]*H[$[_0]],C0=C(t0,Q,_0-X),t0=C0,++a0,++_0;if(g=(1+2*g)/(2*M0),m0=H[g]*.5,t0*=m0,v.blocktype_old[q&1]==r0.SHORT_TYPE){var k0=P*v.nb_1[q][X];k0>0?I[X]=Math.min(t0,k0):I[X]=Math.min(t0,E[X]*O)}else{var o0=n0*v.nb_2[q][X],B0=P*v.nb_1[q][X],k0;o0<=0&&(o0=t0),B0<=0&&(B0=t0),v.blocktype_old[q&1]==r0.NORM_TYPE?k0=Math.min(B0,o0):k0=B0,I[X]=Math.min(t0,k0)}v.nb_2[q][X]=v.nb_1[q][X],v.nb_1[q][X]=t0,Q=d[X],Q*=v.minval_l[X],Q*=m0,I[X]>Q&&(I[X]=Q),v.masking_lower>1&&(I[X]*=v.masking_lower),I[X]>E[X]&&(I[X]=E[X]),v.masking_lower<1&&(I[X]*=v.masking_lower),H0(I[X]>=0)}for(;X<r0.CBANDS;++X)E[X]=0,I[X]=0}function E0(v,h){var E=v.internal_flags;v.short_blocks==H1.short_block_coupled&&!(h[0]!=0&&h[1]!=0)&&(h[0]=h[1]=0);for(var I=0;I<E.channels_out;I++)v.short_blocks==H1.short_block_dispensed&&(h[I]=1),v.short_blocks==H1.short_block_forced&&(h[I]=0)}function V0(v,h,E){for(var I=v.internal_flags,q=0;q<I.channels_out;q++){var d=r0.NORM_TYPE;h[q]!=0?(H0(I.blocktype_old[q]!=r0.START_TYPE),I.blocktype_old[q]==r0.SHORT_TYPE&&(d=r0.STOP_TYPE)):(d=r0.SHORT_TYPE,I.blocktype_old[q]==r0.NORM_TYPE&&(I.blocktype_old[q]=r0.START_TYPE),I.blocktype_old[q]==r0.STOP_TYPE&&(I.blocktype_old[q]=r0.SHORT_TYPE)),E[q]=I.blocktype_old[q],I.blocktype_old[q]=d}}function N0(v,h,E,I,q,d,k){for(var $=d*2,X=d>0?Math.pow(10,q):1,a0,Q,t0=0;t0<k;++t0){var m0=v[2][t0],C0=v[3][t0],_0=h[0][t0],p0=h[1][t0],g=h[2][t0],M0=h[3][t0];if(_0<=1.58*p0&&p0<=1.58*_0){var k0=E[t0]*C0,o0=E[t0]*m0;Q=Math.max(g,Math.min(M0,k0)),a0=Math.max(M0,Math.min(g,o0))}else Q=g,a0=M0;if(d>0){var B0,v0,L0=I[t0]*X;if(B0=Math.min(Math.max(_0,L0),Math.max(p0,L0)),g=Math.max(Q,L0),M0=Math.max(a0,L0),v0=g+M0,v0>0&&B0*$<v0){var $0=B0*$/v0;g*=$0,M0*=$0}Q=Math.min(g,Q),a0=Math.min(M0,a0)}Q>m0&&(Q=m0),a0>C0&&(a0=C0),h[2][t0]=Q,h[3][t0]=a0}}this.L3psycho_anal_vbr=function(v,h,E,I,q,d,k,$,X,a0){var Q=v.internal_flags,t0,m0,C0=g0(r0.HBLKSIZE),_0=f1([3,r0.HBLKSIZE_s]),p0=f1([2,r0.BLKSIZE]),g=f1([2,3,r0.BLKSIZE_s]),M0=f1([4,r0.CBANDS]),k0=f1([4,r0.CBANDS]),o0=f1([4,3]),B0=.6,v0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],L0=w1(2),$0=v.mode==y.JOINT_STEREO?4:Q.channels_out;w0(v,h,E,I,q,d,X,o0,v0,L0),E0(v,L0);{for(var b0=0;b0<$0;b0++){var O0=b0&1;t0=p0,S0(v,h,E,b0,I,C0,t0,O0),A0(v,I,b0,C0),L0[O0]!=0?d0(Q,C0,M0[b0],k0[b0],b0):c1(Q,b0)}L0[0]+L0[1]==2&&v.mode==y.JOINT_STEREO&&N0(M0,k0,Q.mld_cb_l,Q.ATH.cb_l,v.ATHlower*Q.ATH.adjust,v.msfix,Q.npart_l);for(var b0=0;b0<$0;b0++){var O0=b0&1;L0[O0]!=0&&n(Q,M0[b0],k0[b0],b0)}}{for(var X0=0;X0<3;X0++){for(var b0=0;b0<$0;++b0){var O0=b0&1;L0[O0]!=0?P0(Q,b0,X0):(m0=g,R0(v,h,E,b0,X0,_0,m0,O0),_(v,_0,M0[b0],k0[b0],b0,X0))}L0[0]+L0[1]==0&&v.mode==y.JOINT_STEREO&&N0(M0,k0,Q.mld_cb_s,Q.ATH.cb_s,v.ATHlower*Q.ATH.adjust,v.msfix,Q.npart_s);for(var b0=0;b0<$0;++b0){var O0=b0&1;L0[O0]==0&&B(Q,M0[b0],k0[b0],b0,X0)}}for(var b0=0;b0<$0;b0++){var O0=b0&1;if(L0[O0]==0)for(var K0=0;K0<r0.SBMAX_s;K0++){for(var v1=g0(3),X0=0;X0<3;X0++){var J0=Q.thm[b0].s[K0][X0];if(J0*=x,v0[b0][X0]>=2||v0[b0][X0+1]==1){var U0=X0!=0?X0-1:2,l1=i(Q.thm[b0].s[K0][U0],J0,f*B0);J0=Math.min(J0,l1)}else if(v0[b0][X0]==1){var U0=X0!=0?X0-1:2,l1=i(Q.thm[b0].s[K0][U0],J0,O*B0);J0=Math.min(J0,l1)}else if(X0!=0&&v0[b0][X0-1]==3||X0==0&&Q.nsPsy.lastAttacks[b0]==3){var U0=X0!=2?X0+1:0,l1=i(Q.thm[b0].s[K0][U0],J0,O*B0);J0=Math.min(J0,l1)}J0*=o0[b0][X0],v1[X0]=J0}for(var X0=0;X0<3;X0++)Q.thm[b0].s[K0][X0]=v1[X0]}}}for(var b0=0;b0<$0;b0++)Q.nsPsy.lastAttacks[b0]=v0[b0][2];V0(v,L0,a0);for(var b0=0;b0<$0;b0++){var h1,u1,x1,A1;b0>1?(h1=$,u1=-2,x1=r0.NORM_TYPE,(a0[0]==r0.SHORT_TYPE||a0[1]==r0.SHORT_TYPE)&&(x1=r0.SHORT_TYPE),A1=d[I][b0-2]):(h1=k,u1=0,x1=a0[b0],A1=q[I][b0]),x1==r0.SHORT_TYPE?h1[u1+b0]=D(A1,Q.masking_lower):h1[u1+b0]=w(A1,Q.masking_lower),v.analysis&&(Q.pinfo.pe[I][b0]=h1[u1+b0])}return 0};function y0(v,h){var E=v,I;return E>=0?I=-E*27:I=E*h,I<=-72?0:Math.exp(I*J)}function T0(v){var h=0,E=0;{var I=0,q,d;for(I=0;y0(I,v)>1e-20;I-=1);for(q=I,d=0;Math.abs(d-q)>1e-12;)I=(d+q)/2,y0(I,v)>0?d=I:q=I;h=q}{var I=0,q,d;for(I=0;y0(I,v)>1e-20;I+=1);for(q=0,d=I;Math.abs(d-q)>1e-12;)I=(d+q)/2,y0(I,v)>0?q=I:d=I;E=d}{var k=0,$=1e3,X;for(X=0;X<=$;++X){var I=h+X*(E-h)/$,a0=y0(I,v);k+=a0}{var Q=($+1)/(k*(E-h));return Q}}}function F0(v){var h,E,I,q;return h=v,h>=0?h*=3:h*=1.5,h>=.5&&h<=2.5?(q=h-.5,E=8*(q*q-2*q)):E=0,h+=.474,I=15.811389+7.5*h-17.5*Math.sqrt(1+h*h),I<=-60?0:(h=Math.exp((E+I)*J),h/=.6609193,h)}function I0(v){return v<0&&(v=0),v=v*.001,13*Math.atan(.76*v)+3.5*Math.atan(v*v/(7.5*7.5))}function c0(v,h,E,I,q,d,k,$,X,a0,Q,t0){var m0=g0(r0.CBANDS+1),C0=$/(t0>15?2*576:2*192),_0=w1(r0.HBLKSIZE),p0;$/=X;var g=0,M0=0;for(p0=0;p0<r0.CBANDS;p0++){var k0,o0;for(k0=I0($*g),m0[p0]=$*g,o0=g;I0($*o0)-k0<Y&&o0<=X/2;o0++);for(v[p0]=o0-g,M0=p0+1;g<o0;)H0(g<r0.HBLKSIZE),_0[g++]=p0;if(g>X/2){g=X/2,++p0;break}}H0(p0<r0.CBANDS),m0[p0]=$*g;for(var B0=0;B0<t0;B0++){var v0,L0,$0,b0,O0;$0=a0[B0],b0=a0[B0+1],v0=0|Math.floor(.5+Q*($0-.5)),v0<0&&(v0=0),L0=0|Math.floor(.5+Q*(b0-.5)),L0>X/2&&(L0=X/2),E[B0]=(_0[v0]+_0[L0])/2,h[B0]=_0[L0];var X0=C0*b0;k[B0]=(X0-m0[h[B0]])/(m0[h[B0]+1]-m0[h[B0]]),k[B0]<0?k[B0]=0:k[B0]>1&&(k[B0]=1),O0=I0($*a0[B0]*Q),O0=Math.min(O0,15.5)/15.5,d[B0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*O0))-2.5)}g=0;for(var K0=0;K0<M0;K0++){var v1=v[K0],k0,J0;k0=I0($*g),J0=I0($*(g+v1-1)),I[K0]=.5*(k0+J0),k0=I0($*(g-.5)),J0=I0($*(g+v1-.5)),q[K0]=J0-k0,g+=v1}return M0}function G0(v,h,E,I,q,d){var k=f1([r0.CBANDS,r0.CBANDS]),$,X=0;if(d)for(var a0=0;a0<h;a0++)for($=0;$<h;$++){var Q=F0(E[a0]-E[$])*I[$];k[a0][$]=Q*q[a0]}else for($=0;$<h;$++)for(var t0=15+Math.min(21/E[$],12),m0=T0(t0),a0=0;a0<h;a0++){var Q=m0*y0(E[a0]-E[$],t0)*I[$];k[a0][$]=Q*q[a0]}for(var a0=0;a0<h;a0++){for($=0;$<h&&!(k[a0][$]>0);$++);for(v[a0][0]=$,$=h-1;$>0&&!(k[a0][$]>0);$--);v[a0][1]=$,X+=v[a0][1]-v[a0][0]+1}for(var C0=g0(X),_0=0,a0=0;a0<h;a0++)for($=v[a0][0];$<=v[a0][1];$++)C0[_0++]=k[a0][$];return C0}function e1(v){var h=I0(v);return h=Math.min(h,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*h))-2.5)}this.psymodel_init=function(v){var h=v.internal_flags,E,I=!0,q=13,d=24,k=0,$=0,X=-8.25,a0=-4.5,Q=g0(r0.CBANDS),t0=g0(r0.CBANDS),m0=g0(r0.CBANDS),C0=v.out_samplerate;switch(v.experimentalZ){default:case 0:I=!0;break;case 1:I=!(v.VBR==O1.vbr_mtrh||v.VBR==O1.vbr_mt);break;case 2:I=!1;break;case 3:q=8,k=-1.75,$=-.0125,X=-8.25,a0=-2.25;break}for(h.ms_ener_ratio_old=.25,h.blocktype_old[0]=h.blocktype_old[1]=r0.NORM_TYPE,E=0;E<4;++E){for(var g=0;g<r0.CBANDS;++g)h.nb_1[E][g]=1e20,h.nb_2[E][g]=1e20,h.nb_s1[E][g]=h.nb_s2[E][g]=1;for(var _0=0;_0<r0.SBMAX_l;_0++)h.en[E].l[_0]=1e20,h.thm[E].l[_0]=1e20;for(var g=0;g<3;++g){for(var _0=0;_0<r0.SBMAX_s;_0++)h.en[E].s[_0][g]=1e20,h.thm[E].s[_0][g]=1e20;h.nsPsy.lastAttacks[E]=0}for(var g=0;g<9;g++)h.nsPsy.last_en_subshort[E][g]=10}for(h.loudness_sq_save[0]=h.loudness_sq_save[1]=0,h.npart_l=c0(h.numlines_l,h.bo_l,h.bm_l,Q,t0,h.mld_l,h.PSY.bo_l_weight,C0,r0.BLKSIZE,h.scalefac_band.l,r0.BLKSIZE/(2*576),r0.SBMAX_l),H0(h.npart_l<r0.CBANDS),E=0;E<h.npart_l;E++){var p0=k;Q[E]>=q&&(p0=$*(Q[E]-q)/(d-q)+k*(d-Q[E])/(d-q)),m0[E]=Math.pow(10,p0/10),h.numlines_l[E]>0?h.rnumlines_l[E]=1/h.numlines_l[E]:h.rnumlines_l[E]=0}h.s3_ll=G0(h.s3ind,h.npart_l,Q,t0,m0,I);var g=0;for(E=0;E<h.npart_l;E++){var M0;M0=ea.MAX_VALUE;for(var k0=0;k0<h.numlines_l[E];k0++,g++){var o0=C0*g/(1e3*r0.BLKSIZE),B0;B0=this.ATHformula(o0*1e3,v)-20,B0=Math.pow(10,.1*B0),B0*=h.numlines_l[E],M0>B0&&(M0=B0)}h.ATH.cb_l[E]=M0,M0=-20+Q[E]*20/10,M0>6&&(M0=100),M0<-15&&(M0=-15),M0-=8,h.minval_l[E]=Math.pow(10,M0/10)*h.numlines_l[E]}for(h.npart_s=c0(h.numlines_s,h.bo_s,h.bm_s,Q,t0,h.mld_s,h.PSY.bo_s_weight,C0,r0.BLKSIZE_s,h.scalefac_band.s,r0.BLKSIZE_s/(2*192),r0.SBMAX_s),H0(h.npart_s<r0.CBANDS),g=0,E=0;E<h.npart_s;E++){var M0,p0=X;Q[E]>=q&&(p0=a0*(Q[E]-q)/(d-q)+X*(d-Q[E])/(d-q)),m0[E]=Math.pow(10,p0/10),M0=ea.MAX_VALUE;for(var k0=0;k0<h.numlines_s[E];k0++,g++){var o0=C0*g/(1e3*r0.BLKSIZE_s),B0;B0=this.ATHformula(o0*1e3,v)-20,B0=Math.pow(10,.1*B0),B0*=h.numlines_s[E],M0>B0&&(M0=B0)}h.ATH.cb_s[E]=M0,M0=-7+Q[E]*7/12,Q[E]>12&&(M0*=1+Math.log(1+M0)*3.1),Q[E]<12&&(M0*=1+Math.log(1-M0)*2.3),M0<-15&&(M0=-15),M0-=8,h.minval_s[E]=Math.pow(10,M0/10)*h.numlines_s[E]}h.s3_ss=G0(h.s3ind_s,h.npart_s,Q,t0,m0,I),T(),M.init_fft(h),h.decay=Math.exp(-1*V/(h0*C0/192));{var v0;v0=s0,v.exp_nspsytune&2&&(v0=1),Math.abs(v.msfix)>0&&(v0=v.msfix),v.msfix=v0;for(var L0=0;L0<h.npart_l;L0++)h.s3ind[L0][1]>h.npart_l-1&&(h.s3ind[L0][1]=h.npart_l-1)}var $0=576*h.mode_gr/C0;if(h.ATH.decay=Math.pow(10,-12/10*$0),h.ATH.adjust=.01,h.ATH.adjustLimit=1,H0(h.bo_l[r0.SBMAX_l-1]<=h.npart_l),H0(h.bo_s[r0.SBMAX_s-1]<=h.npart_s),v.ATHtype!=-1){var o0,b0=v.out_samplerate/r0.BLKSIZE,O0=0;for(o0=0,E=0;E<r0.BLKSIZE/2;++E)o0+=b0,h.ATH.eql_w[E]=1/Math.pow(10,this.ATHformula(o0,v)/10),O0+=h.ATH.eql_w[E];for(O0=1/O0,E=r0.BLKSIZE/2;--E>=0;)h.ATH.eql_w[E]*=O0}{for(var L0=g=0;L0<h.npart_s;++L0)for(E=0;E<h.numlines_s[L0];++E)++g;for(var L0=g=0;L0<h.npart_l;++L0)for(E=0;E<h.numlines_l[L0];++E)++g}for(g=0,E=0;E<h.npart_l;E++){var o0=C0*(g+h.numlines_l[E]/2)/(1*r0.BLKSIZE);h.mld_cb_l[E]=e1(o0),g+=h.numlines_l[E]}for(;E<r0.CBANDS;++E)h.mld_cb_l[E]=1;for(g=0,E=0;E<h.npart_s;E++){var o0=C0*(g+h.numlines_s[E]/2)/(1*r0.BLKSIZE_s);h.mld_cb_s[E]=e1(o0),g+=h.numlines_s[E]}for(;E<r0.CBANDS;++E)h.mld_cb_s[E]=1;return 0};function D0(v,h){v<-.3&&(v=3410),v/=1e3,v=Math.max(.1,v);var E=3.64*Math.pow(v,-.8)-6.8*Math.exp(-.6*Math.pow(v-3.4,2))+6*Math.exp(-.15*Math.pow(v-8.7,2))+(.6+.04*h)*.001*Math.pow(v,4);return E}this.ATHformula=function(v,h){var E;switch(h.ATHtype){case 0:E=D0(v,9);break;case 1:E=D0(v,-1);break;case 2:E=D0(v,0);break;case 3:E=D0(v,1)+6;break;case 4:E=D0(v,h.ATHcurve);break;default:E=D0(v,0);break}return E}}var Qa=Ua,Wa=P1;function ja(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Wa.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var za=ja,Ja=t1(),aa={};aa.SFBMAX=Ja.SBMAX_s*3;var g1=aa,ta=Z0,ga=ta.new_float,I1=ta.new_int,me=g1;function et(){this.xr=ga(576),this.l3_enc=I1(576),this.scalefac=I1(me.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=I1(3),this.subblock_gain=I1(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=I1(me.SFBMAX),this.window=I1(me.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=I1(4),this.max_nonzero_coeff=0;var y=this;function M(P){return new Int32Array(P)}function V(P){return new Float32Array(P)}this.assign=function(P){y.xr=V(P.xr),y.l3_enc=M(P.l3_enc),y.scalefac=M(P.scalefac),y.xrpow_max=P.xrpow_max,y.part2_3_length=P.part2_3_length,y.big_values=P.big_values,y.count1=P.count1,y.global_gain=P.global_gain,y.scalefac_compress=P.scalefac_compress,y.block_type=P.block_type,y.mixed_block_flag=P.mixed_block_flag,y.table_select=M(P.table_select),y.subblock_gain=M(P.subblock_gain),y.region0_count=P.region0_count,y.region1_count=P.region1_count,y.preflag=P.preflag,y.scalefac_scale=P.scalefac_scale,y.count1table_select=P.count1table_select,y.part2_length=P.part2_length,y.sfb_lmax=P.sfb_lmax,y.sfb_smin=P.sfb_smin,y.psy_lmax=P.psy_lmax,y.sfbmax=P.sfbmax,y.psymax=P.psymax,y.sfbdivide=P.sfbdivide,y.width=M(P.width),y.window=M(P.window),y.count1bits=P.count1bits,y.sfb_partition_table=P.sfb_partition_table.slice(0),y.slen=M(P.slen),y.max_nonzero_coeff=P.max_nonzero_coeff}}var ce=et,at=Z0,ra=at.new_int,tt=ce;function rt(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[ra(4),ra(4)];for(var y=0;y<2;y++)for(var M=0;M<2;M++)this.tt[y][M]=new tt}var st=rt,sa=Z0,ee=sa.System,ae=sa.new_int,te=t1();function nt(y,M,V,P){this.l=ae(1+te.SBMAX_l),this.s=ae(1+te.SBMAX_s),this.psfb21=ae(1+te.PSFB21),this.psfb12=ae(1+te.PSFB12);var n0=this.l,W=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],ee.arraycopy(this.arrL,0,n0,0,Math.min(this.arrL.length,this.l.length)),ee.arraycopy(this.arrS,0,W,0,Math.min(this.arrS.length,this.s.length)),ee.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),ee.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var na=nt,be=Z0,de=be.new_float,it=be.new_float_n,lt=be.new_int,ia=t1();function _t(){this.last_en_subshort=it([4,9]),this.lastAttacks=lt(4),this.pefirbuf=de(19),this.longfact=de(ia.SBMAX_l),this.shortfact=de(ia.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var ot=_t;function vt(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var ht=vt,F1=Z0,ut=F1.new_byte,ft=F1.new_double,m1=F1.new_float,p1=F1.new_float_n,d1=F1.new_int,re=F1.new_int_n,mt=st,ct=na,bt=ot,dt=ht,la=Qe(),W0=t1(),St=g1;T1.MFSIZE=3*1152+W0.ENCDELAY-W0.MDCTDELAY,T1.MAX_HEADER_BUF=256,T1.MAX_BITS_PER_CHANNEL=4095,T1.MAX_BITS_PER_GRANULE=7680,T1.BPC=320;function T1(){var y=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=p1([2,T1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new mt,this.ms_ratio=m1(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=d1(2),this.CurrentStep=d1(2),this.masking_lower=0,this.bv_scf=d1(576),this.pseudohalf=d1(St.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*T1.BPC+1),this.itime=ft(2),this.sideinfo_len=0,this.sb_sample=p1([2,2,18,W0.SBLIMIT]),this.amp_filter=m1(32);function M(){this.write_timing=0,this.ptr=0,this.buf=ut(y)}this.header=new Array(T1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new ct,this.minval_l=m1(W0.CBANDS),this.minval_s=m1(W0.CBANDS),this.nb_1=p1([4,W0.CBANDS]),this.nb_2=p1([4,W0.CBANDS]),this.nb_s1=p1([4,W0.CBANDS]),this.nb_s2=p1([4,W0.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=m1(4),this.loudness_sq=p1([2,2]),this.loudness_sq_save=m1(2),this.mld_l=m1(W0.SBMAX_l),this.mld_s=m1(W0.SBMAX_s),this.bm_l=d1(W0.SBMAX_l),this.bo_l=d1(W0.SBMAX_l),this.bm_s=d1(W0.SBMAX_s),this.bo_s=d1(W0.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=re([W0.CBANDS,2]),this.s3ind_s=re([W0.CBANDS,2]),this.numlines_s=d1(W0.CBANDS),this.numlines_l=d1(W0.CBANDS),this.rnumlines_l=m1(W0.CBANDS),this.mld_cb_l=m1(W0.CBANDS),this.mld_cb_s=m1(W0.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=m1(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=d1(2),this.nsPsy=new bt,this.VBR_seek_table=new dt,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=re([16,4+1]),this.bitrate_blockType_Hist=re([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var V=0;V<this.en.length;V++)this.en[V]=new la;for(var V=0;V<this.thm.length;V++)this.thm[V]=new la;for(var V=0;V<this.header.length;V++)this.header[V]=new M}var se=T1,xt=Z0,C1=xt.new_float,L1=t1();function At(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=C1(L1.SBMAX_l),this.s=C1(L1.SBMAX_s),this.psfb21=C1(L1.PSFB21),this.psfb12=C1(L1.PSFB12),this.cb_l=C1(L1.CBANDS),this.cb_s=C1(L1.CBANDS),this.eql_w=C1(L1.BLKSIZE/2)}var Mt=At,_a=Z0,n1=_a.System,oa=_a.Arrays;j0.STEPS_per_dB=100,j0.MAX_dB=120,j0.GAIN_NOT_ENOUGH_SAMPLES=-24601,j0.GAIN_ANALYSIS_ERROR=0,j0.GAIN_ANALYSIS_OK=1,j0.INIT_GAIN_ANALYSIS_ERROR=0,j0.INIT_GAIN_ANALYSIS_OK=1,j0.YULE_ORDER=10,j0.MAX_ORDER=j0.YULE_ORDER,j0.MAX_SAMP_FREQ=48e3,j0.RMS_WINDOW_TIME_NUMERATOR=1,j0.RMS_WINDOW_TIME_DENOMINATOR=20,j0.MAX_SAMPLES_PER_WINDOW=j0.MAX_SAMP_FREQ*j0.RMS_WINDOW_TIME_NUMERATOR/j0.RMS_WINDOW_TIME_DENOMINATOR+1;function j0(){var y=64.82,M=.95,V=j0.RMS_WINDOW_TIME_NUMERATOR,P=j0.RMS_WINDOW_TIME_DENOMINATOR,n0=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],W=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function j(f,O,s0,Z,J,K){for(;J--!=0;)s0[Z]=1e-10+f[O+0]*K[0]-s0[Z-1]*K[1]+f[O-1]*K[2]-s0[Z-2]*K[3]+f[O-2]*K[4]-s0[Z-3]*K[5]+f[O-3]*K[6]-s0[Z-4]*K[7]+f[O-4]*K[8]-s0[Z-5]*K[9]+f[O-5]*K[10]-s0[Z-6]*K[11]+f[O-6]*K[12]-s0[Z-7]*K[13]+f[O-7]*K[14]-s0[Z-8]*K[15]+f[O-8]*K[16]-s0[Z-9]*K[17]+f[O-9]*K[18]-s0[Z-10]*K[19]+f[O-10]*K[20],++Z,++O}function Y(f,O,s0,Z,J,K){for(;J--!=0;)s0[Z]=f[O+0]*K[0]-s0[Z-1]*K[1]+f[O-1]*K[2]-s0[Z-2]*K[3]+f[O-2]*K[4],++Z,++O}function z(f,O){for(var s0=0;s0<MAX_ORDER;s0++)f.linprebuf[s0]=f.lstepbuf[s0]=f.loutbuf[s0]=f.rinprebuf[s0]=f.rstepbuf[s0]=f.routbuf[s0]=0;switch(0|O){case 48e3:f.reqindex=0;break;case 44100:f.reqindex=1;break;case 32e3:f.reqindex=2;break;case 24e3:f.reqindex=3;break;case 22050:f.reqindex=4;break;case 16e3:f.reqindex=5;break;case 12e3:f.reqindex=6;break;case 11025:f.reqindex=7;break;case 8e3:f.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return f.sampleWindow=0|(O*V+P-1)/P,f.lsum=0,f.rsum=0,f.totsamp=0,oa.ill(f.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(f,O){return z(f,O)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(f.linpre=MAX_ORDER,f.rinpre=MAX_ORDER,f.lstep=MAX_ORDER,f.rstep=MAX_ORDER,f.lout=MAX_ORDER,f.rout=MAX_ORDER,oa.fill(f.B,0),INIT_GAIN_ANALYSIS_OK)};function h0(f){return f*f}this.AnalyzeSamples=function(f,O,s0,Z,J,K,c){var o,u,S,e,l,R,L;if(K==0)return GAIN_ANALYSIS_OK;switch(L=0,l=K,c){case 1:Z=O,J=s0;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(K<MAX_ORDER?(n1.arraycopy(O,s0,f.linprebuf,MAX_ORDER,K),n1.arraycopy(Z,J,f.rinprebuf,MAX_ORDER,K)):(n1.arraycopy(O,s0,f.linprebuf,MAX_ORDER,MAX_ORDER),n1.arraycopy(Z,J,f.rinprebuf,MAX_ORDER,MAX_ORDER));l>0;){R=l>f.sampleWindow-f.totsamp?f.sampleWindow-f.totsamp:l,L<MAX_ORDER?(o=f.linpre+L,u=f.linprebuf,S=f.rinpre+L,e=f.rinprebuf,R>MAX_ORDER-L&&(R=MAX_ORDER-L)):(o=s0+L,u=O,S=J+L,e=Z),j(u,o,f.lstepbuf,f.lstep+f.totsamp,R,n0[f.reqindex]),j(e,S,f.rstepbuf,f.rstep+f.totsamp,R,n0[f.reqindex]),Y(f.lstepbuf,f.lstep+f.totsamp,f.loutbuf,f.lout+f.totsamp,R,W[f.reqindex]),Y(f.rstepbuf,f.rstep+f.totsamp,f.routbuf,f.rout+f.totsamp,R,W[f.reqindex]),o=f.lout+f.totsamp,u=f.loutbuf,S=f.rout+f.totsamp,e=f.routbuf;for(var H=R%8;H--!=0;)f.lsum+=h0(u[o++]),f.rsum+=h0(e[S++]);for(H=R/8;H--!=0;)f.lsum+=h0(u[o+0])+h0(u[o+1])+h0(u[o+2])+h0(u[o+3])+h0(u[o+4])+h0(u[o+5])+h0(u[o+6])+h0(u[o+7]),o+=8,f.rsum+=h0(e[S+0])+h0(e[S+1])+h0(e[S+2])+h0(e[S+3])+h0(e[S+4])+h0(e[S+5])+h0(e[S+6])+h0(e[S+7]),S+=8;if(l-=R,L+=R,f.totsamp+=R,f.totsamp==f.sampleWindow){var T=j0.STEPS_per_dB*10*Math.log10((f.lsum+f.rsum)/f.totsamp*.5+1e-37),p=T<=0?0:0|T;p>=f.A.length&&(p=f.A.length-1),f.A[p]++,f.lsum=f.rsum=0,n1.arraycopy(f.loutbuf,f.totsamp,f.loutbuf,0,MAX_ORDER),n1.arraycopy(f.routbuf,f.totsamp,f.routbuf,0,MAX_ORDER),n1.arraycopy(f.lstepbuf,f.totsamp,f.lstepbuf,0,MAX_ORDER),n1.arraycopy(f.rstepbuf,f.totsamp,f.rstepbuf,0,MAX_ORDER),f.totsamp=0}if(f.totsamp>f.sampleWindow)return GAIN_ANALYSIS_ERROR}return K<MAX_ORDER?(n1.arraycopy(f.linprebuf,K,f.linprebuf,0,MAX_ORDER-K),n1.arraycopy(f.rinprebuf,K,f.rinprebuf,0,MAX_ORDER-K),n1.arraycopy(O,s0,f.linprebuf,MAX_ORDER-K,K),n1.arraycopy(Z,J,f.rinprebuf,MAX_ORDER-K,K)):(n1.arraycopy(O,s0+K-MAX_ORDER,f.linprebuf,0,MAX_ORDER),n1.arraycopy(Z,J+K-MAX_ORDER,f.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function x(f,O){var s0,Z=0;for(s0=0;s0<O;s0++)Z+=f[s0];if(Z==0)return GAIN_NOT_ENOUGH_SAMPLES;var J=0|Math.ceil(Z*(1-M));for(s0=O;s0-- >0&&!((J-=f[s0])<=0););return y-s0/j0.STEPS_per_dB}this.GetTitleGain=function(f){for(var O=x(f.A,f.A.length),s0=0;s0<f.A.length;s0++)f.B[s0]+=f.A[s0],f.A[s0]=0;for(var s0=0;s0<MAX_ORDER;s0++)f.linprebuf[s0]=f.lstepbuf[s0]=f.loutbuf[s0]=f.rinprebuf[s0]=f.rstepbuf[s0]=f.routbuf[s0]=0;return f.totsamp=0,f.lsum=f.rsum=0,O}}var va=j0,ha=Z0,k1=ha.new_float,ua=ha.new_int,i1=va;function Rt(){this.linprebuf=k1(i1.MAX_ORDER*2),this.linpre=0,this.lstepbuf=k1(i1.MAX_SAMPLES_PER_WINDOW+i1.MAX_ORDER),this.lstep=0,this.loutbuf=k1(i1.MAX_SAMPLES_PER_WINDOW+i1.MAX_ORDER),this.lout=0,this.rinprebuf=k1(i1.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=k1(i1.MAX_SAMPLES_PER_WINDOW+i1.MAX_ORDER),this.rstep=0,this.routbuf=k1(i1.MAX_SAMPLES_PER_WINDOW+i1.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=ua(0|i1.STEPS_per_dB*i1.MAX_dB),this.B=ua(0|i1.STEPS_per_dB*i1.MAX_dB)}var Et=Rt;function Bt(y){this.bits=y}var fa=Bt,Se=Z0,ma=Se.new_float,Tt=Se.new_int,ca=Se.assert,yt=fa,ba=t1(),wt=g1,It=se;function pt(y){var M=y;this.quantize=M,this.iteration_loop=function(V,P,n0,W){var j=V.internal_flags,Y=ma(wt.SFBMAX),z=ma(576),h0=Tt(2),x=0,f,O=j.l3_side,s0=new yt(x);this.quantize.rv.ResvFrameBegin(V,s0),x=s0.bits;for(var Z=0;Z<j.mode_gr;Z++){f=this.quantize.qupvt.on_pe(V,P,h0,x,Z,Z),j.mode_ext==ba.MPG_MD_MS_LR&&(this.quantize.ms_convert(j.l3_side,Z),this.quantize.qupvt.reduce_side(h0,n0[Z],x,f));for(var J=0;J<j.channels_out;J++){var K,c,o=O.tt[Z][J];o.block_type!=ba.SHORT_TYPE?(K=0,c=j.PSY.mask_adjust-K):(K=0,c=j.PSY.mask_adjust_short-K),j.masking_lower=Math.pow(10,c*.1),this.quantize.init_outer_loop(j,o),this.quantize.init_xrpow(j,o,z)&&(this.quantize.qupvt.calc_xmin(V,W[Z][J],o,Y),this.quantize.outer_loop(V,o,Y,z,J,h0[J])),this.quantize.iteration_finish_one(j,Z,J),ca(o.part2_3_length<=It.MAX_BITS_PER_CHANNEL),ca(o.part2_3_length<=h0[J])}}this.quantize.rv.ResvFrameEnd(j,x)}}var Ct=pt;function Y0(y,M,V,P){this.xlen=y,this.linmax=M,this.table=V,this.hlen=P}var u0={};u0.t1HB=[1,1,1,0],u0.t2HB=[1,2,1,3,1,1,3,2,0],u0.t3HB=[3,2,1,1,1,1,3,2,0],u0.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],u0.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],u0.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],u0.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],u0.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],u0.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],u0.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],u0.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],u0.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],u0.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],u0.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],u0.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],u0.t32HB=[1<<0,5<<1,4<<1,5<<2,6<<1,5<<2,4<<2,4<<3,7<<1,3<<2,6<<2,0<<3,7<<2,2<<3,3<<3,1<<4],u0.t33HB=[15<<0,14<<1,13<<1,12<<2,11<<1,10<<2,9<<2,8<<3,7<<1,6<<2,5<<2,4<<3,3<<2,2<<3,1<<3,0<<4],u0.t1l=[1,4,3,5],u0.t2l=[1,4,7,4,5,7,6,7,8],u0.t3l=[2,3,7,4,4,7,6,7,8],u0.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],u0.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],u0.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],u0.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],u0.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],u0.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],u0.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],u0.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],u0.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],u0.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],u0.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],u0.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],u0.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],u0.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4],u0.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4],u0.ht=[new Y0(0,0,null,null),new Y0(2,0,u0.t1HB,u0.t1l),new Y0(3,0,u0.t2HB,u0.t2l),new Y0(3,0,u0.t3HB,u0.t3l),new Y0(0,0,null,null),new Y0(4,0,u0.t5HB,u0.t5l),new Y0(4,0,u0.t6HB,u0.t6l),new Y0(6,0,u0.t7HB,u0.t7l),new Y0(6,0,u0.t8HB,u0.t8l),new Y0(6,0,u0.t9HB,u0.t9l),new Y0(8,0,u0.t10HB,u0.t10l),new Y0(8,0,u0.t11HB,u0.t11l),new Y0(8,0,u0.t12HB,u0.t12l),new Y0(16,0,u0.t13HB,u0.t13l),new Y0(0,0,null,u0.t16_5l),new Y0(16,0,u0.t15HB,u0.t15l),new Y0(1,1,u0.t16HB,u0.t16l),new Y0(2,3,u0.t16HB,u0.t16l),new Y0(3,7,u0.t16HB,u0.t16l),new Y0(4,15,u0.t16HB,u0.t16l),new Y0(6,63,u0.t16HB,u0.t16l),new Y0(8,255,u0.t16HB,u0.t16l),new Y0(10,1023,u0.t16HB,u0.t16l),new Y0(13,8191,u0.t16HB,u0.t16l),new Y0(4,15,u0.t24HB,u0.t24l),new Y0(5,31,u0.t24HB,u0.t24l),new Y0(6,63,u0.t24HB,u0.t24l),new Y0(7,127,u0.t24HB,u0.t24l),new Y0(8,255,u0.t24HB,u0.t24l),new Y0(9,511,u0.t24HB,u0.t24l),new Y0(11,2047,u0.t24HB,u0.t24l),new Y0(13,8191,u0.t24HB,u0.t24l),new Y0(0,0,u0.t32HB,u0.t32l),new Y0(0,0,u0.t33HB,u0.t33l)],u0.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],u0.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],u0.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],u0.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],u0.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],u0.scfsi_band=[0,6,11,16,21];var xe=u0,Ae,da;function Sa(){if(da)return Ae;da=1;var y=na,M=Z0,V=M.VbrMode,P=M.Float,n0=M.Util,W=M.new_float,j=M.new_int,Y=M.assert,z=t1(),h0=fa,x=se;f.Q_MAX=256+1,f.Q_MAX2=116,f.LARGE_BITS=1e5,f.IXMAX_VAL=8206;function f(){var O=Ee(),s0=null,Z=null,J=null;this.setModules=function(A,C,F){s0=A,Z=C,J=F};function K(A){return Y(0<=A+f.Q_MAX2&&A<f.Q_MAX),L[A+f.Q_MAX2]}this.IPOW20=function(A){return Y(0<=A&&A<f.Q_MAX),H[A]};var c=2220446049250313e-31,o=f.IXMAX_VAL,u=o+2,S=f.Q_MAX,e=f.Q_MAX2;f.LARGE_BITS;var l=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var R=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=R,this.sfBandIndex=[new y([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var L=W(S+e+1),H=W(S),T=W(u),p=W(u);this.adj43=p;function l0(A,C){var F=J.ATHformula(C,A);return F-=l,F=Math.pow(10,F/10+A.ATHlower),F}function b(A){for(var C=A.internal_flags.ATH.l,F=A.internal_flags.ATH.psfb21,N=A.internal_flags.ATH.s,U=A.internal_flags.ATH.psfb12,B=A.internal_flags,n=A.out_samplerate,s=0;s<z.SBMAX_l;s++){var t=B.scalefac_band.l[s],i=B.scalefac_band.l[s+1];C[s]=P.MAX_VALUE;for(var m=t;m<i;m++){var D=m*n/1152,e0=l0(A,D);C[s]=Math.min(C[s],e0)}}for(var s=0;s<z.PSFB21;s++){var t=B.scalefac_band.psfb21[s],i=B.scalefac_band.psfb21[s+1];F[s]=P.MAX_VALUE;for(var m=t;m<i;m++){var D=m*n/1152,e0=l0(A,D);F[s]=Math.min(F[s],e0)}}for(var s=0;s<z.SBMAX_s;s++){var t=B.scalefac_band.s[s],i=B.scalefac_band.s[s+1];N[s]=P.MAX_VALUE;for(var m=t;m<i;m++){var D=m*n/384,e0=l0(A,D);N[s]=Math.min(N[s],e0)}N[s]*=B.scalefac_band.s[s+1]-B.scalefac_band.s[s]}for(var s=0;s<z.PSFB12;s++){var t=B.scalefac_band.psfb12[s],i=B.scalefac_band.psfb12[s+1];U[s]=P.MAX_VALUE;for(var m=t;m<i;m++){var D=m*n/384,e0=l0(A,D);U[s]=Math.min(U[s],e0)}U[s]*=B.scalefac_band.s[13]-B.scalefac_band.s[12]}if(A.noATH){for(var s=0;s<z.SBMAX_l;s++)C[s]=1e-20;for(var s=0;s<z.PSFB21;s++)F[s]=1e-20;for(var s=0;s<z.SBMAX_s;s++)N[s]=1e-20;for(var s=0;s<z.PSFB12;s++)U[s]=1e-20}B.ATH.floor=10*Math.log10(l0(A,-1))}this.iteration_init=function(A){var C=A.internal_flags,F=C.l3_side,N;if(C.iteration_init_init==0){for(C.iteration_init_init=1,F.main_data_begin=0,b(A),T[0]=0,N=1;N<u;N++)T[N]=Math.pow(N,4/3);for(N=0;N<u-1;N++)p[N]=N+1-Math.pow(.5*(T[N]+T[N+1]),.75);for(p[N]=.5,N=0;N<S;N++)H[N]=Math.pow(2,(N-210)*-.1875);for(N=0;N<=S+e;N++)L[N]=Math.pow(2,(N-210-e)*.25);s0.huffman_init(C);{var U,B,n,s;for(N=A.exp_nspsytune>>2&63,N>=32&&(N-=64),U=Math.pow(10,N/4/10),N=A.exp_nspsytune>>8&63,N>=32&&(N-=64),B=Math.pow(10,N/4/10),N=A.exp_nspsytune>>14&63,N>=32&&(N-=64),n=Math.pow(10,N/4/10),N=A.exp_nspsytune>>20&63,N>=32&&(N-=64),s=n*Math.pow(10,N/4/10),N=0;N<z.SBMAX_l;N++){var t;N<=6?t=U:N<=13?t=B:N<=20?t=n:t=s,C.nsPsy.longfact[N]=t}for(N=0;N<z.SBMAX_s;N++){var t;N<=5?t=U:N<=10?t=B:N<=11?t=n:t=s,C.nsPsy.shortfact[N]=t}}}},this.on_pe=function(A,C,F,N,U,B){var n=A.internal_flags,s=0,t,i=j(2),m,D=new h0(s),e0=Z.ResvMaxBits(A,N,D,B);s=D.bits;var w=s+e0;for(w>x.MAX_BITS_PER_GRANULE&&(w=x.MAX_BITS_PER_GRANULE),t=0,m=0;m<n.channels_out;++m)F[m]=Math.min(x.MAX_BITS_PER_CHANNEL,s/n.channels_out),i[m]=0|F[m]*C[U][m]/700-F[m],i[m]>N*3/4&&(i[m]=N*3/4),i[m]<0&&(i[m]=0),i[m]+F[m]>x.MAX_BITS_PER_CHANNEL&&(i[m]=Math.max(0,x.MAX_BITS_PER_CHANNEL-F[m])),t+=i[m];if(t>e0)for(m=0;m<n.channels_out;++m)i[m]=e0*i[m]/t;for(m=0;m<n.channels_out;++m)F[m]+=i[m],e0-=i[m];for(t=0,m=0;m<n.channels_out;++m)t+=F[m];if(t>x.MAX_BITS_PER_GRANULE){var G=0;for(m=0;m<n.channels_out;++m)F[m]*=x.MAX_BITS_PER_GRANULE,F[m]/=t,G+=F[m]}return w},this.reduce_side=function(A,C,F,N){Y(A[0]+A[1]<=x.MAX_BITS_PER_GRANULE);var U=.33*(.5-C)/.5;U<0&&(U=0),U>.5&&(U=.5);var B=0|U*.5*(A[0]+A[1]);B>x.MAX_BITS_PER_CHANNEL-A[0]&&(B=x.MAX_BITS_PER_CHANNEL-A[0]),B<0&&(B=0),A[1]>=125&&(A[1]-B>125?(A[0]<F&&(A[0]+=B),A[1]-=B):(A[0]+=A[1]-125,A[1]=125)),B=A[0]+A[1],B>N&&(A[0]=N*A[0]/B,A[1]=N*A[1]/B),Y(A[0]<=x.MAX_BITS_PER_CHANNEL),Y(A[1]<=x.MAX_BITS_PER_CHANNEL),Y(A[0]+A[1]<=x.MAX_BITS_PER_GRANULE)},this.athAdjust=function(A,C,F){var N=90.30873362,U=94.82444863,B=n0.FAST_LOG10_X(C,10),n=A*A,s=0;return B-=F,n>1e-20&&(s=1+n0.FAST_LOG10_X(n,10/N)),s<0&&(s=0),B*=s,B+=F+N-U,Math.pow(10,.1*B)},this.calc_xmin=function(A,C,F,N){var U=0,B=A.internal_flags,n,s=0,t=0,i=B.ATH,m=F.xr,D=A.VBR==V.vbr_mtrh?1:0,e0=B.masking_lower;for((A.VBR==V.vbr_mtrh||A.VBR==V.vbr_mt)&&(e0=1),n=0;n<F.psy_lmax;n++){var w,G,i0,f0,S0,R0;A.VBR==V.vbr_rh||A.VBR==V.vbr_mtrh?G=athAdjust(i.adjust,i.l[n],i.floor):G=i.adjust*i.l[n],S0=F.width[n],i0=G/S0,f0=c,R0=S0>>1,w=0;do{var A0,x0;A0=m[s]*m[s],w+=A0,f0+=A0<i0?A0:i0,s++,x0=m[s]*m[s],w+=x0,f0+=x0<i0?x0:i0,s++}while(--R0>0);if(w>G&&t++,n==z.SBPSY_l){var w0=G*B.nsPsy.longfact[n];f0<w0&&(f0=w0)}if(D!=0&&(G=f0),!A.ATHonly){var P0=C.en.l[n];if(P0>0){var w0;w0=w*C.thm.l[n]*e0/P0,D!=0&&(w0*=B.nsPsy.longfact[n]),G<w0&&(G=w0)}}D!=0?N[U++]=G:N[U++]=G*B.nsPsy.longfact[n]}var c1=575;if(F.block_type!=z.SHORT_TYPE)for(var r=576;r--!=0&&O.EQ(m[r],0);)c1=r;F.max_nonzero_coeff=c1;for(var _=F.sfb_smin;n<F.psymax;_++,n+=3){var S0,d0,E0;for(A.VBR==V.vbr_rh||A.VBR==V.vbr_mtrh?E0=athAdjust(i.adjust,i.s[_],i.floor):E0=i.adjust*i.s[_],S0=F.width[n],d0=0;d0<3;d0++){var w=0,G,i0,f0,R0=S0>>1;i0=E0/S0,f0=c;do{var A0,x0;A0=m[s]*m[s],w+=A0,f0+=A0<i0?A0:i0,s++,x0=m[s]*m[s],w+=x0,f0+=x0<i0?x0:i0,s++}while(--R0>0);if(w>E0&&t++,_==z.SBPSY_s){var w0=E0*B.nsPsy.shortfact[_];f0<w0&&(f0=w0)}if(D!=0?G=f0:G=E0,!A.ATHonly&&!A.ATHshort){var P0=C.en.s[_][d0];if(P0>0){var w0;w0=w*C.thm.s[_][d0]*e0/P0,D!=0&&(w0*=B.nsPsy.shortfact[_]),G<w0&&(G=w0)}}D!=0?N[U++]=G:N[U++]=G*B.nsPsy.shortfact[_]}A.useTemporal&&(N[U-3]>N[U-3+1]&&(N[U-3+1]+=(N[U-3]-N[U-3+1])*B.decay),N[U-3+1]>N[U-3+2]&&(N[U-3+2]+=(N[U-3+1]-N[U-3+2])*B.decay))}return t};function a(A){this.s=A}this.calc_noise_core=function(A,C,F,N){var U=0,B=C.s,n=A.l3_enc;if(B>A.count1)for(;F--!=0;){var s;s=A.xr[B],B++,U+=s*s,s=A.xr[B],B++,U+=s*s}else if(B>A.big_values){var t=W(2);for(t[0]=0,t[1]=N;F--!=0;){var s;s=Math.abs(A.xr[B])-t[n[B]],B++,U+=s*s,s=Math.abs(A.xr[B])-t[n[B]],B++,U+=s*s}}else for(;F--!=0;){var s;s=Math.abs(A.xr[B])-T[n[B]]*N,B++,U+=s*s,s=Math.abs(A.xr[B])-T[n[B]]*N,B++,U+=s*s}return C.s=B,U},this.calc_noise=function(A,C,F,N,U){var B=0,n=0,s,t,i=0,m=0,D=0,e0=-20,w=0,G=A.scalefac,i0=0;for(N.over_SSD=0,s=0;s<A.psymax;s++){var f0=A.global_gain-(G[i0++]+(A.preflag!=0?R[s]:0)<<A.scalefac_scale+1)-A.subblock_gain[A.window[s]]*8,S0=0;if(U!=null&&U.step[s]==f0)S0=U.noise[s],w+=A.width[s],F[B++]=S0/C[n++],S0=U.noise_log[s];else{var R0=K(f0);if(t=A.width[s]>>1,w+A.width[s]>A.max_nonzero_coeff){var A0;A0=A.max_nonzero_coeff-w+1,A0>0?t=A0>>1:t=0}var x0=new a(w);S0=this.calc_noise_core(A,x0,t,R0),w=x0.s,U!=null&&(U.step[s]=f0,U.noise[s]=S0),S0=F[B++]=S0/C[n++],S0=n0.FAST_LOG10(Math.max(S0,1e-20)),U!=null&&(U.noise_log[s]=S0)}if(U!=null&&(U.global_gain=A.global_gain),D+=S0,S0>0){var w0;w0=Math.max(0|S0*10+.5,1),N.over_SSD+=w0*w0,i++,m+=S0}e0=Math.max(e0,S0)}return N.over_count=i,N.tot_noise=D,N.over_noise=m,N.max_noise=e0,i},this.set_pinfo=function(A,C,F,N,U){var B=A.internal_flags,n,s,t,i,m,D=C.scalefac_scale==0?.5:1,e0=C.scalefac,w=W(L3Side.SFBMAX),G=W(L3Side.SFBMAX),i0=new CalcNoiseResult;calc_xmin(A,F,C,w),calc_noise(C,w,G,i0,null);var f0=0;for(s=C.sfb_lmax,C.block_type!=z.SHORT_TYPE&&C.mixed_block_flag==0&&(s=22),n=0;n<s;n++){var S0=B.scalefac_band.l[n],R0=B.scalefac_band.l[n+1],A0=R0-S0;for(i=0;f0<R0;f0++)i+=C.xr[f0]*C.xr[f0];i/=A0,m=1e15,B.pinfo.en[N][U][n]=m*i,B.pinfo.xfsf[N][U][n]=m*w[n]*G[n]/A0,F.en.l[n]>0&&!A.ATHonly?i=i/F.en.l[n]:i=0,B.pinfo.thr[N][U][n]=m*Math.max(i*F.thm.l[n],B.ATH.l[n]),B.pinfo.LAMEsfb[N][U][n]=0,C.preflag!=0&&n>=11&&(B.pinfo.LAMEsfb[N][U][n]=-D*R[n]),n<z.SBPSY_l&&(Y(e0[n]>=0),B.pinfo.LAMEsfb[N][U][n]-=D*e0[n])}if(C.block_type==z.SHORT_TYPE)for(s=n,n=C.sfb_smin;n<z.SBMAX_s;n++)for(var S0=B.scalefac_band.s[n],R0=B.scalefac_band.s[n+1],A0=R0-S0,x0=0;x0<3;x0++){for(i=0,t=S0;t<R0;t++)i+=C.xr[f0]*C.xr[f0],f0++;i=Math.max(i/A0,1e-20),m=1e15,B.pinfo.en_s[N][U][3*n+x0]=m*i,B.pinfo.xfsf_s[N][U][3*n+x0]=m*w[s]*G[s]/A0,F.en.s[n][x0]>0?i=i/F.en.s[n][x0]:i=0,(A.ATHonly||A.ATHshort)&&(i=0),B.pinfo.thr_s[N][U][3*n+x0]=m*Math.max(i*F.thm.s[n][x0],B.ATH.s[n]),B.pinfo.LAMEsfb_s[N][U][3*n+x0]=-2*C.subblock_gain[x0],n<z.SBPSY_s&&(B.pinfo.LAMEsfb_s[N][U][3*n+x0]-=D*e0[s]),s++}B.pinfo.LAMEqss[N][U]=C.global_gain,B.pinfo.LAMEmainbits[N][U]=C.part2_3_length+C.part2_length,B.pinfo.LAMEsfbits[N][U]=C.part2_length,B.pinfo.over[N][U]=i0.over_count,B.pinfo.max_noise[N][U]=i0.max_noise*10,B.pinfo.over_noise[N][U]=i0.over_noise*10,B.pinfo.tot_noise[N][U]=i0.tot_noise*10,B.pinfo.over_SSD[N][U]=i0.over_SSD}}return Ae=f,Ae}var Me,xa;function Aa(){if(xa)return Me;xa=1;var y=Z0,M=y.System,V=y.Arrays,P=y.new_int,n0=y.assert,W=t1(),j=xe,Y=ce,z=Sa();function h0(){var x=null;this.qupvt=null,this.setModules=function(B){this.qupvt=B,x=B};function f(B){this.bits=0|B}var O=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function s0(B,n,s,t,i,m){var D=.5946/n;for(B=B>>1;B--!=0;)i[m++]=D>s[t++]?0:1,i[m++]=D>s[t++]?0:1}function Z(B,n,s,t,i,m){B=B>>1;var D=B%2;for(B=B>>1;B--!=0;){var e0,w,G,i0,f0,S0,R0,A0;e0=s[t++]*n,w=s[t++]*n,f0=0|e0,G=s[t++]*n,S0=0|w,i0=s[t++]*n,R0=0|G,e0+=x.adj43[f0],A0=0|i0,w+=x.adj43[S0],i[m++]=0|e0,G+=x.adj43[R0],i[m++]=0|w,i0+=x.adj43[A0],i[m++]=0|G,i[m++]=0|i0}if(D!=0){var e0,w,f0,S0;e0=s[t++]*n,w=s[t++]*n,f0=0|e0,S0=0|w,e0+=x.adj43[f0],w+=x.adj43[S0],i[m++]=0|e0,i[m++]=0|w}}function J(B,n,s,t,i){var m,D,e0=0,w,G=0,i0=0,f0=0,S0=n,R0=0,A0=S0,x0=0,w0=B,P0=0;for(w=i!=null&&t.global_gain==i.global_gain,t.block_type==W.SHORT_TYPE?D=38:D=21,m=0;m<=D;m++){var c1=-1;if((w||t.block_type==W.NORM_TYPE)&&(c1=t.global_gain-(t.scalefac[m]+(t.preflag!=0?x.pretab[m]:0)<<t.scalefac_scale+1)-t.subblock_gain[t.window[m]]*8),n0(t.width[m]>=0),w&&i.step[m]==c1)G!=0&&(Z(G,s,w0,P0,A0,x0),G=0),i0!=0&&(s0(i0,s,w0,P0,A0,x0),i0=0);else{var r=t.width[m];if(e0+t.width[m]>t.max_nonzero_coeff){var _;_=t.max_nonzero_coeff-e0+1,V.fill(n,t.max_nonzero_coeff,576,0),r=_,r<0&&(r=0),m=D+1}if(G==0&&i0==0&&(A0=S0,x0=R0,w0=B,P0=f0),i!=null&&i.sfb_count1>0&&m>=i.sfb_count1&&i.step[m]>0&&c1>=i.step[m]?(G!=0&&(Z(G,s,w0,P0,A0,x0),G=0,A0=S0,x0=R0,w0=B,P0=f0),i0+=r):(i0!=0&&(s0(i0,s,w0,P0,A0,x0),i0=0,A0=S0,x0=R0,w0=B,P0=f0),G+=r),r<=0){i0!=0&&(s0(i0,s,w0,P0,A0,x0),i0=0),G!=0&&(Z(G,s,w0,P0,A0,x0),G=0);break}}m<=D&&(R0+=t.width[m],f0+=t.width[m],e0+=t.width[m])}G!=0&&(Z(G,s,w0,P0,A0,x0),G=0),i0!=0&&(s0(i0,s,w0,P0,A0,x0),i0=0)}function K(B,n,s){var t=0,i=0;do{var m=B[n++],D=B[n++];t<m&&(t=m),i<D&&(i=D)}while(n<s);return t<i&&(t=i),t}function c(B,n,s,t,i,m){var D=j.ht[t].xlen*65536+j.ht[i].xlen,e0=0,w;do{var G=B[n++],i0=B[n++];G!=0&&(G>14&&(G=15,e0+=D),G*=16),i0!=0&&(i0>14&&(i0=15,e0+=D),G+=i0),e0+=j.largetbl[G]}while(n<s);return w=e0&65535,e0>>=16,e0>w&&(e0=w,t=i),m.bits+=e0,t}function o(B,n,s,t){var i=0,m=j.ht[1].hlen;do{var D=B[n+0]*2+B[n+1];n+=2,i+=m[D]}while(n<s);return t.bits+=i,1}function u(B,n,s,t,i){var m=0,D,e0=j.ht[t].xlen,w;t==2?w=j.table23:w=j.table56;do{var G=B[n+0]*e0+B[n+1];n+=2,m+=w[G]}while(n<s);return D=m&65535,m>>=16,m>D&&(m=D,t++),i.bits+=m,t}function S(B,n,s,t,i){var m=0,D=0,e0=0,w=j.ht[t].xlen,G=j.ht[t].hlen,i0=j.ht[t+1].hlen,f0=j.ht[t+2].hlen;do{var S0=B[n+0]*w+B[n+1];n+=2,m+=G[S0],D+=i0[S0],e0+=f0[S0]}while(n<s);var R0=t;return m>D&&(m=D,R0++),m>e0&&(m=e0,R0=t+2),i.bits+=m,R0}var e=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function l(B,n,s,t){var i=K(B,n,s);switch(i){case 0:return i;case 1:return o(B,n,s,t);case 2:case 3:return u(B,n,s,e[i-1],t);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return S(B,n,s,e[i-1],t);default:if(i>z.IXMAX_VAL)return t.bits=z.LARGE_BITS,-1;i-=15;var m;for(m=24;m<32&&!(j.ht[m].linmax>=i);m++);var D;for(D=m-8;D<24&&!(j.ht[D].linmax>=i);D++);return c(B,n,s,D,m,t)}}this.noquant_count_bits=function(B,n,s){var t=n.l3_enc,i=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(s!=null&&(s.sfb_count1=0);i>1&&!(t[i-1]|t[i-2]);i-=2);n.count1=i;for(var m=0,D=0;i>3;i-=4){var e0;if(((t[i-1]|t[i-2]|t[i-3]|t[i-4])&2147483647)>1)break;e0=((t[i-4]*2+t[i-3])*2+t[i-2])*2+t[i-1],m+=j.t32l[e0],D+=j.t33l[e0]}var w=m;if(n.count1table_select=0,m>D&&(w=D,n.count1table_select=1),n.count1bits=w,n.big_values=i,i==0)return w;if(n.block_type==W.SHORT_TYPE)m=3*B.scalefac_band.s[3],m>n.big_values&&(m=n.big_values),D=n.big_values;else if(n.block_type==W.NORM_TYPE){if(m=n.region0_count=B.bv_scf[i-2],D=n.region1_count=B.bv_scf[i-1],n0(m+D+2<W.SBPSY_l),D=B.scalefac_band.l[m+D+2],m=B.scalefac_band.l[m+1],D<i){var G=new f(w);n.table_select[2]=l(t,D,i,G),w=G.bits}}else n.region0_count=7,n.region1_count=W.SBMAX_l-1-7-1,m=B.scalefac_band.l[7+1],D=i,m>D&&(m=D);if(m=Math.min(m,i),D=Math.min(D,i),0<m){var G=new f(w);n.table_select[0]=l(t,0,m,G),w=G.bits}if(m<D){var G=new f(w);n.table_select[1]=l(t,m,D,G),w=G.bits}if(B.use_best_huffman==2&&(n.part2_3_length=w,best_huffman_divide(B,n),w=n.part2_3_length),s!=null&&n.block_type==W.NORM_TYPE){for(var i0=0;B.scalefac_band.l[i0]<n.big_values;)i0++;s.sfb_count1=i0}return w},this.count_bits=function(B,n,s,t){var i=s.l3_enc,m=z.IXMAX_VAL/x.IPOW20(s.global_gain);if(s.xrpow_max>m)return z.LARGE_BITS;if(J(n,i,x.IPOW20(s.global_gain),s,t),B.substep_shaping&2)for(var D=0,e0=s.global_gain+s.scalefac_scale,w=.634521682242439/x.IPOW20(e0),G=0;G<s.sfbmax;G++){var i0=s.width[G];if(B.pseudohalf[G]==0)D+=i0;else{var f0;for(f0=D,D+=i0;f0<D;++f0)i[f0]=n[f0]>=w?i[f0]:0}}return this.noquant_count_bits(B,s,t)};function R(B,n,s,t,i,m,D){for(var e0=n.big_values,w=0;w<=7+15;w++)t[w]=z.LARGE_BITS;for(var w=0;w<16;w++){var G=B.scalefac_band.l[w+1];if(G>=e0)break;var i0=0,f0=new f(i0),S0=l(s,0,G,f0);i0=f0.bits;for(var R0=0;R0<8;R0++){var A0=B.scalefac_band.l[w+R0+2];if(A0>=e0)break;var x0=i0;f0=new f(x0);var w0=l(s,G,A0,f0);x0=f0.bits,t[w+R0]>x0&&(t[w+R0]=x0,i[w+R0]=w,m[w+R0]=S0,D[w+R0]=w0)}}}function L(B,n,s,t,i,m,D,e0){for(var w=n.big_values,G=2;G<W.SBMAX_l+1;G++){var i0=B.scalefac_band.l[G];if(i0>=w)break;var f0=i[G-2]+n.count1bits;if(s.part2_3_length<=f0)break;var S0=new f(f0),R0=l(t,i0,w,S0);f0=S0.bits,!(s.part2_3_length<=f0)&&(s.assign(n),s.part2_3_length=f0,s.region0_count=m[G-2],s.region1_count=G-2-m[G-2],s.table_select[0]=D[G-2],s.table_select[1]=e0[G-2],s.table_select[2]=R0)}}this.best_huffman_divide=function(B,n){var s=new Y,t=n.l3_enc,i=P(7+15+1),m=P(7+15+1),D=P(7+15+1),e0=P(7+15+1);if(!(n.block_type==W.SHORT_TYPE&&B.mode_gr==1)){s.assign(n),n.block_type==W.NORM_TYPE&&(R(B,n,t,i,m,D,e0),L(B,s,n,t,i,m,D,e0));var w=s.big_values;if(!(w==0||(t[w-2]|t[w-1])>1)&&(w=n.count1+2,!(w>576))){s.assign(n),s.count1=w;for(var G=0,i0=0;w>s.big_values;w-=4){var f0=((t[w-4]*2+t[w-3])*2+t[w-2])*2+t[w-1];G+=j.t32l[f0],i0+=j.t33l[f0]}if(s.big_values=w,s.count1table_select=0,G>i0&&(G=i0,s.count1table_select=1),s.count1bits=G,s.block_type==W.NORM_TYPE)L(B,s,n,t,i,m,D,e0);else{if(s.part2_3_length=G,G=B.scalefac_band.l[7+1],G>w&&(G=w),G>0){var S0=new f(s.part2_3_length);s.table_select[0]=l(t,0,G,S0),s.part2_3_length=S0.bits}if(w>G){var S0=new f(s.part2_3_length);s.table_select[1]=l(t,G,w,S0),s.part2_3_length=S0.bits}n.part2_3_length>s.part2_3_length&&n.assign(s)}}}};var H=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],T=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],p=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],l0=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];h0.slen1_tab=p,h0.slen2_tab=l0;function b(B,n){for(var s,t=n.tt[1][B],i=n.tt[0][B],m=0;m<j.scfsi_band.length-1;m++){for(s=j.scfsi_band[m];s<j.scfsi_band[m+1]&&!(i.scalefac[s]!=t.scalefac[s]&&t.scalefac[s]>=0);s++);if(s==j.scfsi_band[m+1]){for(s=j.scfsi_band[m];s<j.scfsi_band[m+1];s++)t.scalefac[s]=-1;n.scfsi[B][m]=1}}var D=0,e0=0;for(s=0;s<11;s++)t.scalefac[s]!=-1&&(e0++,D<t.scalefac[s]&&(D=t.scalefac[s]));for(var w=0,G=0;s<W.SBPSY_l;s++)t.scalefac[s]!=-1&&(G++,w<t.scalefac[s]&&(w=t.scalefac[s]));for(var m=0;m<16;m++)if(D<H[m]&&w<T[m]){var i0=p[m]*e0+l0[m]*G;t.part2_length>i0&&(t.part2_length=i0,t.scalefac_compress=m)}}this.best_scalefac_store=function(B,n,s,t){var i=t.tt[n][s],m,D,e0,w,G=0;for(e0=0,m=0;m<i.sfbmax;m++){var i0=i.width[m];for(e0+=i0,w=-i0;w<0&&i.l3_enc[w+e0]==0;w++);w==0&&(i.scalefac[m]=G=-2)}if(i.scalefac_scale==0&&i.preflag==0){var f0=0;for(m=0;m<i.sfbmax;m++)i.scalefac[m]>0&&(f0|=i.scalefac[m]);if(!(f0&1)&&f0!=0){for(m=0;m<i.sfbmax;m++)i.scalefac[m]>0&&(i.scalefac[m]>>=1);i.scalefac_scale=G=1}}if(i.preflag==0&&i.block_type!=W.SHORT_TYPE&&B.mode_gr==2){for(m=11;m<W.SBPSY_l&&!(i.scalefac[m]<x.pretab[m]&&i.scalefac[m]!=-2);m++);if(m==W.SBPSY_l){for(m=11;m<W.SBPSY_l;m++)i.scalefac[m]>0&&(i.scalefac[m]-=x.pretab[m]);i.preflag=G=1}}for(D=0;D<4;D++)t.scfsi[s][D]=0;for(B.mode_gr==2&&n==1&&t.tt[0][s].block_type!=W.SHORT_TYPE&&t.tt[1][s].block_type!=W.SHORT_TYPE&&(b(s,t),G=0),m=0;m<i.sfbmax;m++)i.scalefac[m]==-2&&(i.scalefac[m]=0);G!=0&&(B.mode_gr==2?this.scale_bitcount(i):this.scale_bitcount_lsf(B,i))};function a(B,n){for(var s=0;s<n;++s)if(B[s]<0)return!1;return!0}var A=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],C=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],F=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(B){var n,s,t=0,i=0,m,D=B.scalefac;if(n0(a(D,B.sfbmax)),B.block_type==W.SHORT_TYPE)m=A,B.mixed_block_flag!=0&&(m=C);else if(m=F,B.preflag==0){for(s=11;s<W.SBPSY_l&&!(D[s]<x.pretab[s]);s++);if(s==W.SBPSY_l)for(B.preflag=1,s=11;s<W.SBPSY_l;s++)D[s]-=x.pretab[s]}for(s=0;s<B.sfbdivide;s++)t<D[s]&&(t=D[s]);for(;s<B.sfbmax;s++)i<D[s]&&(i=D[s]);for(B.part2_length=z.LARGE_BITS,n=0;n<16;n++)t<H[n]&&i<T[n]&&B.part2_length>m[n]&&(B.part2_length=m[n],B.scalefac_compress=n);return B.part2_length==z.LARGE_BITS};var N=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(B,n){var s,t,i,m,D,e0,w,G,i0=P(4),f0=n.scalefac;for(n.preflag!=0?s=2:s=0,w=0;w<4;w++)i0[w]=0;if(n.block_type==W.SHORT_TYPE){t=1;var S0=x.nr_of_sfb_block[s][t];for(G=0,i=0;i<4;i++)for(m=S0[i]/3,w=0;w<m;w++,G++)for(D=0;D<3;D++)f0[G*3+D]>i0[i]&&(i0[i]=f0[G*3+D])}else{t=0;var S0=x.nr_of_sfb_block[s][t];for(G=0,i=0;i<4;i++)for(m=S0[i],w=0;w<m;w++,G++)f0[G]>i0[i]&&(i0[i]=f0[G])}for(e0=!1,i=0;i<4;i++)i0[i]>N[s][i]&&(e0=!0);if(!e0){var R0,A0,x0,w0;for(n.sfb_partition_table=x.nr_of_sfb_block[s][t],i=0;i<4;i++)n.slen[i]=U[i0[i]];switch(R0=n.slen[0],A0=n.slen[1],x0=n.slen[2],w0=n.slen[3],s){case 0:n.scalefac_compress=(R0*5+A0<<4)+(x0<<2)+w0;break;case 1:n.scalefac_compress=400+(R0*5+A0<<2)+x0;break;case 2:n.scalefac_compress=500+R0*3+A0;break;default:M.err.printf(`intensity stereo not implemented yet
`);break}}if(!e0)for(n0(n.sfb_partition_table!=null),n.part2_length=0,i=0;i<4;i++)n.part2_length+=n.slen[i]*n.sfb_partition_table[i];return e0};var U=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(B){for(var n=2;n<=576;n+=2){for(var s=0,t;B.scalefac_band.l[++s]<n;);for(t=O[s][0];B.scalefac_band.l[t+1]>n;)t--;for(t<0&&(t=O[s][0]),B.bv_scf[n-2]=t,t=O[s][1];B.scalefac_band.l[t+B.bv_scf[n-2]+2]>n;)t--;t<0&&(t=O[s][1]),B.bv_scf[n-1]=t}}}return Me=h0,Me}var Re,Ma;function Ee(){if(Ma)return Re;Ma=1;var y=Z0,M=y.System,V=y.Arrays,P=y.new_byte,n0=y.new_float_n,W=y.new_int,j=y.assert,Y=Aa(),z=xe,h0=t1(),x=se;f.EQ=function(O,s0){return Math.abs(O)>Math.abs(s0)?Math.abs(O-s0)<=Math.abs(O)*1e-6:Math.abs(O-s0)<=Math.abs(s0)*1e-6},f.NEQ=function(O,s0){return!f.EQ(O,s0)};function f(){var O=Te(),s0=this,Z=32773,J=null,K=null,c=null,o=null;this.setModules=function(n,s,t,i){J=n,K=s,c=t,o=i};var u=null,S=0,e=0,l=0;this.getframebits=function(n){var s=n.internal_flags,t;s.bitrate_index!=0?t=z.bitrate_table[n.version][s.bitrate_index]:t=n.brate;var i=0|(n.version+1)*72e3*t/n.out_samplerate+s.padding;return 8*i};function R(n){M.arraycopy(n.header[n.w_ptr].buf,0,u,e,n.sideinfo_len),e+=n.sideinfo_len,S+=n.sideinfo_len*8,n.w_ptr=n.w_ptr+1&x.MAX_HEADER_BUF-1}function L(n,s,t){for(;t>0;){var i;l==0&&(l=8,e++,j(e<O.LAME_MAXMP3BUFFER),j(n.header[n.w_ptr].write_timing>=S),n.header[n.w_ptr].write_timing==S&&R(n),u[e]=0),i=Math.min(t,l),t-=i,l-=i,u[e]|=s>>t<<l,S+=i}}function H(n,s,t){for(;t>0;){var i;l==0&&(l=8,e++,j(e<O.LAME_MAXMP3BUFFER),u[e]=0),i=Math.min(t,l),t-=i,l-=i,u[e]|=s>>t<<l,S+=i}}function T(n,s){var t=n.internal_flags,i;if(s>=8&&(L(t,76,8),s-=8),s>=8&&(L(t,65,8),s-=8),s>=8&&(L(t,77,8),s-=8),s>=8&&(L(t,69,8),s-=8),s>=32){var m=c.getLameShortVersion();if(s>=32)for(i=0;i<m.length&&s>=8;++i)s-=8,L(t,m.charAt(i),8)}for(;s>=1;s-=1)L(t,t.ancillary_flag,1),t.ancillary_flag^=n.disable_reservoir?0:1}function p(n,s,t){for(var i=n.header[n.h_ptr].ptr;t>0;){var m=Math.min(t,8-(i&7));t-=m,n.header[n.h_ptr].buf[i>>3]|=s>>t<<8-(i&7)-m,i+=m}n.header[n.h_ptr].ptr=i}function l0(n,s){n<<=8;for(var t=0;t<8;t++)n<<=1,s<<=1,(s^n)&65536&&(s^=Z);return s}this.CRC_writeheader=function(n,s){var t=65535;t=l0(s[2]&255,t),t=l0(s[3]&255,t);for(var i=6;i<n.sideinfo_len;i++)t=l0(s[i]&255,t);s[4]=byte(t>>8),s[5]=byte(t&255)};function b(n,s){var t=n.internal_flags,i,m,D;if(i=t.l3_side,t.header[t.h_ptr].ptr=0,V.fill(t.header[t.h_ptr].buf,0,t.sideinfo_len,0),n.out_samplerate<16e3?p(t,4094,12):p(t,4095,12),p(t,n.version,1),p(t,4-3,2),p(t,n.error_protection?0:1,1),p(t,t.bitrate_index,4),p(t,t.samplerate_index,2),p(t,t.padding,1),p(t,n.extension,1),p(t,n.mode.ordinal(),2),p(t,t.mode_ext,2),p(t,n.copyright,1),p(t,n.original,1),p(t,n.emphasis,2),n.error_protection&&p(t,0,16),n.version==1){for(j(i.main_data_begin>=0),p(t,i.main_data_begin,9),t.channels_out==2?p(t,i.private_bits,3):p(t,i.private_bits,5),D=0;D<t.channels_out;D++){var e0;for(e0=0;e0<4;e0++)p(t,i.scfsi[D][e0],1)}for(m=0;m<2;m++)for(D=0;D<t.channels_out;D++){var w=i.tt[m][D];p(t,w.part2_3_length+w.part2_length,12),p(t,w.big_values/2,9),p(t,w.global_gain,8),p(t,w.scalefac_compress,4),w.block_type!=h0.NORM_TYPE?(p(t,1,1),p(t,w.block_type,2),p(t,w.mixed_block_flag,1),w.table_select[0]==14&&(w.table_select[0]=16),p(t,w.table_select[0],5),w.table_select[1]==14&&(w.table_select[1]=16),p(t,w.table_select[1],5),p(t,w.subblock_gain[0],3),p(t,w.subblock_gain[1],3),p(t,w.subblock_gain[2],3)):(p(t,0,1),w.table_select[0]==14&&(w.table_select[0]=16),p(t,w.table_select[0],5),w.table_select[1]==14&&(w.table_select[1]=16),p(t,w.table_select[1],5),w.table_select[2]==14&&(w.table_select[2]=16),p(t,w.table_select[2],5),j(0<=w.region0_count&&w.region0_count<16),j(0<=w.region1_count&&w.region1_count<8),p(t,w.region0_count,4),p(t,w.region1_count,3)),p(t,w.preflag,1),p(t,w.scalefac_scale,1),p(t,w.count1table_select,1)}}else for(j(i.main_data_begin>=0),p(t,i.main_data_begin,8),p(t,i.private_bits,t.channels_out),m=0,D=0;D<t.channels_out;D++){var w=i.tt[m][D];p(t,w.part2_3_length+w.part2_length,12),p(t,w.big_values/2,9),p(t,w.global_gain,8),p(t,w.scalefac_compress,9),w.block_type!=h0.NORM_TYPE?(p(t,1,1),p(t,w.block_type,2),p(t,w.mixed_block_flag,1),w.table_select[0]==14&&(w.table_select[0]=16),p(t,w.table_select[0],5),w.table_select[1]==14&&(w.table_select[1]=16),p(t,w.table_select[1],5),p(t,w.subblock_gain[0],3),p(t,w.subblock_gain[1],3),p(t,w.subblock_gain[2],3)):(p(t,0,1),w.table_select[0]==14&&(w.table_select[0]=16),p(t,w.table_select[0],5),w.table_select[1]==14&&(w.table_select[1]=16),p(t,w.table_select[1],5),w.table_select[2]==14&&(w.table_select[2]=16),p(t,w.table_select[2],5),j(0<=w.region0_count&&w.region0_count<16),j(0<=w.region1_count&&w.region1_count<8),p(t,w.region0_count,4),p(t,w.region1_count,3)),p(t,w.scalefac_scale,1),p(t,w.count1table_select,1)}n.error_protection&&CRC_writeheader(t,t.header[t.h_ptr].buf);{var G=t.h_ptr;j(t.header[G].ptr==t.sideinfo_len*8),t.h_ptr=G+1&x.MAX_HEADER_BUF-1,t.header[t.h_ptr].write_timing=t.header[G].write_timing+s,t.h_ptr==t.w_ptr&&M.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function a(n,s){var t=z.ht[s.count1table_select+32],i,m=0,D=s.big_values,e0=s.big_values;for(j(s.count1table_select<2),i=(s.count1-s.big_values)/4;i>0;--i){var w=0,G=0,i0;i0=s.l3_enc[D+0],i0!=0&&(G+=8,s.xr[e0+0]<0&&w++),i0=s.l3_enc[D+1],i0!=0&&(G+=4,w*=2,s.xr[e0+1]<0&&w++),i0=s.l3_enc[D+2],i0!=0&&(G+=2,w*=2,s.xr[e0+2]<0&&w++),i0=s.l3_enc[D+3],i0!=0&&(G++,w*=2,s.xr[e0+3]<0&&w++),D+=4,e0+=4,L(n,w+t.table[G],t.hlen[G]),m+=t.hlen[G]}return m}function A(n,s,t,i,m){var D=z.ht[s],e0=0;if(s==0)return e0;for(var w=t;w<i;w+=2){var G=0,i0=0,f0=D.xlen,S0=D.xlen,R0=0,A0=m.l3_enc[w],x0=m.l3_enc[w+1];if(A0!=0&&(m.xr[w]<0&&R0++,G--),s>15){if(A0>14){var w0=A0-15;j(w0<=D.linmax),R0|=w0<<1,i0=f0,A0=15}if(x0>14){var P0=x0-15;j(P0<=D.linmax),R0<<=f0,R0|=P0,i0+=f0,x0=15}S0=16}x0!=0&&(R0<<=1,m.xr[w+1]<0&&R0++,G--),A0=A0*S0+x0,i0-=G,G+=D.hlen[A0],L(n,D.table[A0],G),L(n,R0,i0),e0+=G+i0}return e0}function C(n,s){var t=3*n.scalefac_band.s[3];t>s.big_values&&(t=s.big_values);var i=A(n,s.table_select[0],0,t,s);return i+=A(n,s.table_select[1],t,s.big_values,s),i}function F(n,s){var t,i,m,D;t=s.big_values;var e0=s.region0_count+1;return j(e0<n.scalefac_band.l.length),m=n.scalefac_band.l[e0],e0+=s.region1_count+1,j(e0<n.scalefac_band.l.length),D=n.scalefac_band.l[e0],m>t&&(m=t),D>t&&(D=t),i=A(n,s.table_select[0],0,m,s),i+=A(n,s.table_select[1],m,D,s),i+=A(n,s.table_select[2],D,t,s),i}function N(n){var s,t,i,m,D=0,e0=n.internal_flags,w=e0.l3_side;if(n.version==1)for(s=0;s<2;s++)for(t=0;t<e0.channels_out;t++){var G=w.tt[s][t],i0=Y.slen1_tab[G.scalefac_compress],f0=Y.slen2_tab[G.scalefac_compress];for(m=0,i=0;i<G.sfbdivide;i++)G.scalefac[i]!=-1&&(L(e0,G.scalefac[i],i0),m+=i0);for(;i<G.sfbmax;i++)G.scalefac[i]!=-1&&(L(e0,G.scalefac[i],f0),m+=f0);j(m==G.part2_length),G.block_type==h0.SHORT_TYPE?m+=C(e0,G):m+=F(e0,G),m+=a(e0,G),j(m==G.part2_3_length+G.part2_length),D+=m}else for(s=0,t=0;t<e0.channels_out;t++){var G=w.tt[s][t],S0,R0,A0=0;if(j(G.sfb_partition_table!=null),m=0,i=0,R0=0,G.block_type==h0.SHORT_TYPE){for(;R0<4;R0++){var x0=G.sfb_partition_table[R0]/3,w0=G.slen[R0];for(S0=0;S0<x0;S0++,i++)L(e0,Math.max(G.scalefac[i*3+0],0),w0),L(e0,Math.max(G.scalefac[i*3+1],0),w0),L(e0,Math.max(G.scalefac[i*3+2],0),w0),A0+=3*w0}m+=C(e0,G)}else{for(;R0<4;R0++){var x0=G.sfb_partition_table[R0],w0=G.slen[R0];for(S0=0;S0<x0;S0++,i++)L(e0,Math.max(G.scalefac[i],0),w0),A0+=w0}m+=F(e0,G)}m+=a(e0,G),j(m==G.part2_3_length),j(A0==G.part2_length),D+=A0+m}return D}function U(){this.total=0}function B(n,s){var t=n.internal_flags,i,m,D,e0,w;return w=t.w_ptr,e0=t.h_ptr-1,e0==-1&&(e0=x.MAX_HEADER_BUF-1),i=t.header[e0].write_timing-S,s.total=i,i>=0&&(m=1+e0-w,e0<w&&(m=1+e0-w+x.MAX_HEADER_BUF),i-=m*8*t.sideinfo_len),D=s0.getframebits(n),i+=D,s.total+=D,s.total%8!=0?s.total=1+s.total/8:s.total=s.total/8,s.total+=e+1,i<0&&M.err.println(`strange error flushing buffer ... 
`),i}this.flush_bitstream=function(n){var s=n.internal_flags,t,i,m=s.h_ptr-1;if(m==-1&&(m=x.MAX_HEADER_BUF-1),t=s.l3_side,!((i=B(n,new U))<0)){if(T(n,i),j(s.header[m].write_timing+this.getframebits(n)==S),s.ResvSize=0,t.main_data_begin=0,s.findReplayGain){var D=J.GetTitleGain(s.rgdata);j(NEQ(D,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),s.RadioGain=Math.floor(D*10+.5)|0}s.findPeakSample&&(s.noclipGainChange=Math.ceil(Math.log10(s.PeakSample/32767)*20*10)|0,s.noclipGainChange>0&&(EQ(n.scale,1)||EQ(n.scale,0))?s.noclipScale=Math.floor(32767/s.PeakSample*100)/100:s.noclipScale=-1)}},this.add_dummy_byte=function(n,s,t){for(var i=n.internal_flags,m;t-- >0;)for(H(i,s,8),m=0;m<x.MAX_HEADER_BUF;++m)i.header[m].write_timing+=8},this.format_bitstream=function(n){var s=n.internal_flags,t;t=s.l3_side;var i=this.getframebits(n);T(n,t.resvDrain_pre),b(n,i);var m=8*s.sideinfo_len;if(m+=N(n),T(n,t.resvDrain_post),m+=t.resvDrain_post,t.main_data_begin+=(i-m)/8,B(n,new U)!=s.ResvSize&&M.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),t.main_data_begin*8!=s.ResvSize&&(M.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*t.main_data_begin,s.ResvSize,t.resvDrain_post,t.resvDrain_pre,8*s.sideinfo_len,m-t.resvDrain_post-8*s.sideinfo_len,m,m%8,i),M.err.println("This is a fatal error.  It has several possible causes:"),M.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),M.err.println(" 9%%  Your system is overclocked"),M.err.println(" 1%%  bug in LAME encoding library"),s.ResvSize=t.main_data_begin*8),S>1e9){var D;for(D=0;D<x.MAX_HEADER_BUF;++D)s.header[D].write_timing-=S;S=0}return 0},this.copy_buffer=function(n,s,t,i,m){var D=e+1;if(D<=0)return 0;if(i!=0&&D>i)return-1;if(M.arraycopy(u,0,s,t,D),e=-1,l=0,m!=0){var e0=W(1);if(e0[0]=n.nMusicCRC,o.updateMusicCRC(e0,s,t,D),n.nMusicCRC=e0[0],D>0&&(n.VBR_seek_table.nBytesWritten+=D),n.decode_on_the_fly){for(var w=n0([2,1152]),G=D,i0=-1,f0;i0!=0;)if(i0=K.hip_decode1_unclipped(n.hip,s,t,G,w[0],w[1]),G=0,i0==-1&&(i0=0),i0>0){if(n.findPeakSample){for(f0=0;f0<i0;f0++)w[0][f0]>n.PeakSample?n.PeakSample=w[0][f0]:-w[0][f0]>n.PeakSample&&(n.PeakSample=-w[0][f0]);if(n.channels_out>1)for(f0=0;f0<i0;f0++)w[1][f0]>n.PeakSample?n.PeakSample=w[1][f0]:-w[1][f0]>n.PeakSample&&(n.PeakSample=-w[1][f0])}if(n.findReplayGain&&J.AnalyzeSamples(n.rgdata,w[0],0,w[1],0,i0,n.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return D},this.init_bit_stream_w=function(n){u=P(O.LAME_MAXMP3BUFFER),n.h_ptr=n.w_ptr=0,n.header[n.h_ptr].write_timing=0,e=-1,l=0,S=0}}return Re=f,Re}var Be,Ra;function Te(){if(Ra)return Be;Ra=1;var y=Z0,M=y.System,V=y.VbrMode,P=y.ShortBlock,n0=y.new_float,W=y.new_int_n,j=y.new_short_n,Y=y.assert,z=Qa,h0=za,x=se,f=Mt,O=Et,s0=Ct,Z=Ee(),J=xe,K=t1();function c(){var o=P1,u=this,S=128*1024;c.V9=410,c.V8=420,c.V7=430,c.V6=440,c.V5=450,c.V4=460,c.V3=470,c.V2=480,c.V1=490,c.V0=500,c.R3MIX=1e3,c.STANDARD=1001,c.EXTREME=1002,c.INSANE=1003,c.STANDARD_FAST=1004,c.EXTREME_FAST=1005,c.MEDIUM=1006,c.MEDIUM_FAST=1007;var e=16384+S;c.LAME_MAXMP3BUFFER=e;var l,R,L,H,T,p=new z,l0,b,a;this.enc=new K,this.setModules=function(r,_,d0,E0,V0,N0,y0,T0,F0){l=r,R=_,L=d0,H=E0,T=V0,l0=N0,b=T0,a=F0,this.enc.setModules(R,p,H,l0)};function A(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=n0(K.SBMAX_l),this.bo_s_weight=n0(K.SBMAX_s)}function C(){this.lowerlimit=0}function F(r,_){this.lowpass=_}var N=4294479419;function U(r){var _;return r.class_id=N,_=r.internal_flags=new x,r.mode=o.NOT_SET,r.original=1,r.in_samplerate=44100,r.num_channels=2,r.num_samples=-1,r.bWriteVbrTag=!0,r.quality=-1,r.short_blocks=null,_.subblock_gain=-1,r.lowpassfreq=0,r.highpassfreq=0,r.lowpasswidth=-1,r.highpasswidth=-1,r.VBR=V.vbr_off,r.VBR_q=4,r.ATHcurve=-1,r.VBR_mean_bitrate_kbps=128,r.VBR_min_bitrate_kbps=0,r.VBR_max_bitrate_kbps=0,r.VBR_hard_min=0,_.VBR_min_bitrate=1,_.VBR_max_bitrate=13,r.quant_comp=-1,r.quant_comp_short=-1,r.msfix=-1,_.resample_ratio=1,_.OldValue[0]=180,_.OldValue[1]=180,_.CurrentStep[0]=4,_.CurrentStep[1]=4,_.masking_lower=1,_.nsPsy.attackthre=-1,_.nsPsy.attackthre_s=-1,r.scale=-1,r.athaa_type=-1,r.ATHtype=-1,r.athaa_loudapprox=-1,r.athaa_sensitivity=0,r.useTemporal=null,r.interChRatio=-1,_.mf_samples_to_encode=K.ENCDELAY+K.POSTDELAY,r.encoder_padding=0,_.mf_size=K.ENCDELAY-K.MDCTDELAY,r.findReplayGain=!1,r.decode_on_the_fly=!1,_.decode_on_the_fly=!1,_.findReplayGain=!1,_.findPeakSample=!1,_.RadioGain=0,_.AudiophileGain=0,_.noclipGainChange=0,_.noclipScale=-1,r.preset=0,r.write_id3tag_automatic=!0,0}this.lame_init=function(){var r=new h0;return U(r),r.lame_allocated_gfp=1,r};function B(r){return r>1?0:r<=0?1:Math.cos(Math.PI/2*r)}this.nearestBitrateFullIndex=function(r){var _=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],d0=0,E0=0,V0=0,N0=0;N0=_[16],V0=16,E0=_[16],d0=16;for(var y0=0;y0<16;y0++)if(Math.max(r,_[y0+1])!=r){N0=_[y0+1],V0=y0+1,E0=_[y0],d0=y0;break}return N0-r>r-E0?d0:V0};function n(r,_){var d0=44100;return _>=48e3?d0=48e3:_>=44100?d0=44100:_>=32e3?d0=32e3:_>=24e3?d0=24e3:_>=22050?d0=22050:_>=16e3?d0=16e3:_>=12e3?d0=12e3:_>=11025?d0=11025:_>=8e3&&(d0=8e3),r==-1?d0:(r<=15960&&(d0=44100),r<=15250&&(d0=32e3),r<=11220&&(d0=24e3),r<=9970&&(d0=22050),r<=7230&&(d0=16e3),r<=5420&&(d0=12e3),r<=4510&&(d0=11025),r<=3970&&(d0=8e3),_<d0?_>44100?48e3:_>32e3?44100:_>24e3?32e3:_>22050?24e3:_>16e3?22050:_>12e3?16e3:_>11025?12e3:_>8e3?11025:8e3:d0)}function s(r,_){switch(r){case 44100:return _.version=1,0;case 48e3:return _.version=1,1;case 32e3:return _.version=1,2;case 22050:return _.version=0,0;case 24e3:return _.version=0,1;case 16e3:return _.version=0,2;case 11025:return _.version=0,0;case 12e3:return _.version=0,1;case 8e3:return _.version=0,2;default:return _.version=0,-1}}function t(r,_,d0){d0<16e3&&(_=2);for(var E0=J.bitrate_table[_][1],V0=2;V0<=14;V0++)J.bitrate_table[_][V0]>0&&Math.abs(J.bitrate_table[_][V0]-r)<Math.abs(E0-r)&&(E0=J.bitrate_table[_][V0]);return E0}function i(r,_,d0){d0<16e3&&(_=2);for(var E0=0;E0<=14;E0++)if(J.bitrate_table[_][E0]>0&&J.bitrate_table[_][E0]==r)return E0;return-1}function m(r,_){var d0=[new F(8,2e3),new F(16,3700),new F(24,3900),new F(32,5500),new F(40,7e3),new F(48,7500),new F(56,1e4),new F(64,11e3),new F(80,13500),new F(96,15100),new F(112,15600),new F(128,17e3),new F(160,17500),new F(192,18600),new F(224,19400),new F(256,19700),new F(320,20500)],E0=u.nearestBitrateFullIndex(_);r.lowerlimit=d0[E0].lowpass}function D(r){var _=r.internal_flags,d0=32,E0=-1;if(_.lowpass1>0){for(var V0=999,N0=0;N0<=31;N0++){var y0=N0/31;y0>=_.lowpass2&&(d0=Math.min(d0,N0)),_.lowpass1<y0&&y0<_.lowpass2&&(V0=Math.min(V0,N0))}V0==999?_.lowpass1=(d0-.75)/31:_.lowpass1=(V0-.75)/31,_.lowpass2=d0/31}if(_.highpass2>0&&_.highpass2<.9*(.75/31)&&(_.highpass1=0,_.highpass2=0,M.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),_.highpass2>0){for(var T0=-1,N0=0;N0<=31;N0++){var y0=N0/31;y0<=_.highpass1&&(E0=Math.max(E0,N0)),_.highpass1<y0&&y0<_.highpass2&&(T0=Math.max(T0,N0))}_.highpass1=E0/31,T0==-1?_.highpass2=(E0+.75)/31:_.highpass2=(T0+.75)/31}for(var N0=0;N0<32;N0++){var F0,I0,y0=N0/31;_.highpass2>_.highpass1?F0=B((_.highpass2-y0)/(_.highpass2-_.highpass1+1e-20)):F0=1,_.lowpass2>_.lowpass1?I0=B((y0-_.lowpass1)/(_.lowpass2-_.lowpass1+1e-20)):I0=1,_.amp_filter[N0]=F0*I0}}function e0(r){var _=r.internal_flags;switch(r.quality){default:case 9:_.psymodel=0,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 8:r.quality=7;case 7:_.psymodel=1,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 6:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 5:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 4:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 3:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 2:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 1:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 0:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break}}function w(r){var _=r.internal_flags;r.frameNum=0,r.write_id3tag_automatic&&b.id3tag_write_v2(r),_.bitrate_stereoMode_Hist=W([16,4+1]),_.bitrate_blockType_Hist=W([16,4+1+1]),_.PeakSample=0,r.bWriteVbrTag&&l0.InitVbrTag(r)}this.lame_init_params=function(r){var _=r.internal_flags;if(_.Class_ID=0,_.ATH==null&&(_.ATH=new f),_.PSY==null&&(_.PSY=new A),_.rgdata==null&&(_.rgdata=new O),_.channels_in=r.num_channels,_.channels_in==1&&(r.mode=o.MONO),_.channels_out=r.mode==o.MONO?1:2,_.mode_ext=K.MPG_MD_MS_LR,r.mode==o.MONO&&(r.force_ms=!1),r.VBR==V.vbr_off&&r.VBR_mean_bitrate_kbps!=128&&r.brate==0&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==V.vbr_off||r.VBR==V.vbr_mtrh||r.VBR==V.vbr_mt||(r.free_format=!1),r.VBR==V.vbr_off&&r.brate==0&&Z.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==V.vbr_off&&r.compression_ratio>0&&(r.out_samplerate==0&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|r.out_samplerate*16*_.channels_out/(1e3*r.compression_ratio),_.samplerate_index=s(r.out_samplerate,r),r.free_format||(r.brate=t(r.brate,r.version,r.out_samplerate))),r.out_samplerate!=0&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),r.lowpassfreq==0){var d0=16e3;switch(r.VBR){case V.vbr_off:{var E0=new C;m(E0,r.brate),d0=E0.lowerlimit;break}case V.vbr_abr:{var E0=new C;m(E0,r.VBR_mean_bitrate_kbps),d0=E0.lowerlimit;break}case V.vbr_rh:{var V0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var N0=V0[r.VBR_q],y0=V0[r.VBR_q+1],T0=r.VBR_q_frac;d0=linear_int(N0,y0,T0)}else d0=19500;break}default:{var V0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var N0=V0[r.VBR_q],y0=V0[r.VBR_q+1],T0=r.VBR_q_frac;d0=linear_int(N0,y0,T0)}else d0=19500}}r.mode==o.MONO&&(r.VBR==V.vbr_off||r.VBR==V.vbr_abr)&&(d0*=1.5),r.lowpassfreq=d0|0}if(r.out_samplerate==0&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=n(r.lowpassfreq|0,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==V.vbr_off&&(r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.brate)),r.VBR==V.vbr_abr&&(r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,_.findPeakSample=!1),_.findReplayGain=r.findReplayGain,_.decode_on_the_fly=r.decode_on_the_fly,_.decode_on_the_fly&&(_.findPeakSample=!0),_.findReplayGain&&l.InitGainAnalysis(_.rgdata,r.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(_.decode_on_the_fly&&!r.decode_only&&(_.hip!=null&&a.hip_decode_exit(_.hip),_.hip=a.hip_decode_init()),_.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*_.mode_gr,r.encoder_delay=K.ENCDELAY,_.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case V.vbr_mt:case V.vbr_rh:case V.vbr_mtrh:{var F0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=F0[r.VBR_q]}break;case V.vbr_abr:r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.brate);break}if(r.mode==o.NOT_SET&&(r.mode=o.JOINT_STEREO),r.highpassfreq>0?(_.highpass1=2*r.highpassfreq,r.highpasswidth>=0?_.highpass2=2*(r.highpassfreq+r.highpasswidth):_.highpass2=(1+0)*2*r.highpassfreq,_.highpass1/=r.out_samplerate,_.highpass2/=r.out_samplerate):(_.highpass1=0,_.highpass2=0),r.lowpassfreq>0?(_.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(_.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),_.lowpass1<0&&(_.lowpass1=0)):_.lowpass1=(1-0)*2*r.lowpassfreq,_.lowpass1/=r.out_samplerate,_.lowpass2/=r.out_samplerate):(_.lowpass1=0,_.lowpass2=0),D(r),_.samplerate_index=s(r.out_samplerate,r),_.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==V.vbr_off){if(r.free_format)_.bitrate_index=0;else if(r.brate=t(r.brate,r.version,r.out_samplerate),_.bitrate_index=i(r.brate,r.version,r.out_samplerate),_.bitrate_index<=0)return r.internal_flags=null,-1}else _.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),_.pinfo!=null&&(r.bWriteVbrTag=!1),R.init_bit_stream_w(_);for(var I0=_.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),c0=0;c0<K.SBMAX_l+1;c0++)_.scalefac_band.l[c0]=H.sfBandIndex[I0].l[c0];for(var c0=0;c0<K.PSFB21+1;c0++){var G0=(_.scalefac_band.l[22]-_.scalefac_band.l[21])/K.PSFB21,e1=_.scalefac_band.l[21]+c0*G0;_.scalefac_band.psfb21[c0]=e1}_.scalefac_band.psfb21[K.PSFB21]=576;for(var c0=0;c0<K.SBMAX_s+1;c0++)_.scalefac_band.s[c0]=H.sfBandIndex[I0].s[c0];for(var c0=0;c0<K.PSFB12+1;c0++){var G0=(_.scalefac_band.s[13]-_.scalefac_band.s[12])/K.PSFB12,e1=_.scalefac_band.s[12]+c0*G0;_.scalefac_band.psfb12[c0]=e1}_.scalefac_band.psfb12[K.PSFB12]=192,r.version==1?_.sideinfo_len=_.channels_out==1?4+17:4+32:_.sideinfo_len=_.channels_out==1?4+9:4+17,r.error_protection&&(_.sideinfo_len+=2),w(r),_.Class_ID=N;{var D0;for(D0=0;D0<19;D0++)_.nsPsy.pefirbuf[D0]=700*_.mode_gr*_.channels_out;r.ATHtype==-1&&(r.ATHtype=4)}switch(Y(r.VBR_q<=9),Y(r.VBR_q>=0),r.VBR){case V.vbr_mt:r.VBR=V.vbr_mtrh;case V.vbr_mtrh:{r.useTemporal==null&&(r.useTemporal=!1),L.apply_preset(r,500-r.VBR_q*10,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),_.PSY.mask_adjust=r.maskingadjust,_.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=r.out_samplerate>44e3,_.iteration_loop=new VBRNewIterationLoop(T);break}case V.vbr_rh:{L.apply_preset(r,500-r.VBR_q*10,0),_.PSY.mask_adjust=r.maskingadjust,_.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),_.iteration_loop=new VBROldIterationLoop(T);break}default:{var v;_.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),v=r.VBR,v==V.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),L.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=v,_.PSY.mask_adjust=r.maskingadjust,_.PSY.mask_adjust_short=r.maskingadjust_short,v==V.vbr_off?_.iteration_loop=new s0(T):_.iteration_loop=new ABRIterationLoop(T);break}}if(Y(r.scale>=0),r.VBR!=V.vbr_off){if(_.VBR_min_bitrate=1,_.VBR_max_bitrate=14,r.out_samplerate<16e3&&(_.VBR_max_bitrate=8),r.VBR_min_bitrate_kbps!=0&&(r.VBR_min_bitrate_kbps=t(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),_.VBR_min_bitrate=i(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),_.VBR_min_bitrate<0)||r.VBR_max_bitrate_kbps!=0&&(r.VBR_max_bitrate_kbps=t(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),_.VBR_max_bitrate=i(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),_.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=J.bitrate_table[r.version][_.VBR_min_bitrate],r.VBR_max_bitrate_kbps=J.bitrate_table[r.version][_.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(J.bitrate_table[r.version][_.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(J.bitrate_table[r.version][_.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(_.PSY.mask_adjust+=r.tune_value_a,_.PSY.mask_adjust_short+=r.tune_value_a),e0(r),Y(r.scale>=0),r.athaa_type<0?_.ATH.useAdjust=3:_.ATH.useAdjust=r.athaa_type,_.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),r.short_blocks==null&&(r.short_blocks=P.short_block_allowed),r.short_blocks==P.short_block_allowed&&(r.mode==o.JOINT_STEREO||r.mode==o.STEREO)&&(r.short_blocks=P.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=r.exp_nspsytune|1,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=z.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=z.NSATTACKTHRE_S),Y(r.scale>=0),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),r.useTemporal==null&&(r.useTemporal=!0),_.slot_lag=_.frac_SpF=0,r.VBR==V.vbr_off&&(_.slot_lag=_.frac_SpF=(r.version+1)*72e3*r.brate%r.out_samplerate|0),H.iteration_init(r),p.psymodel_init(r),Y(r.scale>=0),0};function G(r,_){(r.in_buffer_0==null||r.in_buffer_nsamples<_)&&(r.in_buffer_0=n0(_),r.in_buffer_1=n0(_),r.in_buffer_nsamples=_)}this.lame_encode_flush=function(r,_,d0,E0){var V0=r.internal_flags,N0=j([2,1152]),y0=0,T0,F0,I0,c0,G0=V0.mf_samples_to_encode-K.POSTDELAY,e1=i0(r);if(V0.mf_samples_to_encode<1)return 0;for(T0=0,r.in_samplerate!=r.out_samplerate&&(G0+=16*r.out_samplerate/r.in_samplerate),I0=r.framesize-G0%r.framesize,I0<576&&(I0+=r.framesize),r.encoder_padding=I0,c0=(G0+I0)/r.framesize;c0>0&&y0>=0;){var D0=e1-V0.mf_size,v=r.frameNum;D0*=r.in_samplerate,D0/=r.out_samplerate,D0>1152&&(D0=1152),D0<1&&(D0=1),F0=E0-T0,E0==0&&(F0=0),y0=this.lame_encode_buffer(r,N0[0],N0[1],D0,_,d0,F0),d0+=y0,T0+=y0,c0-=v!=r.frameNum?1:0}if(V0.mf_samples_to_encode=0,y0<0||(F0=E0-T0,E0==0&&(F0=0),R.flush_bitstream(r),y0=R.copy_buffer(V0,_,d0,F0,1),y0<0))return y0;if(d0+=y0,T0+=y0,F0=E0-T0,E0==0&&(F0=0),r.write_id3tag_automatic){if(b.id3tag_write_v1(r),y0=R.copy_buffer(V0,_,d0,F0,0),y0<0)return y0;T0+=y0}return T0},this.lame_encode_buffer=function(r,_,d0,E0,V0,N0,y0){var T0=r.internal_flags,F0=[null,null];if(T0.Class_ID!=N)return-3;if(E0==0)return 0;G(T0,E0),F0[0]=T0.in_buffer_0,F0[1]=T0.in_buffer_1;for(var I0=0;I0<E0;I0++)F0[0][I0]=_[I0],T0.channels_in>1&&(F0[1][I0]=d0[I0]);return f0(r,F0[0],F0[1],E0,V0,N0,y0)};function i0(r){var _=K.BLKSIZE+r.framesize-K.FFTOFFSET;return _=Math.max(_,512+r.framesize-32),_}function f0(r,_,d0,E0,V0,N0,y0){var T0=r.internal_flags,F0=0,I0,c0,G0,e1,D0,v=[null,null],h=[null,null];if(T0.Class_ID!=N)return-3;if(E0==0)return 0;if(D0=R.copy_buffer(T0,V0,N0,y0,0),D0<0)return D0;if(N0+=D0,F0+=D0,h[0]=_,h[1]=d0,Z.NEQ(r.scale,0)&&Z.NEQ(r.scale,1))for(c0=0;c0<E0;++c0)h[0][c0]*=r.scale,T0.channels_out==2&&(h[1][c0]*=r.scale);if(Z.NEQ(r.scale_left,0)&&Z.NEQ(r.scale_left,1))for(c0=0;c0<E0;++c0)h[0][c0]*=r.scale_left;if(Z.NEQ(r.scale_right,0)&&Z.NEQ(r.scale_right,1))for(c0=0;c0<E0;++c0)h[1][c0]*=r.scale_right;if(r.num_channels==2&&T0.channels_out==1)for(c0=0;c0<E0;++c0)h[0][c0]=.5*(h[0][c0]+h[1][c0]),h[1][c0]=0;e1=i0(r),v[0]=T0.mfbuf[0],v[1]=T0.mfbuf[1];for(var E=0;E0>0;){var I=[null,null],q=0,d=0;I[0]=h[0],I[1]=h[1];var k=new R0;if(c1(r,v,I,E,E0,k),q=k.n_in,d=k.n_out,T0.findReplayGain&&!T0.decode_on_the_fly&&l.AnalyzeSamples(T0.rgdata,v[0],T0.mf_size,v[1],T0.mf_size,d,T0.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(E0-=q,E+=q,T0.channels_out==2,T0.mf_size+=d,Y(T0.mf_size<=x.MFSIZE),T0.mf_samples_to_encode<1&&(T0.mf_samples_to_encode=K.ENCDELAY+K.POSTDELAY),T0.mf_samples_to_encode+=d,T0.mf_size>=e1){var $=y0-F0;if(y0==0&&($=0),I0=S0(r,v[0],v[1],V0,N0,$),I0<0)return I0;for(N0+=I0,F0+=I0,T0.mf_size-=r.framesize,T0.mf_samples_to_encode-=r.framesize,G0=0;G0<T0.channels_out;G0++)for(c0=0;c0<T0.mf_size;c0++)v[G0][c0]=v[G0][c0+r.framesize]}}return F0}function S0(r,_,d0,E0,V0,N0){var y0=u.enc.lame_encode_mp3_frame(r,_,d0,E0,V0,N0);return r.frameNum++,y0}function R0(){this.n_in=0,this.n_out=0}function A0(){this.num_used=0}function x0(r,_){return _!=0?x0(_,r%_):r}function w0(r,_,d0){var E0=Math.PI*_;r/=d0,r<0&&(r=0),r>1&&(r=1);var V0=r-.5,N0=.42-.5*Math.cos(2*r*Math.PI)+.08*Math.cos(4*r*Math.PI);return Math.abs(V0)<1e-9?E0/Math.PI:N0*Math.sin(d0*E0*V0)/(Math.PI*d0*V0)}function P0(r,_,d0,E0,V0,N0,y0,T0,F0){var I0=r.internal_flags,c0,G0=0,e1,D0=r.out_samplerate/x0(r.out_samplerate,r.in_samplerate);D0>x.BPC&&(D0=x.BPC);var v=Math.abs(I0.resample_ratio-Math.floor(.5+I0.resample_ratio))<1e-4?1:0,h=1/I0.resample_ratio;h>1&&(h=1);var E=31;E%2==0&&--E,E+=v;var I=E+1;if(I0.fill_buffer_resample_init==0){for(I0.inbuf_old[0]=n0(I),I0.inbuf_old[1]=n0(I),c0=0;c0<=2*D0;++c0)I0.blackfilt[c0]=n0(I);for(I0.itime[0]=0,I0.itime[1]=0,G0=0;G0<=2*D0;G0++){var q=0,d=(G0-D0)/(2*D0);for(c0=0;c0<=E;c0++)q+=I0.blackfilt[G0][c0]=w0(c0-d,h,E);for(c0=0;c0<=E;c0++)I0.blackfilt[G0][c0]/=q}I0.fill_buffer_resample_init=1}var k=I0.inbuf_old[F0];for(e1=0;e1<E0;e1++){var $,X;if($=e1*I0.resample_ratio,G0=0|Math.floor($-I0.itime[F0]),E+G0-E/2>=y0)break;var d=$-I0.itime[F0]-(G0+.5*(E%2));X=0|Math.floor(d*2*D0+D0+.5);var a0=0;for(c0=0;c0<=E;++c0){var Q=0|c0+G0-E/2,t0;t0=Q<0?k[I+Q]:V0[N0+Q],a0+=t0*I0.blackfilt[X][c0]}_[d0+e1]=a0}if(T0.num_used=Math.min(y0,E+G0-E/2),I0.itime[F0]+=T0.num_used-e1*I0.resample_ratio,T0.num_used>=I)for(c0=0;c0<I;c0++)k[c0]=V0[N0+T0.num_used+c0-I];else{var m0=I-T0.num_used;for(c0=0;c0<m0;++c0)k[c0]=k[c0+T0.num_used];for(G0=0;c0<I;++c0,++G0)k[c0]=V0[N0+G0];Y(G0==T0.num_used)}return e1}function c1(r,_,d0,E0,V0,N0){var y0=r.internal_flags;if(y0.resample_ratio<.9999||y0.resample_ratio>1.0001)for(var T0=0;T0<y0.channels_out;T0++){var F0=new A0;N0.n_out=P0(r,_[T0],y0.mf_size,r.framesize,d0[T0],E0,V0,F0,T0),N0.n_in=F0.num_used}else{N0.n_out=Math.min(r.framesize,V0),N0.n_in=N0.n_out;for(var I0=0;I0<N0.n_out;++I0)_[0][y0.mf_size+I0]=d0[0][E0+I0],y0.channels_out==2&&(_[1][y0.mf_size+I0]=d0[1][E0+I0])}}}return Be=c,Be}var Lt=Z0,M1=Lt.VbrMode;function Nt(){var y=Te();function M(x,f,O,s0,Z,J,K,c,o,u,S,e,l,R,L){this.vbr_q=x,this.quant_comp=f,this.quant_comp_s=O,this.expY=s0,this.st_lrm=Z,this.st_s=J,this.masking_adj=K,this.masking_adj_short=c,this.ath_lower=o,this.ath_curve=u,this.ath_sensitivity=S,this.interch=e,this.safejoint=l,this.sfb21mod=R,this.msfix=L}function V(x,f,O,s0,Z,J,K,c,o,u,S,e,l,R){this.quant_comp=f,this.quant_comp_s=O,this.safejoint=s0,this.nsmsfix=Z,this.st_lrm=J,this.st_s=K,this.nsbass=c,this.scale=o,this.masking_adj=u,this.ath_lower=S,this.ath_curve=e,this.interch=l,this.sfscale=R}var P;this.setModules=function(x){P=x};var n0=[new M(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new M(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new M(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new M(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new M(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new M(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new M(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new M(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new M(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new M(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new M(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],W=[new M(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new M(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new M(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new M(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new M(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new M(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new M(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new M(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new M(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new M(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new M(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function j(x,f,O){var s0=x.VBR==M1.vbr_rh?n0:W,Z=x.VBR_q_frac,J=s0[f],K=s0[f+1],c=J;J.st_lrm=J.st_lrm+Z*(K.st_lrm-J.st_lrm),J.st_s=J.st_s+Z*(K.st_s-J.st_s),J.masking_adj=J.masking_adj+Z*(K.masking_adj-J.masking_adj),J.masking_adj_short=J.masking_adj_short+Z*(K.masking_adj_short-J.masking_adj_short),J.ath_lower=J.ath_lower+Z*(K.ath_lower-J.ath_lower),J.ath_curve=J.ath_curve+Z*(K.ath_curve-J.ath_curve),J.ath_sensitivity=J.ath_sensitivity+Z*(K.ath_sensitivity-J.ath_sensitivity),J.interch=J.interch+Z*(K.interch-J.interch),J.msfix=J.msfix+Z*(K.msfix-J.msfix),h0(x,c.vbr_q),O!=0?x.quant_comp=c.quant_comp:Math.abs(x.quant_comp- -1)>0||(x.quant_comp=c.quant_comp),O!=0?x.quant_comp_short=c.quant_comp_s:Math.abs(x.quant_comp_short- -1)>0||(x.quant_comp_short=c.quant_comp_s),c.expY!=0&&(x.experimentalY=c.expY!=0),O!=0?x.internal_flags.nsPsy.attackthre=c.st_lrm:Math.abs(x.internal_flags.nsPsy.attackthre- -1)>0||(x.internal_flags.nsPsy.attackthre=c.st_lrm),O!=0?x.internal_flags.nsPsy.attackthre_s=c.st_s:Math.abs(x.internal_flags.nsPsy.attackthre_s- -1)>0||(x.internal_flags.nsPsy.attackthre_s=c.st_s),O!=0?x.maskingadjust=c.masking_adj:Math.abs(x.maskingadjust-0)>0||(x.maskingadjust=c.masking_adj),O!=0?x.maskingadjust_short=c.masking_adj_short:Math.abs(x.maskingadjust_short-0)>0||(x.maskingadjust_short=c.masking_adj_short),O!=0?x.ATHlower=-c.ath_lower/10:Math.abs(-x.ATHlower*10-0)>0||(x.ATHlower=-c.ath_lower/10),O!=0?x.ATHcurve=c.ath_curve:Math.abs(x.ATHcurve- -1)>0||(x.ATHcurve=c.ath_curve),O!=0?x.athaa_sensitivity=c.ath_sensitivity:Math.abs(x.athaa_sensitivity- -1)>0||(x.athaa_sensitivity=c.ath_sensitivity),c.interch>0&&(O!=0?x.interChRatio=c.interch:Math.abs(x.interChRatio- -1)>0||(x.interChRatio=c.interch)),c.safejoint>0&&(x.exp_nspsytune=x.exp_nspsytune|c.safejoint),c.sfb21mod>0&&(x.exp_nspsytune=x.exp_nspsytune|c.sfb21mod<<20),O!=0?x.msfix=c.msfix:Math.abs(x.msfix- -1)>0||(x.msfix=c.msfix),O==0&&(x.VBR_q=f,x.VBR_q_frac=Z)}var Y=[new V(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new V(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new V(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new V(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new V(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new V(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new V(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new V(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new V(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new V(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new V(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new V(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new V(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new V(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new V(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new V(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new V(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function z(x,f,O){var s0=f,Z=P.nearestBitrateFullIndex(f);if(x.VBR=M1.vbr_abr,x.VBR_mean_bitrate_kbps=s0,x.VBR_mean_bitrate_kbps=Math.min(x.VBR_mean_bitrate_kbps,320),x.VBR_mean_bitrate_kbps=Math.max(x.VBR_mean_bitrate_kbps,8),x.brate=x.VBR_mean_bitrate_kbps,x.VBR_mean_bitrate_kbps>320&&(x.disable_reservoir=!0),Y[Z].safejoint>0&&(x.exp_nspsytune=x.exp_nspsytune|2),Y[Z].sfscale>0&&(x.internal_flags.noise_shaping=2),Math.abs(Y[Z].nsbass)>0){var J=int(Y[Z].nsbass*4);J<0&&(J+=64),x.exp_nspsytune=x.exp_nspsytune|J<<2}return O!=0?x.quant_comp=Y[Z].quant_comp:Math.abs(x.quant_comp- -1)>0||(x.quant_comp=Y[Z].quant_comp),O!=0?x.quant_comp_short=Y[Z].quant_comp_s:Math.abs(x.quant_comp_short- -1)>0||(x.quant_comp_short=Y[Z].quant_comp_s),O!=0?x.msfix=Y[Z].nsmsfix:Math.abs(x.msfix- -1)>0||(x.msfix=Y[Z].nsmsfix),O!=0?x.internal_flags.nsPsy.attackthre=Y[Z].st_lrm:Math.abs(x.internal_flags.nsPsy.attackthre- -1)>0||(x.internal_flags.nsPsy.attackthre=Y[Z].st_lrm),O!=0?x.internal_flags.nsPsy.attackthre_s=Y[Z].st_s:Math.abs(x.internal_flags.nsPsy.attackthre_s- -1)>0||(x.internal_flags.nsPsy.attackthre_s=Y[Z].st_s),O!=0?x.scale=Y[Z].scale:Math.abs(x.scale- -1)>0||(x.scale=Y[Z].scale),O!=0?x.maskingadjust=Y[Z].masking_adj:Math.abs(x.maskingadjust-0)>0||(x.maskingadjust=Y[Z].masking_adj),Y[Z].masking_adj>0?O!=0?x.maskingadjust_short=Y[Z].masking_adj*.9:Math.abs(x.maskingadjust_short-0)>0||(x.maskingadjust_short=Y[Z].masking_adj*.9):O!=0?x.maskingadjust_short=Y[Z].masking_adj*1.1:Math.abs(x.maskingadjust_short-0)>0||(x.maskingadjust_short=Y[Z].masking_adj*1.1),O!=0?x.ATHlower=-Y[Z].ath_lower/10:Math.abs(-x.ATHlower*10-0)>0||(x.ATHlower=-Y[Z].ath_lower/10),O!=0?x.ATHcurve=Y[Z].ath_curve:Math.abs(x.ATHcurve- -1)>0||(x.ATHcurve=Y[Z].ath_curve),O!=0?x.interChRatio=Y[Z].interch:Math.abs(x.interChRatio- -1)>0||(x.interChRatio=Y[Z].interch),f}this.apply_preset=function(x,f,O){switch(f){case y.R3MIX:{f=y.V3,x.VBR=M1.vbr_mtrh;break}case y.MEDIUM:{f=y.V4,x.VBR=M1.vbr_rh;break}case y.MEDIUM_FAST:{f=y.V4,x.VBR=M1.vbr_mtrh;break}case y.STANDARD:{f=y.V2,x.VBR=M1.vbr_rh;break}case y.STANDARD_FAST:{f=y.V2,x.VBR=M1.vbr_mtrh;break}case y.EXTREME:{f=y.V0,x.VBR=M1.vbr_rh;break}case y.EXTREME_FAST:{f=y.V0,x.VBR=M1.vbr_mtrh;break}case y.INSANE:return f=320,x.preset=f,z(x,f,O),x.VBR=M1.vbr_off,f}switch(x.preset=f,f){case y.V9:return j(x,9,O),f;case y.V8:return j(x,8,O),f;case y.V7:return j(x,7,O),f;case y.V6:return j(x,6,O),f;case y.V5:return j(x,5,O),f;case y.V4:return j(x,4,O),f;case y.V3:return j(x,3,O),f;case y.V2:return j(x,2,O),f;case y.V1:return j(x,1,O),f;case y.V0:return j(x,0,O),f}return 8<=f&&f<=320?z(x,f,O):(x.preset=0,f)};function h0(x,f){var O=0;return 0>f&&(O=-1,f=0),9<f&&(O=-1,f=9),x.VBR_q=f,x.VBR_q_frac=0,O}}var Vt=Nt;function Ot(){this.setModules=function(y,M){}}var Ht=Ot;function Ft(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var kt=Ft,Ea=Z0,Ba=Ea.new_float,Xt=Ea.new_int;function Yt(){this.global_gain=0,this.sfb_count1=0,this.step=Xt(39),this.noise=Ba(39),this.noise_log=Ba(39)}var qt=Yt,X1=Z0,y1=X1.System,Ta=X1.VbrMode,ye=X1.Util,Y1=X1.Arrays,$1=X1.new_float,Z1=X1.assert,Dt=Ht,we=kt,Gt=qt,q0=t1(),ya=ce,wa=g1;function Pt(){var y;this.rv=null;var M;this.qupvt=null;var V,P=new Dt,n0;this.setModules=function(c,o,u,S){y=c,M=o,this.rv=o,V=u,this.qupvt=u,n0=S,P.setModules(V,n0)},this.ms_convert=function(c,o){for(var u=0;u<576;++u){var S=c.tt[o][0].xr[u],e=c.tt[o][1].xr[u];c.tt[o][0].xr[u]=(S+e)*(ye.SQRT2*.5),c.tt[o][1].xr[u]=(S-e)*(ye.SQRT2*.5)}};function W(c,o,u,S){S=0;for(var e=0;e<=u;++e){var l=Math.abs(c.xr[e]);S+=l,o[e]=Math.sqrt(l*Math.sqrt(l)),o[e]>c.xrpow_max&&(c.xrpow_max=o[e])}return S}this.init_xrpow=function(c,o,u){var S=0,e=0|o.max_nonzero_coeff;if(o.xrpow_max=0,Y1.fill(u,e,576,0),S=W(o,u,e,S),S>1e-20){var l=0;c.substep_shaping&2&&(l=1);for(var R=0;R<o.psymax;R++)c.pseudohalf[R]=l;return!0}return Y1.fill(o.l3_enc,0,576,0),!1};function j(c,o){var u=c.ATH,S=o.xr;if(o.block_type!=q0.SHORT_TYPE)for(var e=!1,l=q0.PSFB21-1;l>=0&&!e;l--){var R=c.scalefac_band.psfb21[l],L=c.scalefac_band.psfb21[l+1],H=V.athAdjust(u.adjust,u.psfb21[l],u.floor);c.nsPsy.longfact[21]>1e-12&&(H*=c.nsPsy.longfact[21]);for(var T=L-1;T>=R;T--)if(Math.abs(S[T])<H)S[T]=0;else{e=!0;break}}else for(var p=0;p<3;p++)for(var e=!1,l=q0.PSFB12-1;l>=0&&!e;l--){var R=c.scalefac_band.s[12]*3+(c.scalefac_band.s[13]-c.scalefac_band.s[12])*p+(c.scalefac_band.psfb12[l]-c.scalefac_band.psfb12[0]),L=R+(c.scalefac_band.psfb12[l+1]-c.scalefac_band.psfb12[l]),l0=V.athAdjust(u.adjust,u.psfb12[l],u.floor);c.nsPsy.shortfact[12]>1e-12&&(l0*=c.nsPsy.shortfact[12]);for(var T=L-1;T>=R;T--)if(Math.abs(S[T])<l0)S[T]=0;else{e=!0;break}}}this.init_outer_loop=function(c,o){o.part2_3_length=0,o.big_values=0,o.count1=0,o.global_gain=210,o.scalefac_compress=0,o.table_select[0]=0,o.table_select[1]=0,o.table_select[2]=0,o.subblock_gain[0]=0,o.subblock_gain[1]=0,o.subblock_gain[2]=0,o.subblock_gain[3]=0,o.region0_count=0,o.region1_count=0,o.preflag=0,o.scalefac_scale=0,o.count1table_select=0,o.part2_length=0,o.sfb_lmax=q0.SBPSY_l,o.sfb_smin=q0.SBPSY_s,o.psy_lmax=c.sfb21_extra?q0.SBMAX_l:q0.SBPSY_l,o.psymax=o.psy_lmax,o.sfbmax=o.sfb_lmax,o.sfbdivide=11;for(var u=0;u<q0.SBMAX_l;u++)o.width[u]=c.scalefac_band.l[u+1]-c.scalefac_band.l[u],o.window[u]=3;if(o.block_type==q0.SHORT_TYPE){var S=$1(576);o.sfb_smin=0,o.sfb_lmax=0,o.mixed_block_flag!=0&&(o.sfb_smin=3,o.sfb_lmax=c.mode_gr*2+4),o.psymax=o.sfb_lmax+3*((c.sfb21_extra?q0.SBMAX_s:q0.SBPSY_s)-o.sfb_smin),o.sfbmax=o.sfb_lmax+3*(q0.SBPSY_s-o.sfb_smin),o.sfbdivide=o.sfbmax-18,o.psy_lmax=o.sfb_lmax;var e=c.scalefac_band.l[o.sfb_lmax];y1.arraycopy(o.xr,0,S,0,576);for(var u=o.sfb_smin;u<q0.SBMAX_s;u++)for(var l=c.scalefac_band.s[u],R=c.scalefac_band.s[u+1],L=0;L<3;L++)for(var H=l;H<R;H++)o.xr[e++]=S[3*H+L];for(var T=o.sfb_lmax,u=o.sfb_smin;u<q0.SBMAX_s;u++)o.width[T]=o.width[T+1]=o.width[T+2]=c.scalefac_band.s[u+1]-c.scalefac_band.s[u],o.window[T]=0,o.window[T+1]=1,o.window[T+2]=2,T+=3}o.count1bits=0,o.sfb_partition_table=V.nr_of_sfb_block[0][0],o.slen[0]=0,o.slen[1]=0,o.slen[2]=0,o.slen[3]=0,o.max_nonzero_coeff=575,Y1.fill(o.scalefac,0),j(c,o)};function Y(c){this.ordinal=c}Y.BINSEARCH_NONE=new Y(0),Y.BINSEARCH_UP=new Y(1),Y.BINSEARCH_DOWN=new Y(2);function z(c,o,u,S,e){var l,R=c.CurrentStep[S],L=!1,H=c.OldValue[S],T=Y.BINSEARCH_NONE;for(o.global_gain=H,u-=o.part2_length;;){var p;if(l=n0.count_bits(c,e,o,null),R==1||l==u)break;l>u?(T==Y.BINSEARCH_DOWN&&(L=!0),L&&(R/=2),T=Y.BINSEARCH_UP,p=R):(T==Y.BINSEARCH_UP&&(L=!0),L&&(R/=2),T=Y.BINSEARCH_DOWN,p=-R),o.global_gain+=p,o.global_gain<0&&(o.global_gain=0,L=!0),o.global_gain>255&&(o.global_gain=255,L=!0)}for(Z1(o.global_gain>=0),Z1(o.global_gain<256);l>u&&o.global_gain<255;)o.global_gain++,l=n0.count_bits(c,e,o,null);return c.CurrentStep[S]=H-o.global_gain>=4?4:2,c.OldValue[S]=o.global_gain,o.part2_3_length=l,l}this.trancate_smallspectrums=function(c,o,u,S){var e=$1(wa.SFBMAX);if(!(!(c.substep_shaping&4)&&o.block_type==q0.SHORT_TYPE||c.substep_shaping&128)){V.calc_noise(o,u,e,new we,null);for(var R=0;R<576;R++){var l=0;o.l3_enc[R]!=0&&(l=Math.abs(o.xr[R])),S[R]=l}var R=0,L=8;o.block_type==q0.SHORT_TYPE&&(L=6);do{var H,T,p,l0,b=o.width[L];if(R+=b,!(e[L]>=1)&&(Y1.sort(S,R-b,b),!BitStream.EQ(S[R-1],0))){H=(1-e[L])*u[L],T=0,l0=0;do{var a;for(p=1;l0+p<b&&!BitStream.NEQ(S[l0+R-b],S[l0+R+p-b]);p++);if(a=S[l0+R-b]*S[l0+R-b]*p,H<a){l0!=0&&(T=S[l0+R-b-1]);break}H-=a,l0+=p}while(l0<b);if(!BitStream.EQ(T,0))do Math.abs(o.xr[R-b])<=T&&(o.l3_enc[R-b]=0);while(--b>0)}}while(++L<o.psymax);o.part2_3_length=n0.noquant_count_bits(c,o,null)}};function h0(c){for(var o=0;o<c.sfbmax;o++)if(c.scalefac[o]+c.subblock_gain[c.window[o]]==0)return!1;return!0}function x(c){return ye.FAST_LOG10(.368+.632*c*c*c)}function f(c,o){for(var u=1e-37,S=0;S<o.psymax;S++)u+=x(c[S]);return Math.max(1e-20,u)}function O(c,o,u,S,e){var l;switch(c){default:case 9:{o.over_count>0?(l=u.over_SSD<=o.over_SSD,u.over_SSD==o.over_SSD&&(l=u.bits<o.bits)):l=u.max_noise<0&&u.max_noise*10+u.bits<=o.max_noise*10+o.bits;break}case 0:l=u.over_count<o.over_count||u.over_count==o.over_count&&u.over_noise<o.over_noise||u.over_count==o.over_count&&BitStream.EQ(u.over_noise,o.over_noise)&&u.tot_noise<o.tot_noise;break;case 8:u.max_noise=f(e,S);case 1:l=u.max_noise<o.max_noise;break;case 2:l=u.tot_noise<o.tot_noise;break;case 3:l=u.tot_noise<o.tot_noise&&u.max_noise<o.max_noise;break;case 4:l=u.max_noise<=0&&o.max_noise>.2||u.max_noise<=0&&o.max_noise<0&&o.max_noise>u.max_noise-.2&&u.tot_noise<o.tot_noise||u.max_noise<=0&&o.max_noise>0&&o.max_noise>u.max_noise-.2&&u.tot_noise<o.tot_noise+o.over_noise||u.max_noise>0&&o.max_noise>-.05&&o.max_noise>u.max_noise-.1&&u.tot_noise+u.over_noise<o.tot_noise+o.over_noise||u.max_noise>0&&o.max_noise>-.1&&o.max_noise>u.max_noise-.15&&u.tot_noise+u.over_noise+u.over_noise<o.tot_noise+o.over_noise+o.over_noise;break;case 5:l=u.over_noise<o.over_noise||BitStream.EQ(u.over_noise,o.over_noise)&&u.tot_noise<o.tot_noise;break;case 6:l=u.over_noise<o.over_noise||BitStream.EQ(u.over_noise,o.over_noise)&&(u.max_noise<o.max_noise||BitStream.EQ(u.max_noise,o.max_noise)&&u.tot_noise<=o.tot_noise);break;case 7:l=u.over_count<o.over_count||u.over_noise<o.over_noise;break}return o.over_count==0&&(l=l&&u.bits<o.bits),l}function s0(c,o,u,S,e){var l=c.internal_flags,R;o.scalefac_scale==0?R=1.2968395546510096:R=1.6817928305074292;for(var L=0,H=0;H<o.sfbmax;H++)L<u[H]&&(L=u[H]);var T=l.noise_shaping_amp;switch(T==3&&(e?T=2:T=1),T){case 2:break;case 1:L>1?L=Math.pow(L,.5):L*=.95;break;case 0:default:L>1?L=1:L*=.95;break}for(var p=0,H=0;H<o.sfbmax;H++){var l0=o.width[H],b;if(p+=l0,!(u[H]<L)){if(l.substep_shaping&2&&(l.pseudohalf[H]=l.pseudohalf[H]==0?1:0,l.pseudohalf[H]==0&&l.noise_shaping_amp==2))return;for(o.scalefac[H]++,b=-l0;b<0;b++)S[p+b]*=R,S[p+b]>o.xrpow_max&&(o.xrpow_max=S[p+b]);if(l.noise_shaping_amp==2)return}}}function Z(c,o){for(var u=1.2968395546510096,S=0,e=0;e<c.sfbmax;e++){var l=c.width[e],R=c.scalefac[e];if(c.preflag!=0&&(R+=V.pretab[e]),S+=l,R&1){R++;for(var L=-l;L<0;L++)o[S+L]*=u,o[S+L]>c.xrpow_max&&(c.xrpow_max=o[S+L])}c.scalefac[e]=R>>1}c.preflag=0,c.scalefac_scale=1}function J(c,o,u){var S,e=o.scalefac;for(S=0;S<o.sfb_lmax;S++)if(e[S]>=16)return!0;for(var l=0;l<3;l++){var R=0,L=0;for(S=o.sfb_lmax+l;S<o.sfbdivide;S+=3)R<e[S]&&(R=e[S]);for(;S<o.sfbmax;S+=3)L<e[S]&&(L=e[S]);if(!(R<16&&L<8)){if(o.subblock_gain[l]>=7)return!0;o.subblock_gain[l]++;var H=c.scalefac_band.l[o.sfb_lmax];for(S=o.sfb_lmax+l;S<o.sfbmax;S+=3){var T,p=o.width[S],l0=e[S];if(l0=l0-(4>>o.scalefac_scale),l0>=0){e[S]=l0,H+=p*3;continue}e[S]=0;{var b=210+(l0<<o.scalefac_scale+1);T=V.IPOW20(b)}H+=p*(l+1);for(var a=-p;a<0;a++)u[H+a]*=T,u[H+a]>o.xrpow_max&&(o.xrpow_max=u[H+a]);H+=p*(3-l-1)}{var T=V.IPOW20(202);H+=o.width[S]*(l+1);for(var a=-o.width[S];a<0;a++)u[H+a]*=T,u[H+a]>o.xrpow_max&&(o.xrpow_max=u[H+a])}}}return!1}function K(c,o,u,S,e){var l=c.internal_flags;s0(c,o,u,S,e);var R=h0(o);return R?!1:(l.mode_gr==2?R=n0.scale_bitcount(o):R=n0.scale_bitcount_lsf(l,o),R?(l.noise_shaping>1&&(Y1.fill(l.pseudohalf,0),o.scalefac_scale==0?(Z(o,S),R=!1):o.block_type==q0.SHORT_TYPE&&l.subblock_gain>0&&(R=J(l,o,S)||h0(o))),R||(l.mode_gr==2?R=n0.scale_bitcount(o):R=n0.scale_bitcount_lsf(l,o)),!R):!0)}this.outer_loop=function(c,o,u,S,e,l){var R=c.internal_flags,L=new ya,H=$1(576),T=$1(wa.SFBMAX),p=new we,l0,b=new Gt,a=9999999,A=!1,C=!1,F=0;if(z(R,o,l,e,S),R.noise_shaping==0)return 100;V.calc_noise(o,u,T,p,b),p.bits=o.part2_3_length,L.assign(o);var N=0;for(y1.arraycopy(S,0,H,0,576);!A;){do{var U=new we,B,n=255;if(R.substep_shaping&2?B=20:B=3,R.sfb21_extra&&(T[L.sfbmax]>1||L.block_type==q0.SHORT_TYPE&&(T[L.sfbmax+1]>1||T[L.sfbmax+2]>1))||!K(c,L,T,S,C))break;L.scalefac_scale!=0&&(n=254);var s=l-L.part2_length;if(s<=0)break;for(;(L.part2_3_length=n0.count_bits(R,S,L,b))>s&&L.global_gain<=n;)L.global_gain++;if(L.global_gain>n)break;if(p.over_count==0){for(;(L.part2_3_length=n0.count_bits(R,S,L,b))>a&&L.global_gain<=n;)L.global_gain++;if(L.global_gain>n)break}if(V.calc_noise(L,u,T,U,b),U.bits=L.part2_3_length,o.block_type!=q0.SHORT_TYPE?l0=c.quant_comp:l0=c.quant_comp_short,l0=O(l0,p,U,L,T)?1:0,l0!=0)a=o.part2_3_length,p=U,o.assign(L),N=0,y1.arraycopy(S,0,H,0,576);else if(R.full_outer_loop==0&&(++N>B&&p.over_count==0||R.noise_shaping_amp==3&&C&&N>30||R.noise_shaping_amp==3&&C&&L.global_gain-F>15))break}while(L.global_gain+L.scalefac_scale<255);R.noise_shaping_amp==3?C?A=!0:(L.assign(o),y1.arraycopy(H,0,S,0,576),N=0,F=L.global_gain,C=!0):A=!0}return Z1(o.global_gain+o.scalefac_scale<=255),c.VBR==Ta.vbr_rh||c.VBR==Ta.vbr_mtrh?y1.arraycopy(H,0,S,0,576):R.substep_shaping&1&&trancate_smallspectrums(R,o,u,S),p.over_count},this.iteration_finish_one=function(c,o,u){var S=c.l3_side,e=S.tt[o][u];n0.best_scalefac_store(c,o,u,S),c.use_best_huffman==1&&n0.best_huffman_divide(c,e),M.ResvAdjust(c,e)},this.VBR_encode_granule=function(c,o,u,S,e,l,R){var L=c.internal_flags,H=new ya,T=$1(576),p=R,l0=R+1,b=(R+l)/2,a,A,C=0,F=L.sfb21_extra;Z1(p<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Y1.fill(H.l3_enc,0);do b>p-42?L.sfb21_extra=!1:L.sfb21_extra=F,A=outer_loop(c,o,u,S,e,b),A<=0?(C=1,l0=o.part2_3_length,H.assign(o),y1.arraycopy(S,0,T,0,576),R=l0-32,a=R-l,b=(R+l)/2):(l=b+32,a=R-l,b=(R+l)/2,C!=0&&(C=2,o.assign(H),y1.arraycopy(T,0,S,0,576)));while(a>12);L.sfb21_extra=F,C==2&&y1.arraycopy(H.l3_enc,0,o.l3_enc,0,576),Z1(o.part2_3_length<=p)},this.get_framebits=function(c,o){var u=c.internal_flags;u.bitrate_index=u.VBR_min_bitrate;var S=y.getframebits(c);u.bitrate_index=1,S=y.getframebits(c);for(var e=1;e<=u.VBR_max_bitrate;e++){u.bitrate_index=e;var l=new MeanBits(S);o[e]=M.ResvFrameBegin(c,l),S=l.bits}},this.VBR_old_prepare=function(c,o,u,S,e,l,R,L,H){var T=c.internal_flags,p,l0=0,b=1,a=0;T.bitrate_index=T.VBR_max_bitrate;var A=M.ResvFrameBegin(c,new MeanBits(0))/T.mode_gr;get_framebits(c,l);for(var C=0;C<T.mode_gr;C++){var F=V.on_pe(c,o,L[C],A,C,0);T.mode_ext==q0.MPG_MD_MS_LR&&(ms_convert(T.l3_side,C),V.reduce_side(L[C],u[C],A,F));for(var N=0;N<T.channels_out;++N){var U=T.l3_side.tt[C][N];U.block_type!=q0.SHORT_TYPE?(l0=1.28/(1+Math.exp(3.5-o[C][N]/300))-.05,p=T.PSY.mask_adjust-l0):(l0=2.56/(1+Math.exp(3.5-o[C][N]/300))-.14,p=T.PSY.mask_adjust_short-l0),T.masking_lower=Math.pow(10,p*.1),init_outer_loop(T,U),H[C][N]=V.calc_xmin(c,S[C][N],U,e[C][N]),H[C][N]!=0&&(b=0),R[C][N]=126,a+=L[C][N]}}for(var C=0;C<T.mode_gr;C++)for(var N=0;N<T.channels_out;N++)a>l[T.VBR_max_bitrate]&&(L[C][N]*=l[T.VBR_max_bitrate],L[C][N]/=a),R[C][N]>L[C][N]&&(R[C][N]=L[C][N]);return b},this.bitpressure_strategy=function(c,o,u,S){for(var e=0;e<c.mode_gr;e++)for(var l=0;l<c.channels_out;l++){for(var R=c.l3_side.tt[e][l],L=o[e][l],H=0,T=0;T<R.psy_lmax;T++)L[H++]*=1+.029*T*T/q0.SBMAX_l/q0.SBMAX_l;if(R.block_type==q0.SHORT_TYPE)for(var T=R.sfb_smin;T<q0.SBMAX_s;T++)L[H++]*=1+.029*T*T/q0.SBMAX_s/q0.SBMAX_s,L[H++]*=1+.029*T*T/q0.SBMAX_s/q0.SBMAX_s,L[H++]*=1+.029*T*T/q0.SBMAX_s/q0.SBMAX_s;S[e][l]=0|Math.max(u[e][l],.9*S[e][l])}},this.VBR_new_prepare=function(c,o,u,S,e,l){var R=c.internal_flags,L=1,H=0,T=0,p;if(c.free_format){R.bitrate_index=0;var l0=new MeanBits(H);p=M.ResvFrameBegin(c,l0),H=l0.bits,e[0]=p}else{R.bitrate_index=R.VBR_max_bitrate;var l0=new MeanBits(H);M.ResvFrameBegin(c,l0),H=l0.bits,get_framebits(c,e),p=e[R.VBR_max_bitrate]}for(var b=0;b<R.mode_gr;b++){V.on_pe(c,o,l[b],H,b,0),R.mode_ext==q0.MPG_MD_MS_LR&&ms_convert(R.l3_side,b);for(var a=0;a<R.channels_out;++a){var A=R.l3_side.tt[b][a];R.masking_lower=Math.pow(10,R.PSY.mask_adjust*.1),init_outer_loop(R,A),V.calc_xmin(c,u[b][a],A,S[b][a])!=0&&(L=0),T+=l[b][a]}}for(var b=0;b<R.mode_gr;b++)for(var a=0;a<R.channels_out;a++)T>p&&(l[b][a]*=p,l[b][a]/=T);return L},this.calc_target_bits=function(c,o,u,S,e,l){var R=c.internal_flags,L=R.l3_side,H,T,p,l0,b=0;R.bitrate_index=R.VBR_max_bitrate;var a=new MeanBits(b);for(l[0]=M.ResvFrameBegin(c,a),b=a.bits,R.bitrate_index=1,b=y.getframebits(c)-R.sideinfo_len*8,e[0]=b/(R.mode_gr*R.channels_out),b=c.VBR_mean_bitrate_kbps*c.framesize*1e3,R.substep_shaping&1&&(b*=1.09),b/=c.out_samplerate,b-=R.sideinfo_len*8,b/=R.mode_gr*R.channels_out,H=.93+.07*(11-c.compression_ratio)/(11-5.5),H<.9&&(H=.9),H>1&&(H=1),T=0;T<R.mode_gr;T++){var A=0;for(p=0;p<R.channels_out;p++){if(S[T][p]=int(H*b),o[T][p]>700){var C=int((o[T][p]-700)/1.4),F=L.tt[T][p];S[T][p]=int(H*b),F.block_type==q0.SHORT_TYPE&&C<b/2&&(C=b/2),C>b*3/2?C=b*3/2:C<0&&(C=0),S[T][p]+=C}S[T][p]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(S[T][p]=LameInternalFlags.MAX_BITS_PER_CHANNEL),A+=S[T][p]}if(A>LameInternalFlags.MAX_BITS_PER_GRANULE)for(p=0;p<R.channels_out;++p)S[T][p]*=LameInternalFlags.MAX_BITS_PER_GRANULE,S[T][p]/=A}if(R.mode_ext==q0.MPG_MD_MS_LR)for(T=0;T<R.mode_gr;T++)V.reduce_side(S[T],u[T],b*R.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(l0=0,T=0;T<R.mode_gr;T++)for(p=0;p<R.channels_out;p++)S[T][p]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(S[T][p]=LameInternalFlags.MAX_BITS_PER_CHANNEL),l0+=S[T][p];if(l0>l[0])for(T=0;T<R.mode_gr;T++)for(p=0;p<R.channels_out;p++)S[T][p]*=l[0],S[T][p]/=l0}}var $t=Pt,Zt=Z0,Ia=Zt.assert;function Kt(){var y;this.setModules=function(M){y=M},this.ResvFrameBegin=function(M,V){var P=M.internal_flags,n0,W=P.l3_side,j=y.getframebits(M);V.bits=(j-P.sideinfo_len*8)/P.mode_gr;var Y=8*256*P.mode_gr-8;M.brate>320?n0=8*int(M.brate*1e3/(M.out_samplerate/1152)/8+.5):(n0=8*1440,M.strict_ISO&&(n0=8*int(32e4/(M.out_samplerate/1152)/8+.5))),P.ResvMax=n0-j,P.ResvMax>Y&&(P.ResvMax=Y),(P.ResvMax<0||M.disable_reservoir)&&(P.ResvMax=0);var z=V.bits*P.mode_gr+Math.min(P.ResvSize,P.ResvMax);return z>n0&&(z=n0),Ia(P.ResvMax%8==0),Ia(P.ResvMax>=0),W.resvDrain_pre=0,P.pinfo!=null&&(P.pinfo.mean_bits=V.bits/2,P.pinfo.resvsize=P.ResvSize),z},this.ResvMaxBits=function(M,V,P,n0){var W=M.internal_flags,j,Y=W.ResvSize,z=W.ResvMax;n0!=0&&(Y+=V),W.substep_shaping&1&&(z*=.9),P.bits=V,Y*10>z*9?(j=Y-z*9/10,P.bits+=j,W.substep_shaping|=128):(j=0,W.substep_shaping&=127,!M.disable_reservoir&&!(W.substep_shaping&1)&&(P.bits-=.1*V));var h0=Y<W.ResvMax*6/10?Y:W.ResvMax*6/10;return h0-=j,h0<0&&(h0=0),h0},this.ResvAdjust=function(M,V){M.ResvSize-=V.part2_3_length+V.part2_length},this.ResvFrameEnd=function(M,V){var P,n0=M.l3_side;M.ResvSize+=V*M.mode_gr;var W=0;n0.resvDrain_post=0,n0.resvDrain_pre=0,(P=M.ResvSize%8)!=0&&(W+=P),P=M.ResvSize-W-M.ResvMax,P>0&&(W+=P);{var j=Math.min(n0.main_data_begin*8,W)/8;n0.resvDrain_pre+=8*j,W-=8*j,M.ResvSize-=8*j,n0.main_data_begin-=j}n0.resvDrain_post+=W,M.ResvSize-=W}}var Ut=Kt;function Qt(){var y="http://www.mp3dev.org/",M=3,V=98,P=4,n0=0,W=93;this.getLameVersion=function(){return M+"."+V+"."+P},this.getLameShortVersion=function(){return M+"."+V+"."+P},this.getLameVeryShortVersion=function(){return"LAME"+M+"."+V+"r"},this.getPsyVersion=function(){return n0+"."+W},this.getLameUrl=function(){return y},this.getLameOsBitness=function(){return"32bits"}}var Wt=Qt,q1=Z0,jt=q1.System,Ie=q1.VbrMode,pa=q1.ShortBlock,zt=q1.Arrays,ne=q1.new_byte,Jt=q1.assert;K1.NUMTOCENTRIES=100,K1.MAXFRAMESIZE=2880;function K1(){var y,M,V;this.setModules=function(b,a,A){y=b,M=a,V=A};var P=1,n0=2,W=4,j=8,Y=K1.NUMTOCENTRIES,z=K1.MAXFRAMESIZE,h0=Y+4+4+4+4+4,x=h0+9+1+1+8+1+1+3+1+1+2+4+2+2,f=128,O=64,s0=32,Z=null,J="Xing",K="Info",c=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function o(b,a){if(b.nVbrNumFrames++,b.sum+=a,b.seen++,!(b.seen<b.want)&&(b.pos<b.size&&(b.bag[b.pos]=b.sum,b.pos++,b.seen=0),b.pos==b.size)){for(var A=1;A<b.size;A+=2)b.bag[A/2]=b.bag[A];b.want*=2,b.pos/=2}}function u(b,a){if(!(b.pos<=0))for(var A=1;A<Y;++A){var C=A/Y,F,N,U=0|Math.floor(C*b.pos);U>b.pos-1&&(U=b.pos-1),F=b.bag[U],N=b.sum;var B=0|256*F/N;B>255&&(B=255),a[A]=255&B}}this.addVbrFrame=function(b){var a=b.internal_flags,A=Tables.bitrate_table[b.version][a.bitrate_index];Jt(a.VBR_seek_table.bag!=null),o(a.VBR_seek_table,A)};function S(b,a){var A=b[a+0]&255;return A<<=8,A|=b[a+1]&255,A<<=8,A|=b[a+2]&255,A<<=8,A|=b[a+3]&255,A}function e(b,a,A){b[a+0]=255&(A>>24&255),b[a+1]=255&(A>>16&255),b[a+2]=255&(A>>8&255),b[a+3]=255&(A&255)}function l(b,a,A){b[a+0]=255&(A>>8&255),b[a+1]=255&(A&255)}function R(b,a){return new String(b,a,J.length(),Z).equals(J)||new String(b,a,K.length(),Z).equals(K)}function L(b,a,A){return 255&(b<<a|A&~(-1<<a))}function H(b,a){var A=b.internal_flags;a[0]=L(a[0],8,255),a[1]=L(a[1],3,7),a[1]=L(a[1],1,b.out_samplerate<16e3?0:1),a[1]=L(a[1],1,b.version),a[1]=L(a[1],2,4-3),a[1]=L(a[1],1,b.error_protection?0:1),a[2]=L(a[2],4,A.bitrate_index),a[2]=L(a[2],2,A.samplerate_index),a[2]=L(a[2],1,0),a[2]=L(a[2],1,b.extension),a[3]=L(a[3],2,b.mode.ordinal()),a[3]=L(a[3],2,A.mode_ext),a[3]=L(a[3],1,b.copyright),a[3]=L(a[3],1,b.original),a[3]=L(a[3],2,b.emphasis),a[0]=255;var C=255&(a[1]&241),F;b.version==1?F=f:b.out_samplerate<16e3?F=s0:F=O,b.VBR==Ie.vbr_off&&(F=b.brate);var N;b.free_format?N=0:N=255&16*y.BitrateIndex(F,b.version,b.out_samplerate),b.version==1?(a[1]=255&(C|10),C=255&(a[2]&13),a[2]=255&(N|C)):(a[1]=255&(C|2),C=255&(a[2]&13),a[2]=255&(N|C))}this.getVbrTag=function(b){var a=new VBRTagData,A=0;a.flags=0;var C=b[A+1]>>3&1,F=b[A+2]>>2&3,N=b[A+3]>>6&3,U=b[A+2]>>4&15;if(U=Tables.bitrate_table[C][U],b[A+1]>>4==14?a.samprate=Tables.samplerate_table[2][F]:a.samprate=Tables.samplerate_table[C][F],C!=0?N!=3?A+=32+4:A+=17+4:N!=3?A+=17+4:A+=9+4,!R(b,A))return null;A+=4,a.hId=C;var B=a.flags=S(b,A);if(A+=4,B&P&&(a.frames=S(b,A),A+=4),B&n0&&(a.bytes=S(b,A),A+=4),B&W){if(a.toc!=null)for(var n=0;n<Y;n++)a.toc[n]=b[A+n];A+=Y}a.vbrScale=-1,B&j&&(a.vbrScale=S(b,A),A+=4),a.headersize=(C+1)*72e3*U/a.samprate,A+=21;var s=b[A+0]<<4;s+=b[A+1]>>4;var t=(b[A+1]&15)<<8;return t+=b[A+2]&255,(s<0||s>3e3)&&(s=-1),(t<0||t>3e3)&&(t=-1),a.encDelay=s,a.encPadding=t,a},this.InitVbrTag=function(b){var a=b.internal_flags,A;b.version==1?A=f:b.out_samplerate<16e3?A=s0:A=O,b.VBR==Ie.vbr_off&&(A=b.brate);var C=(b.version+1)*72e3*A/b.out_samplerate,F=a.sideinfo_len+x;if(a.VBR_seek_table.TotalFrameSize=C,C<F||C>z){b.bWriteVbrTag=!1;return}a.VBR_seek_table.nVbrNumFrames=0,a.VBR_seek_table.nBytesWritten=0,a.VBR_seek_table.sum=0,a.VBR_seek_table.seen=0,a.VBR_seek_table.want=1,a.VBR_seek_table.pos=0,a.VBR_seek_table.bag==null&&(a.VBR_seek_table.bag=new int[400],a.VBR_seek_table.size=400);var N=ne(z);H(b,N);for(var U=a.VBR_seek_table.TotalFrameSize,B=0;B<U;++B)M.add_dummy_byte(b,N[B]&255,1)};function T(b,a){var A=a^b;return a=a>>8^c[A&255],a}this.updateMusicCRC=function(b,a,A,C){for(var F=0;F<C;++F)b[0]=T(a[A+F],b[0])};function p(b,a,A,C,F){var N=b.internal_flags,U=0,B=b.encoder_delay,n=b.encoder_padding,s=100-10*b.VBR_q-b.quality,t=V.getLameVeryShortVersion(),i,m=0,D,e0=[1,5,3,2,4,0,3],w=0|(b.lowpassfreq/100+.5>255?255:b.lowpassfreq/100+.5),G=0,i0=0,f0=0,S0=b.internal_flags.noise_shaping,R0=0,A0=0,x0=0,w0=0,P0=0,c1=(b.exp_nspsytune&1)!=0,r=(b.exp_nspsytune&2)!=0,_=!1,d0=!1,E0=b.internal_flags.nogap_total,V0=b.internal_flags.nogap_current,N0=b.ATHtype,y0=0,T0;switch(b.VBR){case vbr_abr:T0=b.VBR_mean_bitrate_kbps;break;case vbr_off:T0=b.brate;break;default:T0=b.VBR_min_bitrate_kbps}switch(b.VBR.ordinal()<e0.length?i=e0[b.VBR.ordinal()]:i=0,D=16*m+i,N.findReplayGain&&(N.RadioGain>510&&(N.RadioGain=510),N.RadioGain<-510&&(N.RadioGain=-510),i0=8192,i0|=3072,N.RadioGain>=0?i0|=N.RadioGain:(i0|=512,i0|=-N.RadioGain)),N.findPeakSample&&(G=Math.abs(0|N.PeakSample/32767*Math.pow(2,23)+.5)),E0!=-1&&(V0>0&&(d0=!0),V0<E0-1&&(_=!0)),y0=N0+((c1?1:0)<<4)+((r?1:0)<<5)+((_?1:0)<<6)+((d0?1:0)<<7),s<0&&(s=0),b.mode){case MONO:R0=0;break;case STEREO:R0=1;break;case DUAL_CHANNEL:R0=2;break;case JOINT_STEREO:b.force_ms?R0=4:R0=3;break;case NOT_SET:default:R0=7;break}b.in_samplerate<=32e3?x0=0:b.in_samplerate==48e3?x0=2:b.in_samplerate>48e3?x0=3:x0=1,(b.short_blocks==pa.short_block_forced||b.short_blocks==pa.short_block_dispensed||b.lowpassfreq==-1&&b.highpassfreq==-1||b.scale_left<b.scale_right||b.scale_left>b.scale_right||b.disable_reservoir&&b.brate<320||b.noATH||b.ATHonly||N0==0||b.in_samplerate<=32e3)&&(A0=1),w0=S0+(R0<<2)+(A0<<5)+(x0<<6),P0=N.nMusicCRC,e(A,C+U,s),U+=4;for(var F0=0;F0<9;F0++)A[C+U+F0]=255&t.charAt(F0);U+=9,A[C+U]=255&D,U++,A[C+U]=255&w,U++,e(A,C+U,G),U+=4,l(A,C+U,i0),U+=2,l(A,C+U,f0),U+=2,A[C+U]=255&y0,U++,T0>=255?A[C+U]=255:A[C+U]=255&T0,U++,A[C+U]=255&B>>4,A[C+U+1]=255&(B<<4)+(n>>8),A[C+U+2]=255&n,U+=3,A[C+U]=255&w0,U++,A[C+U++]=0,l(A,C+U,b.preset),U+=2,e(A,C+U,a),U+=4,l(A,C+U,P0),U+=2;for(var I0=0;I0<U;I0++)F=T(A[C+I0],F);return l(A,C+U,F),U+=2,U}function l0(b){b.seek(0);var a=ne(10);b.readFully(a);var A;return new String(a,"ISO-8859-1").startsWith("ID3")?A=0:A=((a[6]&127)<<21|(a[7]&127)<<14|(a[8]&127)<<7|a[9]&127)+a.length,A}this.getLameTagFrame=function(b,a){var A=b.internal_flags;if(!b.bWriteVbrTag||A.Class_ID!=Lame.LAME_ID||A.VBR_seek_table.pos<=0)return 0;if(a.length<A.VBR_seek_table.TotalFrameSize)return A.VBR_seek_table.TotalFrameSize;zt.fill(a,0,A.VBR_seek_table.TotalFrameSize,0),H(b,a);var C=ne(Y);if(b.free_format)for(var F=1;F<Y;++F)C[F]=255&255*F/100;else u(A.VBR_seek_table,C);var N=A.sideinfo_len;b.error_protection&&(N-=2),b.VBR==Ie.vbr_off?(a[N++]=255&K.charAt(0),a[N++]=255&K.charAt(1),a[N++]=255&K.charAt(2),a[N++]=255&K.charAt(3)):(a[N++]=255&J.charAt(0),a[N++]=255&J.charAt(1),a[N++]=255&J.charAt(2),a[N++]=255&J.charAt(3)),e(a,N,P+n0+W+j),N+=4,e(a,N,A.VBR_seek_table.nVbrNumFrames),N+=4;var U=A.VBR_seek_table.nBytesWritten+A.VBR_seek_table.TotalFrameSize;e(a,N,0|U),N+=4,jt.arraycopy(C,0,a,N,C.length),N+=C.length,b.error_protection&&M.CRC_writeheader(A,a);for(var B=0,F=0;F<N;F++)B=T(a[F],B);return N+=p(b,U,a,N,B),A.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(b,a){var A=b.internal_flags;if(A.VBR_seek_table.pos<=0||(a.seek(a.length()),a.length()==0))return-1;var C=l0(a);a.seek(C);var F=ne(z),N=getLameTagFrame(b,F);return N>F.length?-1:(N<1||a.write(F,0,N),0)}}var gt=K1,Ca=Z0,La=Ca.new_byte,er=Ca.assert,ar=Te(),tr=Vt,rr=va,sr=Sa(),nr=$t,ir=Aa(),lr=Ut,_r=P1,or=Ee();t1();var vr=Wt,hr=gt;function ur(){this.setModules=function(y,M){}}function fr(){this.setModules=function(y,M,V){}}function mr(){}function cr(){this.setModules=function(y,M){}}function br(y,M,V){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),y=1,M=44100,V=128);var P=new ar,n0=new ur,W=new rr,j=new or,Y=new tr,z=new sr,h0=new nr,x=new hr,f=new vr,O=new cr,s0=new lr,Z=new ir,J=new fr,K=new mr;P.setModules(W,j,Y,z,h0,x,f,O,K),j.setModules(W,K,f,x),O.setModules(j,f),Y.setModules(P),h0.setModules(j,s0,z,Z),z.setModules(Z,s0,P.enc.psy),s0.setModules(j),Z.setModules(z),x.setModules(P,j,f),n0.setModules(J,K),J.setModules(f,O,Y);var c=P.lame_init();c.num_channels=y,c.in_samplerate=M,c.brate=V,c.mode=_r.STEREO,c.quality=3,c.bWriteVbrTag=!1,c.disable_reservoir=!0,c.write_id3tag_automatic=!1,P.lame_init_params(c);var o=1152,u=0|1.25*o+7200,S=La(u);this.encodeBuffer=function(e,l){y==1&&(l=e),er(e.length==l.length),e.length>o&&(o=e.length,u=0|1.25*o+7200,S=La(u));var R=P.lame_encode_buffer(c,e,l,e.length,S,0,u);return new Int8Array(S.subarray(0,R))},this.flush=function(){var e=P.lame_encode_flush(c,S,0,u);return new Int8Array(S.subarray(0,e))}}function S1(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function ie(y){return y.charCodeAt(0)<<24|y.charCodeAt(1)<<16|y.charCodeAt(2)<<8|y.charCodeAt(3)}S1.RIFF=ie("RIFF"),S1.WAVE=ie("WAVE"),S1.fmt_=ie("fmt "),S1.data=ie("data"),S1.readHeader=function(y){var M=new S1,V=y.getUint32(0,!1);if(S1.RIFF==V&&(y.getUint32(4,!0),S1.WAVE==y.getUint32(8,!1)&&S1.fmt_==y.getUint32(12,!1))){var P=y.getUint32(16,!0),n0=16+4;switch(P){case 16:case 18:M.channels=y.getUint16(n0+2,!0),M.sampleRate=y.getUint32(n0+4,!0);break;default:throw"extended fmt chunk not implemented"}n0+=P;for(var W=S1.data,j=0;W!=V&&(V=y.getUint32(n0,!1),j=y.getUint32(n0+4,!0),W!=V);)n0+=j+8;return M.dataLen=j,M.dataOffset=n0+8,M}},oe.Mp3Encoder=br,oe.WavHeader=S1;class U1{static applyExponentialGainToChannels(M,V={}){const{timeStart:P,duration:n0=6,rising:W=!0,easingFunction:j=K=>K}=V;if(n0<=0)return;const{src:Y,dst:z,totalDuration:h0}=M,x=P+n0,f=Math.max(0,Math.min(P/h0,1)),O=Math.max(0,Math.min(x/h0,1)),s0=Math.min(Y.length,z.length),Z=Math.min(Y[0].length,z[0].length),J=new Array(1e4).fill().map((K,c,o)=>j(c/(o.length-1)));for(let K=0;K<s0;K++){const c=Y[K],o=z[K],u=Math.floor(Z*f),S=Math.floor(Z*O);for(let e=u;e<=S;e++){const l=(e-u)/(S-u),R=Math.floor(l*J.length),L=J[R];o[e]=c[e]*(W?L:1-L)}}}static cloneAudioBuffer(M){const V=new AudioBuffer({length:M.length,numberOfChannels:M.numberOfChannels,sampleRate:M.sampleRate});for(let P=0;P<M.numberOfChannels;P++){const n0=M.getChannelData(P);V.copyToChannel(n0,P)}return V}static getAudioBufferChannelsSamples(M){return new Array(M.numberOfChannels).fill(0).map((P,n0)=>M.getChannelData(n0).slice())}static renderAudioBufferToCanvas(M,V,P={}){const{plotColor:n0="#3d5",paddingX:W=0,amplitudeFactor:j=.5,trimTimeStart:Y=0,trimTimeEnd:z=1/0,forceWaveFormRender:h0=!1,scaleY:x=1}=P,f=M.width-2*W,O=M.height,s0=O>>1,Z=Math.max(Math.floor(O*j),20);let J=M._cachedWaveFormImage,K=h0;if(J||(J=document.createElement("canvas"),M._cachedWaveFormImage=J,J.width=M.width,J.height=M.height,K=!0),K){const T=J.getContext("2d");T.clearRect(0,0,M.width,M.height),T.lineWidth=1,T.strokeStyle="white";const p=V.getChannelData(0),l0=1,b=Math.min(75,(V.length/f>>2)-1);for(let a=0;a<f;a++){const A=a/f,C=Math.floor(A*V.length),F=Math.max(0,C-b),N=Math.min(V.length-1,C+b);let U=0;for(let n=F;n<=N;n++)U+=Math.abs(p[n]);U/=N-F+1;const B=Math.max(1,Math.floor(U/l0*Z));T.beginPath(),T.moveTo(a+W,s0+B),T.lineTo(a+W,s0-B),T.stroke()}}const c=M.getContext("2d"),o=M.height*x,u=M.height-o>>1;c.clearRect(0,0,M.width,M.height),c.drawImage(J,0,u,M.width,o);const S=c.globalCompositeOperation;c.globalCompositeOperation="source-atop";const e=typeof n0=="function"?n0(c,M,{trimmed:!0}):n0,l=typeof n0=="function"?n0(c,M,{trimmed:!1}):n0,{duration:R}=V,L=Math.floor(Y/R*f),H=Math.ceil(Math.min(z,R)/R*f);c.fillStyle=e,c.fillRect(0,0,M.width,M.height),c.fillStyle=l,c.fillRect(W+L,0,H-L,M.height),c.globalCompositeOperation=S}static audioBufferToMp3Chunks(M,V={}){const{kbps:P=256,onProgress:n0,timeFrom:W=0,timeTo:j=1/0,amplitudeFactor:Y=1}=V,z=new oe.Mp3Encoder(M.numberOfChannels,M.sampleRate,P),h0=[M.getChannelData(0),M.numberOfChannels>1?M.getChannelData(1):[]].map(c=>{const o=Math.max(0,Math.floor(W/M.duration*c.length)),u=Math.min(c.length,Math.ceil(j/M.duration*c.length));return c.slice(o,u)}),x=h0[0].length,f=576*2,O=[],s0=new Int16Array(f),Z=M.numberOfChannels>1?new Int16Array(f):void 0,J=Math.ceil(x/f);let K=0;for(let c=0;c<x;c+=f){const o=Math.min(x-c,f);for(let S=0;S<o;S++){const e=S+c;let l=h0[0][e]*Y,R=Math.max(-1,Math.min(l,1)),L=Math.floor(R>=0?R*32767:R*32768);s0[S]=L,M.numberOfChannels>1&&(l=h0[1][e]*Y,R=Math.max(-1,Math.min(l,1)),L=Math.floor(R>=0?R*32767:R*32768),Z[S]=L)}const u=o!==f?z.encodeBuffer(s0.slice(0,o),Z&&Z.slice(0,o)):z.encodeBuffer(s0,Z);O.push(u),K++,typeof n0=="function"&&n0(K,J)}return O.push(z.flush()),O}constructor(){this.context=null,this.audioBuffer=null,this.channelsData=null,this.gain=null,this.volume=1,this.volumeGain=0,this.isMute=!1,this.hasStarted=!1,this.isPlaying=!1,this.lastPlayTimestamp=void 0,this.seekTimestamp=0,this.easingFunction=M=>M,this.effects=[],this.onEndCallbacks=[],this.initContext()}initContext(){this.context&&this.close(),this.context=new AudioContext,this.gain=new GainNode(this.context),this.gain.connect(this.context.destination),this.updateGainNodeValue()}decodeBuffer(M){return new Promise((V,P)=>{try{this.context.decodeAudioData(M,n0=>{this.audioBuffer=n0,this.channelsDataOriginal=U1.getAudioBufferChannelsSamples(n0),this.channelsData=U1.getAudioBufferChannelsSamples(n0),V(n0)},P)}catch(n0){P(n0)}})}addEffect(M){let V=this.effects.find(P=>P.type===M.type);if(V){let P=!1;for(const n0 in V)if(V[n0]!==M[n0]){P=!0;break}if(!P)return!1;Object.assign(V,M)}else V=M,this.effects.push(M);return this.applyEffects(),this.start(this.getCurrentTime(),this.isPlaying),!0}applyEffects(){for(let M=0;M<this.channelsData.length;M++){const V=this.channelsDataOriginal[M];this.channelsData[M].set(V)}for(const M of this.effects)/^fade(In|Out)$/.test(M.type)&&U1.applyExponentialGainToChannels({dst:this.channelsData,src:this.channelsDataOriginal,totalDuration:this.audioBuffer.duration},{timeStart:M.timeStart,duration:M.duration,rising:M.type==="fadeIn",easingFunction:this.easingFunction});for(let M=0;M<this.channelsData.length;M++)this.audioBuffer.copyToChannel(this.channelsData[M],M)}addOnEndCallback(M){if(typeof M=="function")return this.onEndCallbacks.push(M),!0}setEasingFunction(M){this.easingFunction=M}setMute(M=!0){this.isMute=M,this.updateGainNodeValue()}setVolume(M){M=Math.max(0,Math.min(M,5)),this.volume=M,this.updateGainNodeValue()}setVolumeGain(M){this.volumeGain=Math.max(-1,Math.min(M,2)),this.updateGainNodeValue()}getVolumeGainMultiplier(){return 1+this.volumeGain}updateGainNodeValue(){const M=(this.isMute?0:this.volume)*this.getVolumeGainMultiplier();this.gain.gain.value=M}getGain(){return this.isMute?0:this.gain.gain.value}getVolume(){return this.volume}getCurrentTime(){let M=this.seekTimestamp;return this.lastPlayTimestamp!==void 0&&(M+=this.context.currentTime-this.lastPlayTimestamp),M}start(M=0,V=!0){if(!this.audioBuffer)return;this.source&&(this.source.stop(),this.source.disconnect());const P=this.context.createBufferSource();P.buffer=this.audioBuffer,P.connect(this.gain),P.start(0,M>this.audioBuffer.duration?this.audioBuffer.duration:M),P.onended=()=>{this.source===P&&(this.seekTimestamp+=this.context.currentTime-this.lastPlayTimestamp,this.lastPlayTimestamp=void 0,this.isPlaying=!1,this.hasStarted=!1,this.onEndCallbacks.forEach(n0=>n0()))},this.source=P,this.hasStarted=!0,this.seekTimestamp=0,this.lastPlayTimestamp=this.context.currentTime-M,this.isPlaying=!0,V?this.context.resume():this.pause()}resume(){this.hasStarted?this.isPlaying||(this.context.resume(),this.isPlaying=!0,this.lastPlayTimestamp=this.context.currentTime):this.start()}pause(){this.isPlaying&&(this.context.suspend(),this.isPlaying=!1,this.seekTimestamp+=this.context.currentTime-this.lastPlayTimestamp,this.lastPlayTimestamp=void 0)}close(){this.gain.disconnect(),this.context.suspend(),this.context.close()}}class dr{constructor(M){this.duration=M.duration,this.length=M.length,this.numberOfChannels=M.numberOfChannels,this.sampleRate=M.sampleRate,this.isAudioBufferClone=!0,this.channels=M.channels||[new Float32Array(M.getChannelData(0)),new Float32Array(M.numberOfChannels>1?M.getChannelData(1):[])]}getChannelData(M){return this.channels[M]}getTransferable(){return{data:{...this},buffers:this.channels.map(M=>M.buffer).filter(M=>M)}}}function Sr(y,M){let V;const P=(h0,x)=>{const f=h0/x,O=Math.floor(f*100);O!==V&&(V=O,globalThis.postMessage({progress:O}))},n0=U1.audioBufferToMp3Chunks(y,{...M,onProgress:P}),W=n0.reduce((h0,x)=>h0+x.length,0),j=n0[0].constructor,Y=new j(W);let z=0;for(const h0 of n0)Y.set(h0,z),z+=h0.byteLength;return{buffer:Y}}globalThis.onmessage=y=>{const{audioBuffer:M,options:V}=y.data,P=new dr(M),{buffer:n0}=Sr(P,V);globalThis.postMessage({encodedBuffer:n0},[n0.buffer])}})();
